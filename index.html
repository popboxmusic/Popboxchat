<!DOCTYPE html>
<html lang="tr">
<head> 
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>CETCETY â€¢ Ã‡ift Medya</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://www.youtube.com/iframe_api"></script>
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
    
    <!-- Stil dosyasÄ± -->
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- GÄ°RÄ°Å EKRANI -->
    <div id="loginOverlay" class="login-overlay">
        <div class="login-panel">
            <h2>CETCETY</h2>
            <div class="form-group">
                <label>KullanÄ±cÄ± AdÄ±</label>
                <input type="text" id="loginNick" placeholder="Ã¶rn: kullanici">
            </div>
            <div class="form-group">
                <label>Åifre</label>
                <input type="password" id="loginPassword" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢">
            </div>
            <button type="button" onclick="handleLogin()">GiriÅŸ Yap / KayÄ±t Ol</button>
            <div class="login-info">
                KayÄ±tlÄ± nickler ÅŸifre ile. <strong>KayÄ±tsÄ±z nickler ÅŸifresiz.</strong><br>
                GiriÅŸ yaparak <a onclick="openKvkkModal()">KVKK AydÄ±nlatma Metni</a> ve <a onclick="openTermsModal()">KullanÄ±m ÅartlarÄ±</a>â€™nÄ± kabul etmiÅŸ sayÄ±lÄ±rsÄ±nÄ±z.
            </div>
        </div>
    </div>

    <!-- KVKK METNÄ° MODALÄ° -->
    <div id="kvkkModal" class="modal-overlay">
        <div class="modal-panel">
            <div class="modal-header">
                <h3><i class="fas fa-shield-alt" style="color: #ff0000;"></i> KVKK AydÄ±nlatma Metni</h3>
                <div class="modal-close" onclick="closeModal('kvkkModal')"><i class="fas fa-times"></i></div>
            </div>
            <div class="modal-content kvkk-content">
                <h4>KVKK AydÄ±nlatma Metni</h4>
                <p>Bu AydÄ±nlatma Metni, KiÅŸisel Verilerin KorunmasÄ± Kanunu (â€œKVKKâ€) kapsamÄ±nda, Cetcety platformu tarafÄ±ndan kullanÄ±cÄ±larÄ±n bilgilendirilmesi amacÄ±yla hazÄ±rlanmÄ±ÅŸtÄ±r.</p>
                <hr>
                <h4>1. Platform YapÄ±sÄ±</h4>
                <p>Cetcety, anonim kullanÄ±m esasÄ±na dayalÄ± bir sohbet platformudur. KullanÄ±cÄ±lardan gerÃ§ek ad, soyad veya e-posta adresi talep edilmez.</p>
                <h4>2. Ä°ÅŸlenen Veriler</h4>
                <p>Platformun Ã§alÄ±ÅŸabilmesi ve gÃ¼venliÄŸin saÄŸlanabilmesi amacÄ±yla aÅŸaÄŸÄ±daki veriler iÅŸlenebilir:</p>
                <ul>
                    <li>KullanÄ±cÄ± adÄ± (nick)</li>
                    <li>Åifre (isteÄŸe baÄŸlÄ±, ÅŸifrelenmiÅŸ olarak saklanÄ±r)</li>
                    <li>IP adresi</li>
                    <li>Oturum (session) bilgileri</li>
                    <li>Kanal mesaj iÃ§erikleri</li>
                    <li>Ä°ÅŸlem tarih ve saat kayÄ±tlarÄ±</li>
                </ul>
                <h4>3. Ä°ÅŸleme AmaÃ§larÄ±</h4>
                <p>KiÅŸisel verileriniz;</p>
                <ul>
                    <li>Sohbet hizmetinin sunulmasÄ±</li>
                    <li>Platform gÃ¼venliÄŸinin saÄŸlanmasÄ±</li>
                    <li>Spam ve kÃ¶tÃ¼ye kullanÄ±mÄ±n Ã¶nlenmesi</li>
                    <li>Yasa dÄ±ÅŸÄ± iÃ§eriklerin tespiti</li>
                    <li>Hukuki yÃ¼kÃ¼mlÃ¼lÃ¼klerin yerine getirilmesi</li>
                </ul>
                <p>amaÃ§larÄ±yla iÅŸlenmektedir.</p>
                <h4>4. Hukuki Dayanak</h4>
                <p>Verileriniz;</p>
                <ul>
                    <li>KVKK m.5/2-f (meÅŸru menfaat)</li>
                    <li>KVKK m.5/2-Ã§ (hukuki yÃ¼kÃ¼mlÃ¼lÃ¼k)</li>
                </ul>
                <p>hÃ¼kÃ¼mleri kapsamÄ±nda iÅŸlenmektedir.</p>
                <h4>5. Saklama SÃ¼releri</h4>
                <ul>
                    <li>Kanal mesajlarÄ± en fazla 30 gÃ¼n sÃ¼reyle saklanÄ±r ve otomatik olarak silinir.</li>
                    <li>GÃ¼venlik ve teknik log kayÄ±tlarÄ± sÄ±nÄ±rlÄ± sÃ¼reyle tutulur.</li>
                    <li>Hesap silme talebi halinde profil verileri sistemden kaldÄ±rÄ±lÄ±r.</li>
                    <li>Ã–zel sohbet mesajlarÄ±, oturum kapatÄ±ldÄ±ÄŸÄ±nda otomatik olarak silinir.</li>
                </ul>
                <p>SÃ¼resi dolan veriler periyodik olarak silinir veya anonim hale getirilir.</p>
                <h4>6. Veri AktarÄ±mÄ±</h4>
                <p>KiÅŸisel verileriniz;</p>
                <ul>
                    <li>Yetkili adli ve idari makamlarÄ±n talebi halinde</li>
                    <li>Teknik altyapÄ± saÄŸlayÄ±cÄ±larÄ±yla hizmetin gerektirdiÄŸi Ã¶lÃ§Ã¼de</li>
                </ul>
                <p>KVKK'ya uygun olarak paylaÅŸÄ±labilir.</p>
                <h4>7. HaklarÄ±nÄ±z</h4>
                <p>KVKK'nÄ±n 11. maddesi uyarÄ±nca;</p>
                <ul>
                    <li>Verilerinizin iÅŸlenip iÅŸlenmediÄŸini Ã¶ÄŸrenme</li>
                    <li>DÃ¼zeltme veya silme talep etme</li>
                    <li>Ä°ÅŸlemeye itiraz etme</li>
                </ul>
                <p>haklarÄ±na sahipsiniz.</p>
                <p>BaÅŸvurularÄ±nÄ±zÄ±: <strong>kvkk@cetcety.com</strong> adresine iletebilirsiniz.</p>
            </div>
            <div class="modal-footer">
                <button class="form-button" onclick="closeModal('kvkkModal')">Kapat</button>
            </div>
        </div>
    </div>

    <!-- KULLANIM ÅARTLARI MODALÄ° -->
    <div id="termsModal" class="modal-overlay">
        <div class="modal-panel">
            <div class="modal-header">
                <h3><i class="fas fa-file-contract" style="color: #ff0000;"></i> KullanÄ±m ÅartlarÄ±</h3>
                <div class="modal-close" onclick="closeModal('termsModal')"><i class="fas fa-times"></i></div>
            </div>
            <div class="modal-content kvkk-content">
                <h4>KullanÄ±m ÅartlarÄ±</h4>
                <p>1. CETCETY platformu anonim kullanÄ±ma dayalÄ±dÄ±r. KullanÄ±cÄ±lar gerÃ§ek kimliklerini ifÅŸa etmek zorunda deÄŸildir.</p>
                <p>2. YasaklÄ± kelimeler, spam, hakaret, ÅŸiddet iÃ§eren ifadeler kullanmak yasaktÄ±r. Tespit edilirse yetkililer tarafÄ±ndan mÃ¼dahale edilir.</p>
                <p>3. KullanÄ±cÄ±lar, aÃ§tÄ±klarÄ± kanallardan ve paylaÅŸtÄ±klarÄ± iÃ§eriklerden kendileri sorumludur.</p>
                <p>4. Admin ve co-admin yetkilileri, kanallarÄ±ndaki dÃ¼zeni saÄŸlamakla yÃ¼kÃ¼mlÃ¼dÃ¼r.</p>
                <p>5. Owner (kurucu), platformun tÃ¼mÃ¼ Ã¼zerinde yÃ¶netim yetkisine sahiptir.</p>
                <p>6. Ã–zel sohbetlerde paylaÅŸÄ±lan medyalar (resim, video) yalnÄ±zca taraflarca gÃ¶rÃ¼lebilir. Owner, yasal yÃ¼kÃ¼mlÃ¼lÃ¼kler dÄ±ÅŸÄ±nda Ã¶zel sohbetleri izlemez.</p>
                <p>7. Ã–zel sohbet mesajlarÄ±, oturum kapatÄ±ldÄ±ÄŸÄ±nda otomatik olarak silinir.</p>
                <p>8. Hesap silme iÅŸlemi kalÄ±cÄ±dÄ±r ve geri alÄ±namaz.</p>
                <p>9. Platformu kullanarak bu ÅŸartlarÄ± kabul etmiÅŸ sayÄ±lÄ±rsÄ±nÄ±z.</p>
            </div>
            <div class="modal-footer">
                <button class="form-button" onclick="closeModal('termsModal')">Kapat</button>
            </div>
        </div>
    </div>

    <!-- ANA UYGULAMA -->
    <div id="app" class="app" style="display: none;">
        <!-- SOL Ä°KON PANELÄ° -->
        <div class="icon-panel">
            <div class="icon-item" onclick="openSubscriptions()" title="Abonelikler"><i class="fas fa-bell"></i><span class="icon-badge" id="subscriptionBadge">0</span></div>
            <div class="icon-item" onclick="openChannelPanel()" title="Kanallar"><i class="fas fa-list-ul"></i><span class="icon-badge" id="channelCountBadge">0</span></div>
            <div class="icon-item" onclick="openChatListPanel()" title="Sohbetlerim"><i class="fas fa-comment"></i><span class="icon-badge" id="chatListBadge">0</span></div>
            <div class="icon-item" onclick="openNotificationPanel()" title="Bildirimler"><i class="fas fa-bell"></i><span class="icon-badge" id="notificationBadge">0</span></div>
            <div class="profile-avatar" id="profileAvatar" onclick="openProfilePanel()">
                <span id="avatarText">?</span>
                <img id="avatarImage" style="display: none;">
            </div>
        </div>

        <div class="main-content">
            <!-- SOL PANEL (dinamik) -->
            <div class="left-panel" id="leftPanel"></div>

            <!-- CHAT PANELÄ° -->
            <div class="chat-container">
                <div class="chat-header">
                    <div class="chat-title">
                        <i class="fas fa-hashtag"></i>
                        <span id="currentChannelName">genel</span>
                        <span class="channel-info-bar">
                            <span id="channelUserCount">1</span> Ã§evrimiÃ§i â€¢ 
                            <span id="channelSubscribers">1</span> abone
                        </span>
                    </div>
                    <button id="subscribeChannelBtn" class="channel-subscribe-btn" onclick="toggleChannelSubscribe()"><i class="fas fa-plus"></i> Abone Ol</button>
                </div>
                <div class="messages" id="messages">
                    <div class="system-message"><i class="fas fa-info-circle"></i> CETCETY'ye hoÅŸ geldin! /help yazarak komutlarÄ± gÃ¶rebilirsin.</div>
                </div>
                <div class="message-input-container">
                    <div class="input-wrapper">
                        <textarea id="messageInput" class="message-input" placeholder="Mesaj yazÄ±n... /help" rows="1" oninput="autoResize(this)"></textarea>
                        <div class="send-btn" onclick="sendMessage()"><i class="fas fa-paper-plane"></i></div>
                    </div>
                </div>

                <!-- Ã–ZEL SOHBET PANELÄ° -->
                <div id="privateChatPanel" class="private-chat-panel">
                    <div class="private-chat-header">
                        <div class="private-chat-user">
                            <div class="private-chat-avatar" id="privateChatAvatar">?</div>
                            <div class="private-chat-info">
                                <h4 id="privateChatName">KullanÄ±cÄ±</h4>
                                <span>Ã§evrimiÃ§i</span>
                            </div>
                        </div>
                        <div class="private-chat-actions">
                            <div class="private-chat-action" onclick="blockUser()" title="Engelle"><i class="fas fa-ban"></i></div>
                            <div class="private-chat-action" onclick="reportUser()" title="Åikayet Et"><i class="fas fa-flag"></i></div>
                            <div class="private-chat-action" onclick="closePrivateChat()" title="Kapat"><i class="fas fa-times"></i></div>
                        </div>
                    </div>
                    <div class="private-tabs">
                        <div class="private-tab active" onclick="switchPrivateTab('chat')">Sohbet</div>
                        <div class="private-tab" onclick="switchPrivateTab('media')">Medya</div>
                    </div>
                    <div class="private-chat-messages" id="privateChatMessages"></div>
                    <div class="private-input-container">
                        <div class="private-input-wrapper">
                            <div class="private-media-actions">
                                <div class="private-media-btn" onclick="triggerPrivateImageUpload()" title="Resim GÃ¶nder"><i class="fas fa-image"></i></div>
                                <div class="private-media-btn" onclick="triggerPrivateVideoUpload()" title="Video GÃ¶nder"><i class="fas fa-video"></i></div>
                                <input type="file" id="privateImageUpload" accept="image/*" style="display: none;" onchange="sendPrivateImageFile(this)">
                                <input type="file" id="privateVideoUpload" accept="video/*" style="display: none;" onchange="sendPrivateVideoFile(this)">
                            </div>
                            <div class="private-text-input">
                                <textarea id="privateMessageInput" class="private-input" placeholder="Mesaj yazÄ±n..." rows="1" oninput="autoResize(this)"></textarea>
                                <div class="private-send-btn" onclick="sendPrivateMessage()"><i class="fas fa-paper-plane"></i></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- YOUTUBE MEDYA PANELÄ° -->
            <div id="youtubePanel" class="media-panel">
                <div class="media-header">
                    <div class="media-tab youtube active">
                        <i class="fab fa-youtube"></i>
                        <span>YouTube</span>
                    </div>
                    <div class="media-header-spacer"></div>
                    <div id="addYoutubeBtn" class="media-header-btn" onclick="openAddYoutubeModal()" title="Video ekle">
                        <i class="fas fa-plus"></i>
                    </div>
                    <div class="media-header-btn media-report-btn" onclick="reportMedia()" title="Åikayet Et">
                        <i class="fas fa-flag"></i>
                    </div>
                    <div id="hideYoutubeBtn" class="media-header-btn" onclick="toggleChannelHidden()" title="Gizle/GÃ¶ster">
                        <i id="hideYoutubeIcon" class="fas fa-eye"></i>
                    </div>
                </div>
                <div class="media-player">
                    <div id="youtubeContainer"></div>
                    <div class="player-controls">
                        <div class="player-btn" id="playerMuteBtn" onclick="toggleMute()">
                            <i class="fas fa-volume-up" id="muteIcon"></i>
                        </div>
                        <div class="player-btn" id="playerPlayPauseBtn" onclick="togglePlayPause()">
                            <i class="fas fa-pause" id="playPauseIcon"></i>
                        </div>
                    </div>
                </div>
                <div class="media-now-playing">
                    <i class="fas fa-circle" style="color: #ff0000; font-size: 8px;"></i>
                    <div class="now-playing-info">
                        <div class="now-playing-title" id="youtubeNowPlayingTitle">CETCETY Radio</div>
                        <div class="now-playing-artist" id="youtubeNowPlayingArtist">
                            <span class="role-icon owner">ğŸ‘‘</span>
                            <span id="youtubeNowPlayingOwner">MateKy</span>
                        </div>
                    </div>
                </div>
                <div class="media-playlist-container">
                    <div class="media-playlist-header">
                        <span class="media-playlist-title"><i class="fas fa-list"></i> Kanal Playlist</span>
                        <span class="media-playlist-count" id="youtubePlaylistCount">1 video</span>
                    </div>
                    <div id="youtubePlaylistItems" class="media-playlist-items"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- BAÄLANTI DURUMU -->
    <div id="connectionStatus" class="connection-status connected">
        <span class="status-dot"></span>
        <span id="statusText">Yerel Mod</span>
    </div>

    <!-- MODAL: YouTube Video Ekle -->
    <div id="youtubeModal" class="modal-overlay">
        <div class="modal-panel">
            <div class="modal-header">
                <h3><i class="fab fa-youtube" style="color: #ff0000;"></i> YouTube Video Ekle</h3>
                <div class="modal-close" onclick="closeModal('youtubeModal')"><i class="fas fa-times"></i></div>
            </div>
            <div class="modal-content">
                <div class="form-group">
                    <label class="form-label">Video URL / ID</label>
                    <input type="text" id="youtubeUrlInput" class="form-input" placeholder="https://youtube.com/watch?v=...">
                </div>
                <div class="form-group">
                    <label class="form-label">Video BaÅŸlÄ±ÄŸÄ±</label>
                    <input type="text" id="youtubeTitleInput" class="form-input" placeholder="Video baÅŸlÄ±ÄŸÄ±...">
                </div>
                <div class="info-box">
                    <p><i class="fas fa-info-circle"></i> Ã–rnek: dQw4w9WgXcQ veya tam YouTube linki girebilirsiniz.</p>
                </div>
            </div>
            <div class="modal-footer">
                <button class="form-button secondary" onclick="closeModal('youtubeModal')">Ä°ptal</button>
                <button class="form-button" onclick="addYoutubeVideo()">Ekle</button>
            </div>
        </div>
    </div>

    <!-- MODAL: Profil Resmi YÃ¼kleme -->
    <div id="avatarModal" class="modal-overlay">
        <div class="modal-panel">
            <div class="modal-header">
                <h3><i class="fas fa-camera" style="color: #ff0000;"></i> Profil Resmi YÃ¼kle</h3>
                <div class="modal-close" onclick="closeModal('avatarModal')"><i class="fas fa-times"></i></div>
            </div>
            <div class="modal-content">
                <div class="avatar-upload">
                    <div class="avatar-preview" id="avatarPreview">
                        <span id="avatarPreviewText">?</span>
                        <img id="avatarPreviewImage" style="display: none;">
                    </div>
                    <input type="file" id="avatarFileInput" accept="image/*" style="display: none;" onchange="previewAvatar(this)">
                    <div class="upload-btn" onclick="document.getElementById('avatarFileInput').click()">
                        <i class="fas fa-upload"></i> Resim SeÃ§
                    </div>
                </div>
                <div class="info-box">
                    <p><i class="fas fa-info-circle"></i> JPG, PNG veya GIF formatÄ±nda resim yÃ¼kleyebilirsiniz. Maksimum 2MB.</p>
                </div>
            </div>
            <div class="modal-footer">
                <button class="form-button secondary" onclick="closeModal('avatarModal')">Ä°ptal</button>
                <button class="form-button" onclick="uploadAvatar()">Kaydet</button>
            </div>
        </div>
    </div>

    <!-- MODAL: Ã–zel Sohbet Takip -->
    <div id="privateSpyModal" class="modal-overlay">
        <div class="modal-panel" style="width: 600px;">
            <div class="modal-header">
                <h3><i class="fas fa-eye" style="color: #ff0000;"></i> Ã–zel Sohbet Takip - <span id="spyChannelName">#kanal</span></h3>
                <div class="modal-close" onclick="stopPrivateSpy()"><i class="fas fa-times"></i></div>
            </div>
            <div class="modal-content" id="spyMessages" style="max-height: 400px; overflow-y: auto;">
                <!-- Ã–zel mesajlar burada listelenecek -->
            </div>
            <div class="modal-footer">
                <button class="form-button danger" onclick="stopPrivateSpy()">Takibi Durdur</button>
            </div>
        </div>
    </div>

    <!-- JavaScript dosyalarÄ± -->
    <script src="firebase-config.js"></script>
    <script src="utils.js"></script>
    <script src="auth.js"></script>
    <script src="channels.js"></script>
    <script src="media.js"></script>
    <script src="private.js"></script>
    <script src="commands.js"></script>
    <script src="ui.js"></script>
    <script src="admin.js"></script>
    <script src="app.js"></script>
</body>
</html>
