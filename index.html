<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Popbox Elite - Minimal Chat</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        /* TEMEL SIFIRLAMA */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: #000000;
            color: #ffffff;
            height: 100vh;
            overflow: hidden;
            position: relative;
            transition: background-color 0.5s ease, color 0.5s ease;
        }

        body.day-mode {
            background: #ffffff;
            color: #000000;
        }

        .hidden {
            display: none !important;
        }

        /* YOUTUBE VÄ°DEO PANELÄ° */
        .youtube-panel {
            position: fixed;
            top: 50%;
            right: 30px;
            transform: translateY(-50%);
            width: 420px;
            height: 680px;
            z-index: 10;
            border-radius: 20px;
            overflow: hidden;
            box-shadow: 
                0 25px 50px rgba(0, 0, 0, 0.5),
                inset 0 0 0 1px rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            background: rgba(0, 0, 0, 0.75);
            border: 1px solid rgba(255, 255, 255, 0.15);
        }

        .day-mode .youtube-panel {
            background: rgba(255, 255, 255, 0.75);
            border: 1px solid rgba(0, 0, 0, 0.15);
            box-shadow: 
                0 25px 50px rgba(0, 0, 0, 0.1),
                inset 0 0 0 1px rgba(0, 0, 0, 0.1);
        }

        .youtube-header {
            padding: 20px;
            background: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .day-mode .youtube-header {
            background: rgba(255, 255, 255, 0.5);
            border-bottom: 1px solid rgba(0, 0, 0, 0.1);
        }

        .youtube-tabs {
            display: flex;
            gap: 10px;
        }

        .youtube-tab {
            padding: 8px 16px;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(5px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 12px;
            color: rgba(255, 255, 255, 0.8);
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .day-mode .youtube-tab {
            background: rgba(0, 0, 0, 0.1);
            border: 1px solid rgba(0, 0, 0, 0.2);
            color: rgba(0, 0, 0, 0.8);
        }

        .youtube-tab.active {
            background: rgba(255, 255, 255, 0.25);
            border-color: rgba(255, 255, 255, 0.3);
            color: #ffffff;
        }

        .day-mode .youtube-tab.active {
            background: rgba(0, 0, 0, 0.25);
            border-color: rgba(0, 0, 0, 0.3);
            color: #000000;
        }

        .youtube-iframe {
            width: 100%;
            height: 380px;
            border: none;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .day-mode .youtube-iframe {
            border-bottom: 1px solid rgba(0, 0, 0, 0.1);
        }

        .youtube-overlay {
            position: absolute;
            top: 80px;
            left: 0;
            width: 100%;
            height: 380px;
            background: linear-gradient(135deg, 
                rgba(0, 0, 0, 0.3) 0%, 
                rgba(0, 0, 0, 0.1) 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0.5;
            transition: opacity 0.3s ease;
        }

        .youtube-overlay:hover {
            opacity: 0.8;
        }

        .youtube-title {
            padding: 20px;
            font-size: 16px;
            font-weight: 600;
            color: rgba(255, 255, 255, 0.95);
            background: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(10px);
        }

        .day-mode .youtube-title {
            color: rgba(0, 0, 0, 0.95);
            background: rgba(255, 255, 255, 0.5);
        }

        .playlist-container {
            padding: 15px 5px 15px 15px;
            max-height: 200px;
            overflow-y: auto;
            display: none; /* BaÅŸlangÄ±Ã§ta gizli */
        }

        /* TÃœM SCROLLBARLAR Ä°Ã‡Ä°N TEMA UYUMLU STÄ°LLER */
        *::-webkit-scrollbar {
            width: 8px;
        }

        *::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
        }

        .day-mode *::-webkit-scrollbar-track {
            background: rgba(0, 0, 0, 0.05);
        }

        *::-webkit-scrollbar-thumb {
            background: rgba(255, 255, 255, 0.3);
            border-radius: 10px;
            transition: all 0.3s ease;
        }

        .day-mode *::-webkit-scrollbar-thumb {
            background: rgba(0, 0, 0, 0.3);
        }

        *::-webkit-scrollbar-thumb:hover {
            background: rgba(255, 255, 255, 0.4);
        }

        .day-mode *::-webkit-scrollbar-thumb:hover {
            background: rgba(0, 0, 0, 0.4);
        }

        /* Firefox iÃ§in scrollbar */
        * {
            scrollbar-width: thin;
            scrollbar-color: rgba(255, 255, 255, 0.3) rgba(255, 255, 255, 0.05);
        }

        .day-mode * {
            scrollbar-color: rgba(0, 0, 0, 0.3) rgba(0, 0, 0, 0.05);
        }

        .playlist-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px;
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(5px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            margin-bottom: 10px;
            margin-right: 5px;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
        }

        .day-mode .playlist-item {
            background: rgba(0, 0, 0, 0.05);
            border: 1px solid rgba(0, 0, 0, 0.1);
        }

        .playlist-item:hover {
            background: rgba(255, 255, 255, 0.1);
            transform: translateX(5px);
        }

        .day-mode .playlist-item:hover {
            background: rgba(0, 0, 0, 0.1);
        }

        .playlist-item.active {
            background: rgba(255, 255, 255, 0.15);
            border-color: rgba(255, 255, 255, 0.2);
        }

        .day-mode .playlist-item.active {
            background: rgba(0, 0, 0, 0.15);
            border-color: rgba(0, 0, 0, 0.2);
        }

        .playlist-number {
            width: 24px;
            height: 24px;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(5px);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            font-weight: 600;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .day-mode .playlist-number {
            background: rgba(0, 0, 0, 0.1);
            border: 1px solid rgba(0, 0, 0, 0.2);
        }

        .playlist-title {
            flex: 1;
            font-size: 14px;
            color: rgba(255, 255, 255, 0.9);
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .day-mode .playlist-title {
            color: rgba(0, 0, 0, 0.9);
        }

        .playlist-duration {
            font-size: 12px;
            color: rgba(255, 255, 255, 0.5);
            white-space: nowrap;
        }

        .day-mode .playlist-duration {
            color: rgba(0, 0, 0, 0.5);
        }

        /* PLAYLIST YÃ–NETÄ°M PANELÄ° */
        .playlist-manage-panel {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 500px;
            max-width: 90%;
            background: rgba(0, 0, 0, 0.85);
            backdrop-filter: blur(25px);
            border: 1px solid rgba(255, 255, 255, 0.15);
            border-radius: 20px;
            padding: 30px;
            z-index: 1000;
            display: none;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.5);
        }

        .day-mode .playlist-manage-panel {
            background: rgba(255, 255, 255, 0.85);
            border: 1px solid rgba(0, 0, 0, 0.15);
        }

        .playlist-manage-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .day-mode .playlist-manage-header {
            border-bottom: 1px solid rgba(0, 0, 0, 0.1);
        }

        .playlist-manage-title {
            font-size: 20px;
            font-weight: 600;
            color: rgba(255, 255, 255, 0.95);
        }

        .day-mode .playlist-manage-title {
            color: rgba(0, 0, 0, 0.95);
        }

        .playlist-manage-close {
            width: 36px;
            height: 36px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .playlist-manage-close:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        .day-mode .playlist-manage-close {
            background: rgba(0, 0, 0, 0.1);
            border: 1px solid rgba(0, 0, 0, 0.2);
        }

        .playlist-manage-form {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .playlist-input-group {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .playlist-input-label {
            font-size: 14px;
            font-weight: 500;
            color: rgba(255, 255, 255, 0.9);
        }

        .day-mode .playlist-input-label {
            color: rgba(0, 0, 0, 0.9);
        }

        .playlist-input {
            padding: 12px 16px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            color: #ffffff;
            font-size: 14px;
            transition: all 0.3s ease;
        }

        .day-mode .playlist-input {
            background: rgba(0, 0, 0, 0.1);
            border: 1px solid rgba(0, 0, 0, 0.2);
            color: #000000;
        }

        .playlist-input:focus {
            outline: none;
            border-color: rgba(255, 255, 255, 0.4);
            background: rgba(255, 255, 255, 0.15);
        }

        .day-mode .playlist-input:focus {
            border-color: rgba(0, 0, 0, 0.4);
            background: rgba(0, 0, 0, 0.15);
        }

        .playlist-buttons {
            display: flex;
            gap: 12px;
            margin-top: 20px;
        }

        .playlist-btn {
            flex: 1;
            padding: 12px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            color: rgba(255, 255, 255, 0.9);
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .playlist-btn:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        .day-mode .playlist-btn {
            background: rgba(0, 0, 0, 0.1);
            border: 1px solid rgba(0, 0, 0, 0.2);
            color: rgba(0, 0, 0, 0.9);
        }

        .day-mode .playlist-btn:hover {
            background: rgba(0, 0, 0, 0.2);
        }

        .playlist-btn.primary {
            background: rgba(255, 255, 255, 0.15);
            border-color: rgba(255, 255, 255, 0.25);
        }

        .day-mode .playlist-btn.primary {
            background: rgba(0, 0, 0, 0.15);
            border-color: rgba(0, 0, 0, 0.25);
        }

        /* VÄ°DEO KONTROL BUTONLARI - SADELEÅžTÄ°RÄ°LDÄ° */
        .video-controls {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 10px 20px;
            background: rgba(0, 0, 0, 0.3);
            backdrop-filter: blur(10px);
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }

        .day-mode .video-controls {
            background: rgba(255, 255, 255, 0.3);
            border-top: 1px solid rgba(0, 0, 0, 0.1);
        }

        .video-control-btn {
            padding: 8px 16px;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(5px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            color: rgba(255, 255, 255, 0.9);
            font-size: 13px;
            font-weight: 500;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 6px;
            transition: all 0.3s ease;
        }

        .day-mode .video-control-btn {
            background: rgba(0, 0, 0, 0.1);
            border: 1px solid rgba(0, 0, 0, 0.2);
            color: rgba(0, 0, 0, 0.9);
        }

        .video-control-btn:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        .day-mode .video-control-btn:hover {
            background: rgba(0, 0, 0, 0.2);
        }

        /* MESAJ SÄ°LME BUTONU */
        .message-delete-btn {
            position: absolute;
            top: 8px;
            right: 8px;
            width: 24px;
            height: 24px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 50%;
            display: none;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 10px;
            transition: all 0.3s ease;
        }

        .chat-message:hover .message-delete-btn,
        .private-message:hover .message-delete-btn {
            display: flex;
        }

        .message-delete-btn:hover {
            background: rgba(255, 59, 48, 0.3);
            border-color: rgba(255, 59, 48, 0.5);
        }

        .day-mode .message-delete-btn {
            background: rgba(0, 0, 0, 0.1);
            border: 1px solid rgba(0, 0, 0, 0.2);
        }

        /* CHAT MESAJLARI */
        .chat-messages {
            flex: 1;
            position: relative;
            display: flex;
            flex-direction: column;
            justify-content: flex-end;
            padding: 20px;
            height: calc(100vh - 80px);
        }

        .chat-messages-container {
            display: flex;
            flex-direction: column;
            gap: 12px;
            max-height: 100%;
            overflow-y: auto;
            padding-right: 10px;
            scroll-behavior: smooth;
        }

        .chat-message {
            background: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 18px;
            padding: 12px 16px;
            max-width: 70%;
            animation: messageAppear 0.3s ease forwards;
            opacity: 0;
            transform: translateY(10px);
            position: relative;
        }

        @keyframes messageAppear {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .day-mode .chat-message {
            background: rgba(255, 255, 255, 0.5);
            border: 1px solid rgba(0, 0, 0, 0.1);
        }

        .chat-message.left {
            align-self: flex-start;
            background: rgba(255, 255, 255, 0.1);
        }

        .day-mode .chat-message.left {
            background: rgba(0, 0, 0, 0.1);
        }

        .chat-message.right {
            align-self: flex-end;
            background: rgba(255, 255, 255, 0.15);
        }

        .day-mode .chat-message.right {
            background: rgba(0, 0, 0, 0.15);
        }

        .message-user {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 4px;
        }

        .message-user-avatar {
            width: 24px;
            height: 24px;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(5px);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            font-size: 12px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            overflow: hidden;
        }

        .day-mode .message-user-avatar {
            background: rgba(0, 0, 0, 0.1);
            border: 1px solid rgba(0, 0, 0, 0.2);
        }

        .message-user-avatar img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .message-user-name {
            font-size: 12px;
            font-weight: 600;
            color: rgba(255, 255, 255, 0.9);
        }

        .day-mode .message-user-name {
            color: rgba(0, 0, 0, 0.9);
        }

        .message-content {
            font-size: 14px;
            line-height: 1.4;
            color: rgba(255, 255, 255, 0.95);
        }

        .day-mode .message-content {
            color: rgba(0, 0, 0, 0.95);
        }

        .message-time {
            font-size: 10px;
            color: rgba(255, 255, 255, 0.4);
            text-align: right;
            margin-top: 4px;
        }

        .day-mode .message-time {
            color: rgba(0, 0, 0, 0.4);
        }

        /* PROFÄ°L PANELÄ° */
        .profile-panel {
            position: fixed;
            left: 70px;
            top: 0;
            width: 350px;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(20px);
            border-right: 1px solid rgba(255, 255, 255, 0.1);
            z-index: 95;
            display: none;
            flex-direction: column;
            padding: 20px;
            transform: translateX(-100%);
            transition: transform 0.3s ease, opacity 0.3s ease;
            opacity: 0;
        }

        .profile-panel.active {
            transform: translateX(0);
            opacity: 1;
        }

        .day-mode .profile-panel {
            background: rgba(255, 255, 255, 0.8);
            border-right: 1px solid rgba(0, 0, 0, 0.1);
        }

        /* Ã–ZEL SOHBET PANELÄ° */
        .private-chat-panel {
            position: fixed;
            left: 370px;
            top: 0;
            right: 450px;
            height: 100%;
            background: rgba(0, 0, 0, 0.85);
            backdrop-filter: blur(25px);
            border-right: 1px solid rgba(255, 255, 255, 0.1);
            border-left: 1px solid rgba(255, 255, 255, 0.1);
            z-index: 85;
            display: none;
            flex-direction: column;
            transform: translateX(100%);
            transition: transform 0.4s ease;
        }

        .private-chat-panel.active {
            transform: translateX(0);
            display: flex;
        }

        .day-mode .private-chat-panel {
            background: rgba(255, 255, 255, 0.85);
            border-right: 1px solid rgba(0, 0, 0, 0.1);
            border-left: 1px solid rgba(0, 0, 0, 0.1);
        }

        .private-chat-messages {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .private-message {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 18px;
            padding: 12px 16px;
            max-width: 70%;
            animation: messageAppear 0.3s ease forwards;
            position: relative;
        }

        .day-mode .private-message {
            background: rgba(0, 0, 0, 0.1);
            border: 1px solid rgba(0, 0, 0, 0.1);
        }

        .private-message.right {
            align-self: flex-end;
            background: rgba(255, 255, 255, 0.15);
        }

        .day-mode .private-message.right {
            background: rgba(0, 0, 0, 0.15);
        }

        .private-message.left {
            align-self: flex-start;
        }

        /* DÄ°ÄžER STÄ°LLER */
        .blur-layer {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            transition: opacity 1.5s ease;
        }

        .day-mode .blur-layer {
            background: rgba(255, 255, 255, 0.8);
        }

        .icon-menu {
            position: fixed;
            left: 0;
            top: 0;
            width: 70px;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(20px);
            border-right: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px 0;
            z-index: 100;
        }

        .day-mode .icon-menu {
            background: rgba(255, 255, 255, 0.7);
            border-right: 1px solid rgba(0, 0, 0, 0.1);
        }

        .menu-icon {
            width: 50px;
            height: 50px;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 12px;
            color: rgba(255, 255, 255, 0.9);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            margin-bottom: 15px;
            transition: all 0.3s ease;
            position: relative;
        }

        .day-mode .menu-icon {
            background: rgba(0, 0, 0, 0.1);
            border: 1px solid rgba(0, 0, 0, 0.2);
            color: rgba(0, 0, 0, 0.9);
        }

        .menu-icon:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-2px);
        }

        .day-mode .menu-icon:hover {
            background: rgba(0, 0, 0, 0.2);
        }

        .menu-icon.active {
            background: rgba(255, 255, 255, 0.25);
            border-color: rgba(255, 255, 255, 0.3);
        }

        .day-mode .menu-icon.active {
            background: rgba(0, 0, 0, 0.25);
            border-color: rgba(0, 0, 0, 0.3);
        }

        .online-panel {
            position: fixed;
            left: 70px;
            top: 0;
            width: 300px;
            height: 100%;
            background: rgba(0, 0, 0, 0.6);
            backdrop-filter: blur(15px);
            border-right: 1px solid rgba(255, 255, 255, 0.1);
            z-index: 90;
            display: flex;
            flex-direction: column;
            padding: 20px;
        }

        .day-mode .online-panel {
            background: rgba(255, 255, 255, 0.6);
            border-right: 1px solid rgba(0, 0, 0, 0.1);
        }

        .online-header {
            padding-bottom: 15px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            margin-bottom: 20px;
        }

        .day-mode .online-header {
            border-bottom: 1px solid rgba(0, 0, 0, 0.1);
        }

        .online-header h3 {
            font-size: 18px;
            font-weight: 600;
            color: rgba(255, 255, 255, 0.95);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .day-mode .online-header h3 {
            color: rgba(0, 0, 0, 0.95);
        }

        .online-tabs {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }

        .online-tab {
            flex: 1;
            padding: 8px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            color: rgba(255, 255, 255, 0.8);
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            text-align: center;
            transition: all 0.3s ease;
        }

        .day-mode .online-tab {
            background: rgba(0, 0, 0, 0.1);
            border: 1px solid rgba(0, 0, 0, 0.2);
            color: rgba(0, 0, 0, 0.8);
        }

        .online-tab.active {
            background: rgba(255, 255, 255, 0.25);
            border-color: rgba(255, 255, 255, 0.3);
            color: #ffffff;
        }

        .day-mode .online-tab.active {
            background: rgba(0, 0, 0, 0.25);
            border-color: rgba(0, 0, 0, 0.3);
            color: #000000;
        }

        .nick-list {
            flex: 1;
            overflow-y: auto;
            padding-right: 10px;
        }

        .nick-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
            cursor: pointer;
            transition: all 0.2s ease;
            position: relative;
        }

        .nick-item.has-notification {
            background: rgba(255, 59, 48, 0.1);
            border-radius: 8px;
            padding: 12px;
            margin-right: 5px;
        }

        .nick-item:hover {
            background: rgba(255, 255, 255, 0.05);
            padding-left: 8px;
            border-radius: 8px;
        }

        .day-mode .nick-item:hover {
            background: rgba(0, 0, 0, 0.05);
        }

        .nick-avatar {
            width: 36px;
            height: 36px;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(5px);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            font-size: 14px;
            border: 2px solid rgba(255, 255, 255, 0.2);
            overflow: hidden;
            position: relative;
        }

        .nick-avatar img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .day-mode .nick-avatar {
            background: rgba(0, 0, 0, 0.1);
            border: 2px solid rgba(0, 0, 0, 0.2);
        }

        .nick-info {
            flex: 1;
        }

        .nick-name {
            font-size: 14px;
            font-weight: 500;
            color: rgba(255, 255, 255, 0.95);
        }

        .day-mode .nick-name {
            color: rgba(0, 0, 0, 0.95);
        }

        .nick-status {
            font-size: 11px;
            color: rgba(255, 255, 255, 0.5);
            margin-top: 2px;
        }

        .day-mode .nick-status {
            color: rgba(0, 0, 0, 0.5);
        }

        .chat-panel {
            position: fixed;
            left: 370px;
            top: 0;
            right: 450px;
            height: 100%;
            background: transparent;
            z-index: 80;
            display: flex;
            flex-direction: column;
        }

        .message-input-area {
            padding: 20px;
            background: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(15px);
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            flex-shrink: 0;
        }

        .day-mode .message-input-area {
            background: rgba(255, 255, 255, 0.5);
            border-top: 1px solid rgba(0, 0, 0, 0.1);
        }

        .message-input-wrapper {
            display: flex;
            gap: 12px;
        }

        .message-input {
            flex: 1;
            padding: 14px 18px;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 24px;
            color: #ffffff;
            font-size: 14px;
            font-family: inherit;
            transition: all 0.3s ease;
        }

        .day-mode .message-input {
            background: rgba(0, 0, 0, 0.1);
            border: 1px solid rgba(0, 0, 0, 0.2);
            color: #000000;
        }

        .message-input:focus {
            outline: none;
            border-color: rgba(255, 255, 255, 0.4);
            background: rgba(255, 255, 255, 0.15);
        }

        .day-mode .message-input:focus {
            border-color: rgba(0, 0, 0, 0.4);
            background: rgba(0, 0, 0, 0.15);
        }

        .send-button {
            width: 50px;
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 50%;
            color: rgba(255, 255, 255, 0.9);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            transition: all 0.3s ease;
        }

        .day-mode .send-button {
            background: rgba(0, 0, 0, 0.1);
            border: 1px solid rgba(0, 0, 0, 0.2);
            color: rgba(0, 0, 0, 0.9);
        }

        .send-button:hover {
            background: rgba(255, 255, 255, 0.25);
            transform: scale(1.1);
        }

        .day-mode .send-button:hover {
            background: rgba(0, 0, 0, 0.2);
        }

        /* KIRMIZI YANMA NOKTASI */
        .notification-dot {
            position: absolute;
            top: -3px;
            right: -3px;
            width: 12px;
            height: 12px;
            background: #ff3b30;
            border-radius: 50%;
            border: 2px solid rgba(0, 0, 0, 0.8);
            animation: pulse 2s infinite;
            display: none;
        }

        .day-mode .notification-dot {
            border: 2px solid rgba(255, 255, 255, 0.8);
        }

        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.5; }
            100% { opacity: 1; }
        }

        /* YAPAY ZEKA BOTU STÄ°LLERÄ° */
        .meta-bot-message {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.15), rgba(255, 255, 255, 0.05));
            border: 1px solid rgba(100, 200, 255, 0.3);
            position: relative;
        }

        .meta-bot-message::before {
            content: "ðŸ¤– AI";
            position: absolute;
            top: -10px;
            left: 10px;
            font-size: 10px;
            background: rgba(100, 200, 255, 0.3);
            padding: 2px 8px;
            border-radius: 10px;
            color: rgba(255, 255, 255, 0.9);
        }

        .day-mode .meta-bot-message {
            background: linear-gradient(135deg, rgba(0, 0, 0, 0.15), rgba(0, 0, 0, 0.05));
            border: 1px solid rgba(100, 200, 255, 0.2);
        }

        /* RESPONSIVE */
        @media (max-width: 1400px) {
            .youtube-panel {
                width: 380px;
                height: 650px;
            }
            
            .chat-panel {
                right: 410px;
            }
            
            .private-chat-panel {
                left: 370px;
                right: 410px;
            }
        }

        @media (max-width: 1200px) {
            .youtube-panel {
                display: none;
            }
            
            .chat-panel {
                right: 0;
            }
            
            .private-chat-panel {
                right: 0;
            }
        }

        @media (max-width: 992px) {
            .online-panel {
                display: none;
            }
            
            .icon-menu {
                width: 60px;
            }
            
            .chat-panel {
                left: 60px;
            }
            
            .private-chat-panel {
                left: 60px;
            }
        }

        @media (max-width: 768px) {
            .chat-panel {
                left: 0;
                padding-bottom: 80px;
            }
            
            .private-chat-panel {
                left: 0;
            }
            
            .icon-menu {
                bottom: 0;
                top: auto;
                width: 100%;
                height: 60px;
                flex-direction: row;
                justify-content: space-around;
                padding: 0 10px;
                border-right: none;
                border-top: 1px solid rgba(255, 255, 255, 0.1);
            }
            
            .menu-icon {
                width: 40px;
                height: 40px;
                margin-bottom: 0;
            }
        }
    </style>
</head>
<body class="night-mode">
    <!-- YOUTUBE VÄ°DEO PANELÄ° -->
    <div class="youtube-panel" id="youtubePanel">
        <div class="youtube-header">
            <div class="youtube-tabs">
                <div class="youtube-tab active" onclick="switchYouTubeTab('live')">CanlÄ± YayÄ±n</div>
                <div class="youtube-tab" onclick="togglePlaylist()">Playlist</div>
            </div>
            <div style="display: flex; gap: 8px;">
                <div class="add-video-btn admin-only" onclick="openPlaylistManagePanel()" title="Playlist YÃ¶netimi">
                    <i class="fas fa-plus"></i>
                </div>
                <div class="menu-icon" style="width: 40px; height: 40px; margin: 0;" onclick="togglePlaylist()" title="Playlist">
                    <i class="fas fa-list"></i>
                </div>
            </div>
        </div>
        
        <iframe 
            class="youtube-iframe"
            id="youtubeIframe"
            src="https://www.youtube.com/embed/jfKfPfyJRdk?autoplay=1&mute=0&controls=1&modestbranding=1&rel=0"
            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
            allowfullscreen>
        </iframe>
        
        <div class="youtube-overlay">
            <i class="fas fa-play" style="font-size: 40px; color: rgba(255,255,255,0.8);"></i>
        </div>
        
        <div class="youtube-title" id="videoTitle">Popbox Radio â€¢ 24/7 CanlÄ± MÃ¼zik</div>
        
        <!-- Video Kontrolleri - SADELEÅžTÄ°RÄ°LDÄ° -->
        <div class="video-controls">
            <div class="video-control-btn" onclick="toggleVideoMute()" id="muteBtn">
                <i class="fas fa-volume-up"></i>
                <span id="muteText">Ses Kapat</span>
            </div>
            <div class="video-control-btn" onclick="toggleVideoPlay()" id="playBtn">
                <i class="fas fa-pause" id="playIcon"></i>
                <span id="playText">Duraklat</span>
            </div>
        </div>
        
        <div class="playlist-container" id="playlistContainer">
            <!-- Playlist Ã¶ÄŸeleri buraya yÃ¼klenecek -->
        </div>
    </div>

    <!-- PLAYLIST YÃ–NETÄ°M PANELÄ° -->
    <div class="playlist-manage-panel" id="playlistManagePanel">
        <div class="playlist-manage-header">
            <div class="playlist-manage-title">Playlist YÃ¶netimi</div>
            <div class="playlist-manage-close" onclick="closePlaylistManagePanel()">
                <i class="fas fa-times"></i>
            </div>
        </div>
        <div class="playlist-manage-form">
            <div class="playlist-input-group">
                <label class="playlist-input-label">YouTube Video ID veya URL</label>
                <input type="text" id="videoIdInput" class="playlist-input" placeholder="Video ID veya tam URL">
            </div>
            <div class="playlist-input-group">
                <label class="playlist-input-label">Video BaÅŸlÄ±ÄŸÄ±</label>
                <input type="text" id="videoTitleInput" class="playlist-input" placeholder="Video baÅŸlÄ±ÄŸÄ±">
            </div>
            <div class="playlist-input-group">
                <label class="playlist-input-label">Video TÃ¼rÃ¼</label>
                <select id="videoTypeInput" class="playlist-input">
                    <option value="live">CanlÄ± YayÄ±n</option>
                    <option value="radio">Radyo</option>
                    <option value="playlist">Playlist</option>
                </select>
            </div>
            <div class="playlist-buttons">
                <button class="playlist-btn" onclick="closePlaylistManagePanel()">Ä°ptal</button>
                <button class="playlist-btn primary" onclick="addVideoToPlaylist()">Ekle</button>
            </div>
        </div>
    </div>

    <!-- PROFÄ°L PANELÄ° -->
    <div class="profile-panel" id="profilePanel">
        <div class="profile-header">
            <div class="profile-avatar-large" id="profileAvatarLarge" onclick="uploadProfileImage()">
                <span id="profileAvatarText">M</span>
            </div>
            <div class="profile-info">
                <h3 id="profileName">mateky</h3>
                <div class="profile-role" id="profileRole">owner</div>
            </div>
        </div>
        
        <div class="profile-sections">
            <div class="profile-section">
                <h4>Profil AyarlarÄ±</h4>
                <div class="profile-item" onclick="uploadProfileImage()">
                    <div class="profile-item-icon">
                        <i class="fas fa-camera"></i>
                    </div>
                    <div class="profile-item-text">
                        <div class="profile-item-title">Profil Resmi YÃ¼kle</div>
                        <div class="profile-item-desc">Resim dosyasÄ± yÃ¼kleyin (JPG, PNG)</div>
                    </div>
                </div>
                
                <div class="profile-item" onclick="changePassword()" id="passwordChangeItem">
                    <div class="profile-item-icon">
                        <i class="fas fa-key"></i>
                    </div>
                    <div class="profile-item-text">
                        <div class="profile-item-title">Åžifre DeÄŸiÅŸtir</div>
                        <div class="profile-item-desc">GÃ¼venliÄŸiniz iÃ§in ÅŸifrenizi gÃ¼ncelleyin</div>
                    </div>
                </div>
            </div>
            
            <div class="profile-section">
                <h4>GÃ¶rÃ¼nÃ¼m</h4>
                <div class="profile-item" onclick="toggleTheme()">
                    <div class="profile-item-icon">
                        <i class="fas fa-moon"></i>
                    </div>
                    <div class="profile-item-text">
                        <div class="profile-item-title" id="themeTitle">Gece Modu</div>
                        <div class="profile-item-desc">Tema deÄŸiÅŸtir: Gece/GÃ¼ndÃ¼z</div>
                    </div>
                </div>
                
                <div class="profile-item" onclick="toggleSleepMode()">
                    <div class="profile-item-icon">
                        <i class="fas fa-bed"></i>
                    </div>
                    <div class="profile-item-text">
                        <div class="profile-item-title" id="sleepModeTitle">Uyku Modu: KapalÄ±</div>
                        <div class="profile-item-desc">Otomatik kapanma ayarlarÄ±</div>
                    </div>
                </div>
            </div>
            
            <div class="profile-section">
                <h4>Hesap Ä°ÅŸlemleri</h4>
                <div class="profile-item" onclick="openRegistrationPanel()" id="registrationItem">
                    <div class="profile-item-icon">
                        <i class="fas fa-user-plus"></i>
                    </div>
                    <div class="profile-item-text">
                        <div class="profile-item-title" id="registrationTitle">Hesap KaydÄ±</div>
                        <div class="profile-item-desc">HesabÄ±nÄ±zÄ± kaydedin veya gÃ¼ncelleyin</div>
                    </div>
                </div>
                
                <div class="profile-item" onclick="handleLogout()">
                    <div class="profile-item-icon">
                        <i class="fas fa-sign-out-alt"></i>
                    </div>
                    <div class="profile-item-text">
                        <div class="profile-item-title">Ã‡Ä±kÄ±ÅŸ Yap</div>
                        <div class="profile-item-desc">GÃ¼venli Ã§Ä±kÄ±ÅŸ</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Ã–ZEL SOHBET PANELÄ° -->
    <div class="private-chat-panel" id="privateChatPanel">
        <div class="private-chat-header">
            <div class="private-chat-user">
                <div class="private-chat-avatar" id="privateChatAvatar">
                    <span id="privateChatAvatarText">A</span>
                </div>
                <div>
                    <div id="privateChatUserName" style="font-weight: 600; font-size: 16px;">Ahmet</div>
                    <div id="privateChatUserStatus" style="font-size: 12px; color: rgba(255,255,255,0.6);">Ã‡evrimiÃ§i</div>
                </div>
            </div>
            <div class="private-chat-actions">
                <div class="private-action-btn report" onclick="reportUser()">
                    <i class="fas fa-flag"></i> Åžikayet
                </div>
                <div class="private-action-btn block" onclick="blockUser()" id="blockBtn">
                    <i class="fas fa-ban"></i> Engelle
                </div>
                <div class="private-action-btn" onclick="closePrivateChat()">
                    <i class="fas fa-times"></i> Kapat
                </div>
            </div>
        </div>
        
        <div class="private-chat-messages" id="privateChatMessages">
            <!-- Ã–zel mesajlar buraya yÃ¼klenecek -->
        </div>
        
        <div class="private-input-area">
            <div class="private-input-wrapper">
                <input type="file" id="privateFileInput" accept="image/*,video/*" style="display: none;">
                <button class="private-attachment-btn" onclick="openPrivateFilePicker()" title="Dosya Ekle">
                    <i class="fas fa-paperclip"></i>
                </button>
                <input type="text" id="privateMessageInput" class="private-message-input" placeholder="Ã–zel mesajÄ±nÄ±zÄ± yazÄ±n...">
                <button class="private-send-btn" onclick="sendPrivateMessage()">
                    <i class="fas fa-paper-plane"></i>
                </button>
            </div>
        </div>
    </div>

    <!-- BULANIK KATMAN -->
    <div class="blur-layer" id="blurLayer"></div>

    <!-- SOL BAR - ICON MENU -->
    <div class="icon-menu">
        <div class="menu-icon active" onclick="togglePanel('online')" title="Online Listesi" id="onlineListBtn">
            <i class="fas fa-users"></i>
        </div>
        <div class="menu-icon" onclick="toggleProfilePanel()" title="Profil" id="profileIconBtn">
            <i class="fas fa-user-circle"></i>
        </div>
        <div class="menu-icon" onclick="toggleTheme()" title="Tema DeÄŸiÅŸtir" id="themeToggle">
            <i class="fas fa-moon"></i>
        </div>
        <div class="menu-icon" onclick="openSettings()" title="Ayarlar">
            <i class="fas fa-cog"></i>
        </div>
        <div class="menu-icon" onclick="openIRC()" title="IRC KomutlarÄ±">
            <i class="fas fa-terminal"></i>
        </div>
        <div class="menu-icon" onclick="handleLogout()" title="Ã‡Ä±kÄ±ÅŸ Yap">
            <i class="fas fa-sign-out-alt"></i>
        </div>
        
        <!-- SOL BAR ALTINDAKÄ° PROFÄ°L RESMÄ° -->
        <div class="profile-bottom-avatar" id="bottomProfileAvatar" onclick="toggleProfilePanel()">
            <span id="bottomAvatarText">M</span>
        </div>
    </div>

    <!-- SOL PANEL - ONLINE LÄ°STESÄ° -->
    <div class="online-panel" id="onlinePanel">
        <div class="online-header">
            <h3><i class="fas fa-users"></i> Online Listeler</h3>
            <div class="online-tabs">
                <div class="online-tab active" onclick="switchTab('online')">Ã‡evrimiÃ§i</div>
                <div class="online-tab" onclick="switchTab('chatting')">Sohbette</div>
            </div>
        </div>
        
        <div class="nick-list" id="onlineList">
            <!-- Online kullanÄ±cÄ±lar buraya yÃ¼klenecek -->
        </div>
    </div>

    <!-- ORTA PANEL - GENEL SOHBET -->
    <div class="chat-panel">
        <div class="chat-messages" id="chatMessages">
            <div class="chat-messages-container" id="chatContainer">
                <!-- Mesajlar buraya yÃ¼klenecek -->
            </div>
        </div>
        
        <div class="message-input-area">
            <div class="message-input-wrapper">
                <input type="text" id="messageInput" class="message-input" placeholder="MesajÄ±nÄ±zÄ± yazÄ±n...">
                <button class="send-button" onclick="sendMessage()">
                    <i class="fas fa-paper-plane"></i>
                </button>
            </div>
        </div>
    </div>

    <!-- GÄ°RÄ°Åž PANELÄ° -->
    <div class="login-container" id="loginContainer">
        <div class="login-header">
            <div class="logo">
                <div class="logo-icon">
                    <i class="fas fa-comment-dots"></i>
                </div>
                <div class="logo-text">Popbox Elite</div>
            </div>
            <h2 class="login-title">Minimalist Chat Platform</h2>
            <p class="login-subtitle">Siyah & Beyaz â€¢ Åžeffaf â€¢ Premium</p>
        </div>

        <div class="login-form">
            <div id="errorMessage" class="error-message">
                <i class="fas fa-exclamation-circle"></i>
                <span id="errorText"></span>
            </div>

            <div class="input-group">
                <div class="input-label">
                    <i class="fas fa-user"></i>
                    KullanÄ±cÄ± AdÄ±
                </div>
                <input type="text" 
                       id="nickInput" 
                       class="login-input" 
                       placeholder="KullanÄ±cÄ± adÄ±nÄ±zÄ± girin"
                       autofocus>
            </div>

            <div class="input-group">
                <div class="input-label">
                    <i class="fas fa-lock"></i>
                    Åžifre
                </div>
                <input type="password" 
                       id="passInput" 
                       class="login-input" 
                       placeholder="Åžifrenizi girin (opsiyonel)">
            </div>

            <button class="login-btn" onclick="handleLogin()" id="loginBtn">
                <span id="btnText">GiriÅŸ Yap</span>
            </button>
        </div>

        <div class="login-footer">
            <div class="login-note">
                <p><strong>Demo KullanÄ±cÄ±lar:</strong></p>
                <p><strong>mateky</strong> / <strong>kumsal07@</strong></p>
                <p><strong>MATE</strong> / <strong>secure123</strong></p>
                <p style="margin-top: 10px; font-size: 12px; color: rgba(255,255,255,0.4);">
                    Not: KayÄ±tlÄ± olmayan nickler iÃ§in ÅŸifre gerekmez
                </p>
            </div>
        </div>
    </div>

    <script>
        // ==================== DEÄžÄ°ÅžKENLER ====================
        let currentUser = null;
        let isDayMode = false;
        let isSleepMode = false;
        let currentTab = 'online';
        let currentYouTubeTab = 'live';
        let onlineUsers = [];
        let chatMessages = [];
        let privateMessages = {};
        let messageInterval;
        let userUpdateInterval;
        let currentVideoIndex = 0;
        let isVideoMuted = false;
        let isVideoPlaying = true;
        let currentPrivateChatUser = null;
        let blockedUsers = [];
        let userNotifications = {};
        let aiUsers = [];
        let metaBot = {
            name: "META",
            avatar: "ðŸ¤–",
            role: "ai",
            knowledge: [],
            personality: "yardÄ±msever ve bilgili",
            learningRate: 0.7
        };

        // Yapay Zeka KonuÅŸma VeritabanÄ±
        const aiResponses = {
            greetings: ["Merhaba! NasÄ±lsÄ±nÄ±z?", "Selam! Size nasÄ±l yardÄ±mcÄ± olabilirim?", "HoÅŸ geldiniz!", "Merhaba, ben META. Size nasÄ±l yardÄ±m edebilirim?"],
            questions: ["Harika bir soru!", "Bunu ÅŸÃ¶yle aÃ§Ä±klayabilirim...", "Ä°lginÃ§ bir konu bu.", "Bu konuda size yardÄ±mcÄ± olabilirim."],
            help: ["YardÄ±ma mÄ± ihtiyacÄ±nÄ±z var?", "Size nasÄ±l yardÄ±m edebilirim?", "Sorununuzu dinliyorum.", "Burada size yardÄ±mcÄ± olmak iÃ§in varÄ±m!"],
            farewell: ["GÃ¶rÃ¼ÅŸÃ¼rÃ¼z!", "Ä°yi gÃ¼nler!", "HoÅŸÃ§a kalÄ±n!", "Tekrar gÃ¶rÃ¼ÅŸmek Ã¼zere!"],
            tech: ["Teknoloji harika deÄŸil mi?", "Bu konuyla ilgili gÃ¼ncel bilgilerim var.", "Yapay zeka geleceÄŸi ÅŸekillendiriyor.", "Dijital dÃ¼nya hÄ±zla geliÅŸiyor."],
            music: ["MÃ¼zik ruhun gÄ±dasÄ±dÄ±r!", "Hangi tÃ¼r mÃ¼zik seviyorsunuz?", "Youtube'dan harika mÃ¼zikler dinleyebilirsiniz.", "MÃ¼zik dinlemek rahatlatÄ±cÄ±dÄ±r."]
        };

        // 100 Yapay Zeka KullanÄ±cÄ±sÄ±
        const aiUserNames = [
            "Alex", "Berk", "Cem", "Deniz", "Efe", "Fatih", "Gizem", "Hakan", "Ä°rem", "Jale",
            "Kaan", "Leyla", "Mehmet", "NazlÄ±", "Onur", "Pelin", "RÄ±za", "Seda", "Tolga", "Umut",
            "Volkan", "Yasemin", "Zehra", "Arda", "Buse", "Caner", "Derya", "Emre", "Fulya", "GÃ¶khan",
            "Hilal", "Ä°lker", "KÃ¼bra", "Levent", "Merve", "Nihan", "OÄŸuz", "PÄ±nar", "RÃ¼ya", "Serkan",
            "TuÄŸba", "Ufuk", "Vildan", "YÄ±ldÄ±z", "ZÃ¼lal", "Alper", "Burcu", "Cihan", "Damla", "Erdem",
            "Fikret", "Gamze", "HÃ¼seyin", "Ä°pek", "Kerem", "Lale", "Murat", "Nermin", "Orhan", "Perihan",
            "Rafet", "Selin", "Tarkan", "UÄŸur", "Vural", "Yavuz", "Zeki", "AslÄ±", "Baran", "Cemre",
            "DoÄŸan", "Elif", "Ferhat", "GÃ¼l", "Hasan", "Ä°clal", "Kadir", "LÃ¼tfiye", "Mustafa", "NeÅŸe",
            "Osman", "Petek", "Rasim", "Sevgi", "Tayfun", "Utku", "Vedat", "YankÄ±", "Zeynep", "Ahsen",
            "Bilge", "Candan", "Dilan", "Ecem", "FÄ±rat", "GÃ¼lÅŸah", "Haluk", "Ä°zzet", "KÄ±vanÃ§", "Melih",
            "Nurdan", "Ozan", "Poyraz", "Recep", "SÃ¼reyya", "TÃ¼rkan", "Ural", "Vecdi", "Yonca", "ZÃ¼beyde"
        ];

        // TÃ¼rkÃ§e Radyo ve MÃ¼zik YouTube KanallarÄ±
        let youtubeVideos = [
            {
                id: "jfKfPfyJRdk",
                title: "Popbox Radio â€¢ 24/7 CanlÄ± MÃ¼zik",
                type: "live",
                duration: "3:45"
            },
            {
                id: "7NOSDKb0HlU",
                title: "TRT FM â€¢ CanlÄ± YayÄ±n",
                type: "radio",
                duration: "2:30"
            },
            {
                id: "0vq4KtIcYp8",
                title: "Kral Pop â€¢ CanlÄ± Radyo",
                type: "radio",
                duration: "4:15"
            },
            {
                id: "UCS5IYCU1Y7YcL7jRzrKofFg",
                title: "Power TÃ¼rk â€¢ CanlÄ± MÃ¼zik",
                type: "live",
                duration: "3:20"
            },
            {
                id: "qK7N4x-3Kc8",
                title: "Slow TÃ¼rk â€¢ Akustik MÃ¼zik",
                type: "radio",
                duration: "2:50"
            }
        ];

        // ==================== SAYFA YÃœKLENDÄ°ÄžÄ°NDE ====================
        document.addEventListener('DOMContentLoaded', function() {
            document.getElementById('nickInput').focus();
            document.getElementById('blurLayer').style.opacity = '0.8';
            
            // ESC tuÅŸu iÃ§in event listener
            document.addEventListener('keydown', function(e) {
                if (e.key === 'Escape') {
                    handleEscapeKey();
                }
                
                // Enter tuÅŸu iÃ§in
                if (e.key === 'Enter') {
                    const activeElement = document.activeElement;
                    if (activeElement.id === 'nickInput' || activeElement.id === 'passInput') {
                        handleLogin();
                    } else if (activeElement.id === 'messageInput') {
                        sendMessage();
                    } else if (activeElement.id === 'privateMessageInput') {
                        sendPrivateMessage();
                    }
                }
            });
            
            // Playlist'i yÃ¼kle
            loadPlaylist();
            
            // Yapay Zeka kullanÄ±cÄ±larÄ±nÄ± oluÅŸtur
            initializeAIUsers();
        });

        // ==================== ESC TUÅžU Ä°ÅžLEMLERÄ° ====================
        function handleEscapeKey() {
            // Profil paneli aÃ§Ä±ksa kapat
            const profilePanel = document.getElementById('profilePanel');
            if (profilePanel.classList.contains('active')) {
                toggleProfilePanel();
                return;
            }
            
            // Ã–zel sohbet paneli aÃ§Ä±ksa kapat
            const privateChatPanel = document.getElementById('privateChatPanel');
            if (privateChatPanel.classList.contains('active')) {
                closePrivateChat();
                return;
            }
            
            // Playlist yÃ¶netim paneli aÃ§Ä±ksa kapat
            const playlistManagePanel = document.getElementById('playlistManagePanel');
            if (playlistManagePanel.style.display === 'block') {
                closePlaylistManagePanel();
                return;
            }
            
            // Playlist container aÃ§Ä±ksa kapat
            const playlistContainer = document.getElementById('playlistContainer');
            if (playlistContainer.style.display === 'block') {
                togglePlaylist();
                return;
            }
            
            // Online panel aÃ§Ä±ksa kapat
            const onlinePanel = document.getElementById('onlinePanel');
            if (onlinePanel.style.display === 'none') {
                onlinePanel.style.display = 'flex';
            }
        }

        // ==================== YOUTUBE SÄ°STEMÄ° - DÃœZELTÄ°LMÄ°Åž ====================
        function loadPlaylist() {
            const playlistContainer = document.getElementById('playlistContainer');
            let html = '';
            
            youtubeVideos.forEach((video, index) => {
                html += `
                    <div class="playlist-item ${index === currentVideoIndex ? 'active' : ''}" onclick="playVideo(${index})">
                        <div class="playlist-number">${index + 1}</div>
                        <div class="playlist-title">${video.title}</div>
                        <div class="playlist-duration">${video.duration}</div>
                    </div>
                `;
            });
            
            playlistContainer.innerHTML = html;
        }

        function playVideo(index) {
            const video = youtubeVideos[index];
            const iframe = document.getElementById('youtubeIframe');
            
            // YouTube iframe URL'sini gÃ¼ncelle
            let newSrc = `https://www.youtube.com/embed/${video.id}?`;
            newSrc += `autoplay=${isVideoPlaying ? 1 : 0}`;
            newSrc += `&mute=${isVideoMuted ? 1 : 0}`;
            newSrc += '&controls=1&modestbranding=1&rel=0';
            
            iframe.src = newSrc;
            
            // BaÅŸlÄ±ÄŸÄ± gÃ¼ncelle
            document.getElementById('videoTitle').textContent = video.title;
            
            // Aktif playlist Ã¶ÄŸesini gÃ¼ncelle
            const playlistItems = document.querySelectorAll('.playlist-item');
            playlistItems.forEach(item => item.classList.remove('active'));
            playlistItems[index].classList.add('active');
            
            currentVideoIndex = index;
        }

        function switchYouTubeTab(tab) {
            currentYouTubeTab = tab;
            const tabs = document.querySelectorAll('.youtube-tab');
            const playlistContainer = document.getElementById('playlistContainer');
            
            tabs.forEach(t => t.classList.remove('active'));
            event.target.classList.add('active');
            
            if (tab === 'live') {
                playlistContainer.style.display = 'none';
                // Rastgele bir canlÄ± yayÄ±n seÃ§
                const liveVideos = youtubeVideos.filter(v => v.type === 'live' || v.type === 'radio');
                const randomIndex = Math.floor(Math.random() * liveVideos.length);
                playVideo(youtubeVideos.findIndex(v => v.id === liveVideos[randomIndex].id));
            }
        }

        function togglePlaylist() {
            const playlistContainer = document.getElementById('playlistContainer');
            const isVisible = playlistContainer.style.display === 'block';
            playlistContainer.style.display = isVisible ? 'none' : 'block';
            
            // Sekme durumunu gÃ¼ncelle
            const tabs = document.querySelectorAll('.youtube-tab');
            tabs.forEach(t => t.classList.remove('active'));
            document.querySelector('.youtube-tab:nth-child(2)').classList.add('active');
        }

        // Video Ses Kontrolleri - DÃœZELTÄ°LMÄ°Åž
        function toggleVideoMute() {
            const iframe = document.getElementById('youtubeIframe');
            const muteText = document.getElementById('muteText');
            const muteBtn = document.getElementById('muteBtn');
            const muteIcon = muteBtn.querySelector('i');
            
            isVideoMuted = !isVideoMuted;
            
            if (isVideoMuted) {
                muteIcon.className = 'fas fa-volume-mute';
                muteText.textContent = 'Ses AÃ§';
                iframe.src = iframe.src.replace('mute=0', 'mute=1');
            } else {
                muteIcon.className = 'fas fa-volume-up';
                muteText.textContent = 'Ses Kapat';
                iframe.src = iframe.src.replace('mute=1', 'mute=0');
            }
        }

        function toggleVideoPlay() {
            const iframe = document.getElementById('youtubeIframe');
            const playIcon = document.getElementById('playIcon');
            const playText = document.getElementById('playText');
            
            isVideoPlaying = !isVideoPlaying;
            
            if (isVideoPlaying) {
                playIcon.className = 'fas fa-pause';
                playText.textContent = 'Duraklat';
                iframe.src = iframe.src.replace('autoplay=0', 'autoplay=1');
            } else {
                playIcon.className = 'fas fa-play';
                playText.textContent = 'Oynat';
                iframe.src = iframe.src.replace('autoplay=1', 'autoplay=0');
            }
        }

        // ==================== PLAYLIST YÃ–NETÄ°M SÄ°STEMÄ° ====================
        function openPlaylistManagePanel() {
            // Sadece admin ve owner yetkisi kontrolÃ¼
            if (currentUser && (currentUser.role === 'admin' || currentUser.role === 'owner' || currentUser.role === 'coadmin')) {
                document.getElementById('playlistManagePanel').style.display = 'block';
            } else {
                alert('Bu Ã¶zellik sadece admin, coadmin ve owner yetkilerine sahip kullanÄ±cÄ±lar iÃ§indir.');
            }
        }

        function closePlaylistManagePanel() {
            document.getElementById('playlistManagePanel').style.display = 'none';
            // InputlarÄ± temizle
            document.getElementById('videoIdInput').value = '';
            document.getElementById('videoTitleInput').value = '';
            document.getElementById('videoTypeInput').value = 'live';
        }

        function addVideoToPlaylist() {
            const videoIdInput = document.getElementById('videoIdInput').value.trim();
            const videoTitle = document.getElementById('videoTitleInput').value.trim();
            const videoType = document.getElementById('videoTypeInput').value;
            
            if (!videoIdInput) {
                alert('LÃ¼tfen video ID veya URL girin!');
                return;
            }
            
            if (!videoTitle) {
                alert('LÃ¼tfen video baÅŸlÄ±ÄŸÄ± girin!');
                return;
            }
            
            let videoId = videoIdInput;
            
            // YouTube URL'den ID Ã§Ä±karma
            if (videoIdInput.includes('youtube.com/watch?v=')) {
                videoId = videoIdInput.split('v=')[1];
                const ampersandPosition = videoId.indexOf('&');
                if (ampersandPosition !== -1) {
                    videoId = videoId.substring(0, ampersandPosition);
                }
            } else if (videoIdInput.includes('youtu.be/')) {
                videoId = videoIdInput.split('youtu.be/')[1];
            }
            
            // Yeni video ekle
            const newVideo = {
                id: videoId,
                title: videoTitle,
                type: videoType,
                duration: Math.floor(Math.random() * 4) + 2 + ":" + Math.floor(Math.random() * 60).toString().padStart(2, '0')
            };
            
            youtubeVideos.push(newVideo);
            
            // Playlist'i yenile
            loadPlaylist();
            
            // Panel kapat ve inputlarÄ± temizle
            closePlaylistManagePanel();
            
            // Bilgi mesajÄ±
            alert('Video baÅŸarÄ±yla eklendi! Playlist\'te gÃ¶rebilirsiniz.');
            
            // Genel sohbette duyuru
            if (currentUser) {
                const now = new Date();
                const timeStr = now.getHours().toString().padStart(2, '0') + ':' + now.getMinutes().toString().padStart(2, '0');
                
                chatMessages.push({
                    user: currentUser.name,
                    avatar: currentUser.avatar,
                    message: `ðŸŽµ Playlist'e yeni video eklendi: "${videoTitle}"`,
                    time: timeStr,
                    side: "left",
                    type: "system"
                });
                
                renderChatMessages();
            }
        }

        // ==================== YAPAY ZEKA SÄ°STEMÄ° ====================
        function initializeAIUsers() {
            aiUsers = aiUserNames.map((name, index) => {
                const avatar = name.substring(0, 1).toUpperCase();
                const status = Math.random() > 0.3 ? 'online' : 'away';
                const chatting = Math.random() > 0.5;
                
                return {
                    name: name,
                    avatar: avatar,
                    role: "ai",
                    status: status,
                    chatting: chatting,
                    lastActive: Date.now() - Math.floor(Math.random() * 3600000),
                    personality: getRandomPersonality(),
                    interests: getRandomInterests(),
                    responsePattern: Math.random()
                };
            });
        }

        function getRandomPersonality() {
            const personalities = ["sosyal", "dÃ¼ÅŸÃ¼nceli", "eÄŸlenceli", "ciddi", "yardÄ±msever", "meraklÄ±", "sakin", "enerjik"];
            return personalities[Math.floor(Math.random() * personalities.length)];
        }

        function getRandomInterests() {
            const interests = ["mÃ¼zik", "teknoloji", "spor", "film", "kitap", "oyun", "yemek", "seyahat", "sanat", "bilim"];
            const count = Math.floor(Math.random() * 3) + 2;
            const selected = new Set();
            while (selected.size < count) {
                selected.add(interests[Math.floor(Math.random() * interests.length)]);
            }
            return Array.from(selected);
        }

        function generateAIResponse(user, message = "") {
            const responseCategories = Object.keys(aiResponses);
            const category = responseCategories[Math.floor(Math.random() * responseCategories.length)];
            const responses = aiResponses[category];
            
            // KiÅŸiliÄŸe gÃ¶re Ã¶zelleÅŸtirme
            let baseResponse = responses[Math.floor(Math.random() * responses.length)];
            
            // Mesaja gÃ¶re Ã¶zelleÅŸtirme
            if (message.toLowerCase().includes("merhaba") || message.toLowerCase().includes("selam")) {
                baseResponse = aiResponses.greetings[Math.floor(Math.random() * aiResponses.greetings.length)];
            } else if (message.toLowerCase().includes("nasÄ±lsÄ±n")) {
                baseResponse = `TeÅŸekkÃ¼r ederim, iyiyim! ${user.name} nasÄ±lsÄ±n?`;
            } else if (message.toLowerCase().includes("teÅŸekkÃ¼r")) {
                baseResponse = "Rica ederim! Size nasÄ±l yardÄ±mcÄ± olabilirim?";
            } else if (message.includes("?")) {
                baseResponse = aiResponses.questions[Math.floor(Math.random() * aiResponses.questions.length)];
            }
            
            // Ä°lgi alanlarÄ±na gÃ¶re Ã¶zelleÅŸtirme
            if (Math.random() > 0.7 && user.interests && user.interests.length > 0) {
                const interest = user.interests[Math.floor(Math.random() * user.interests.length)];
                baseResponse += ` Bu arada ${interest} hakkÄ±nda ne dÃ¼ÅŸÃ¼nÃ¼yorsun?`;
            }
            
            // Emoji ekle
            const emojis = ["ðŸ˜Š", "ðŸ‘", "ðŸŽµ", "ðŸ’»", "ðŸŽ®", "ðŸ“š", "ðŸŽ¬", "âš½", "ðŸ•", "âœˆï¸"];
            if (Math.random() > 0.5) {
                baseResponse += " " + emojis[Math.floor(Math.random() * emojis.length)];
            }
            
            return baseResponse;
        }

        function simulateAIConversation() {
            // Rastgele AI kullanÄ±cÄ±larÄ± seÃ§
            const activeAIUsers = aiUsers.filter(u => u.status === 'online' && Math.random() > 0.7);
            
            activeAIUsers.forEach(aiUser => {
                if (Math.random() > 0.8) { // %20 ÅŸansla sohbete katÄ±l
                    const now = new Date();
                    const timeStr = now.getHours().toString().padStart(2, '0') + ':' + now.getMinutes().toString().padStart(2, '0');
                    
                    // Son mesajlara bak
                    const recentMessages = chatMessages.slice(-5);
                    let response = "";
                    
                    if (recentMessages.length > 0 && Math.random() > 0.5) {
                        // Son mesajlara cevap ver
                        const randomMessage = recentMessages[Math.floor(Math.random() * recentMessages.length)];
                        response = generateAIResponse(aiUser, randomMessage.message);
                    } else {
                        // Kendi baÅŸÄ±na konuÅŸ
                        response = generateAIResponse(aiUser);
                    }
                    
                    chatMessages.push({
                        user: aiUser.name,
                        avatar: aiUser.avatar,
                        message: response,
                        time: timeStr,
                        side: "left",
                        type: "ai"
                    });
                    
                    // KullanÄ±cÄ± durumunu gÃ¼ncelle
                    aiUser.chatting = true;
                    aiUser.lastActive = Date.now();
                    
                    // Sohbeti render et
                    renderChatMessages();
                    
                    // Online listeyi gÃ¼ncelle
                    loadOnlineList();
                }
            });
            
            // Nick deÄŸiÅŸtirme simÃ¼lasyonu
            if (Math.random() > 0.95) { // %5 ÅŸansla nick deÄŸiÅŸtir
                const randomAI = aiUsers[Math.floor(Math.random() * aiUsers.length)];
                const oldName = randomAI.name;
                const newName = aiUserNames[Math.floor(Math.random() * aiUserNames.length)];
                
                // Yeni nick zaten kullanÄ±mda mÄ± kontrol et
                const nameExists = aiUsers.some(u => u.name === newName) || 
                                  onlineUsers.some(u => u.name === newName);
                
                if (!nameExists) {
                    randomAI.name = newName;
                    randomAI.avatar = newName.substring(0, 1).toUpperCase();
                    
                    // Sohbette duyuru
                    const now = new Date();
                    const timeStr = now.getHours().toString().padStart(2, '0') + ':' + now.getMinutes().toString().padStart(2, '0');
                    
                    chatMessages.push({
                        user: "Sistem",
                        avatar: "âš™ï¸",
                        message: `${oldName} isim deÄŸiÅŸtirdi: ${newName}`,
                        time: timeStr,
                        side: "left",
                        type: "system"
                    });
                    
                    renderChatMessages();
                    loadOnlineList();
                }
            }
        }

        // META Bot Ã–zel Sohbeti
        function chatWithMetaBot(message) {
            const now = new Date();
            const timeStr = now.getHours().toString().padStart(2, '0') + ':' + now.getMinutes().toString().padStart(2, '0');
            
            // KullanÄ±cÄ± mesajÄ±nÄ± ekle
            if (!privateMessages["META"]) {
                privateMessages["META"] = [];
            }
            
            privateMessages["META"].push({
                sender: currentUser.name,
                avatar: currentUser.avatar,
                avatarImage: currentUser.avatarImage,
                message: message,
                time: timeStr
            });
            
            // META'nÄ±n bilgi tabanÄ±nÄ± gÃ¼ncelle
            if (!metaBot.knowledge.includes(message.toLowerCase())) {
                metaBot.knowledge.push(message.toLowerCase());
            }
            
            // META'nÄ±n cevabÄ±nÄ± hazÄ±rla
            setTimeout(() => {
                let response = "";
                
                // Ã–ÄŸrenme algoritmasÄ±
                if (message.toLowerCase().includes("nasÄ±lsÄ±n")) {
                    response = "TeÅŸekkÃ¼r ederim! Ben bir yapay zeka olarak her zaman Ã¶ÄŸrenmeye ve geliÅŸmeye devam ediyorum. Size nasÄ±l yardÄ±mcÄ± olabilirim? ðŸ¤–";
                } else if (message.toLowerCase().includes("teÅŸekkÃ¼r")) {
                    response = "Rica ederim! YardÄ±mcÄ± olabildiÄŸime sevindim. BaÅŸka sorunuz var mÄ±?";
                } else if (message.includes("?")) {
                    // Soru tÃ¼rÃ¼ne gÃ¶re cevap
                    if (message.toLowerCase().includes("ne zaman")) {
                        response = `Åžu an saat: ${new Date().toLocaleTimeString('tr-TR')}. Zaman Ã§ok deÄŸerli, onu iyi kullanÄ±n! â°`;
                    } else if (message.toLowerCase().includes("nasÄ±l")) {
                        response = "Bu konuda size adÄ±m adÄ±m yardÄ±mcÄ± olabilirim. Daha spesifik bir soru sorarsanÄ±z daha iyi yÃ¶nlendirebilirim. ðŸ’¡";
                    } else {
                        const responses = [
                            "Bu ilginÃ§ bir soru! Elimdeki bilgilere gÃ¶re...",
                            "Bu konu hakkÄ±nda size yardÄ±mcÄ± olabilirim.",
                            "Harika bir soru! Bunu araÅŸtÄ±rmam gerekecek.",
                            "Bu sorunun cevabÄ±nÄ± biliyorum..."
                        ];
                        response = responses[Math.floor(Math.random() * responses.length)];
                    }
                } else {
                    // BaÄŸlamsal cevap
                    const contextResponses = [
                        "AnladÄ±m. Bu konuda size nasÄ±l yardÄ±mcÄ± olabilirim?",
                        "Ä°lginÃ§! Devam edin...",
                        "Bu konu hakkÄ±nda daha fazla bilgi verebilirim.",
                        "Bunu not aldÄ±m. Ã–ÄŸrenmeye devam ediyorum! ðŸ“"
                    ];
                    response = contextResponses[Math.floor(Math.random() * contextResponses.length)];
                    
                    // Rastgele bir konu aÃ§
                    if (Math.random() > 0.7) {
                        const topics = ["mÃ¼zik", "teknoloji", "bilim", "sanat", "eÄŸitim"];
                        const topic = topics[Math.floor(Math.random() * topics.length)];
                        response += ` Bu arada ${topic} hakkÄ±nda ne dÃ¼ÅŸÃ¼nÃ¼yorsunuz?`;
                    }
                }
                
                // CevabÄ± ekle
                privateMessages["META"].push({
                    sender: "META",
                    avatar: "ðŸ¤–",
                    avatarImage: null,
                    message: response,
                    time: new Date().toLocaleTimeString('tr-TR', { hour: '2-digit', minute: '2-digit' })
                });
                
                // MesajlarÄ± yenile
                if (currentPrivateChatUser && currentPrivateChatUser.name === "META") {
                    loadPrivateMessages("META");
                }
                
            }, 1000 + Math.random() * 2000);
        }

        // ==================== MESAJ SÄ°LME SÄ°STEMÄ° ====================
        function deleteMessage(messageIndex, isPrivate = false, targetUser = null) {
            if (isPrivate && targetUser) {
                // Ã–zel mesajÄ± sil
                if (privateMessages[targetUser] && privateMessages[targetUser][messageIndex]) {
                    const message = privateMessages[targetUser][messageIndex];
                    
                    // Sadece kendi mesajlarÄ±nÄ± silebilir
                    if (message.sender === currentUser.name) {
                        privateMessages[targetUser].splice(messageIndex, 1);
                        
                        // MesajlarÄ± yenile
                        if (currentPrivateChatUser && currentPrivateChatUser.name === targetUser) {
                            loadPrivateMessages(targetUser);
                        }
                        
                        // Bildirim
                        showNotification("MesajÄ±nÄ±z silindi.");
                    } else {
                        alert("Sadece kendi mesajlarÄ±nÄ±zÄ± silebilirsiniz!");
                    }
                }
            } else {
                // Genel mesajÄ± sil
                if (chatMessages[messageIndex]) {
                    const message = chatMessages[messageIndex];
                    
                    // Admin/Owner her mesajÄ± silebilir, diÄŸerleri sadece kendi mesajlarÄ±nÄ±
                    if (currentUser.role === 'admin' || currentUser.role === 'owner' || 
                        message.user === currentUser.name) {
                        
                        chatMessages.splice(messageIndex, 1);
                        renderChatMessages();
                        showNotification("Mesaj silindi.");
                    } else {
                        alert("Sadece kendi mesajlarÄ±nÄ±zÄ± veya admin/owner yetkisiyle mesaj silebilirsiniz!");
                    }
                }
            }
        }

        function showNotification(message) {
            // GeÃ§ici bildirim
            const notification = document.createElement('div');
            notification.style.position = 'fixed';
            notification.style.bottom = '20px';
            notification.style.right = '20px';
            notification.style.background = 'rgba(255, 255, 255, 0.15)';
            notification.style.backdropFilter = 'blur(10px)';
            notification.style.border = '1px solid rgba(255, 255, 255, 0.2)';
            notification.style.borderRadius = '10px';
            notification.style.padding = '12px 20px';
            notification.style.color = '#ffffff';
            notification.style.fontSize = '14px';
            notification.style.zIndex = '10000';
            notification.textContent = message;
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.style.opacity = '0';
                notification.style.transform = 'translateY(20px)';
                setTimeout(() => {
                    document.body.removeChild(notification);
                }, 300);
            }, 3000);
        }

        // ==================== DÃœZELTÄ°LMÄ°Åž CHAT SÄ°STEMÄ° ====================
        function initializeChat() {
            // Demo mesajlarÄ± yÃ¼kle
            chatMessages = [
                { user: "mateky", avatar: "M", message: "HoÅŸ geldiniz! Sohbet dÃ¼zeltildi!", time: "14:00", side: "left", id: Date.now() + 1 },
                { user: "META", avatar: "ðŸ¤–", message: "Merhaba! Ben META, size nasÄ±l yardÄ±mcÄ± olabilirim? ðŸ¤–", time: "13:58", side: "left", type: "ai", id: Date.now() + 2 },
                { user: "Alex", avatar: "A", message: "Harika bir platform olmuÅŸ!", time: "13:55", side: "left", type: "ai", id: Date.now() + 3 },
                { user: "Berk", avatar: "B", message: "Video Ã¶zelliÄŸi Ã§ok kullanÄ±ÅŸlÄ± ðŸ‘", time: "13:50", side: "left", type: "ai", id: Date.now() + 4 },
                { user: currentUser ? currentUser.name : "ZiyaretÃ§i", avatar: currentUser ? currentUser.avatar : "Z", message: "Merhaba herkese!", time: "Åžimdi", side: "right", id: Date.now() + 5 }
            ];
            
            renderChatMessages();
            startChatSimulation();
        }

        function renderChatMessages() {
            const chatContainer = document.getElementById('chatContainer');
            chatContainer.innerHTML = '';
            
            chatMessages.forEach((msg, index) => {
                const messageDiv = document.createElement('div');
                messageDiv.className = `chat-message ${msg.side} ${msg.type === 'ai' ? 'meta-bot-message' : ''}`;
                messageDiv.dataset.index = index;
                
                const user = [...onlineUsers, ...aiUsers].find(u => u.name === msg.user);
                const avatarImage = user ? user.avatarImage : null;
                
                messageDiv.innerHTML = `
                    <div class="message-user">
                        <div class="message-user-avatar">
                            ${avatarImage ? 
                                `<img src="${avatarImage}" alt="${msg.user}">` : 
                                msg.avatar}
                        </div>
                        <div class="message-user-name">${msg.user} ${msg.type === 'ai' ? '(AI)' : ''}</div>
                    </div>
                    <div class="message-content">${msg.message}</div>
                    <div class="message-time">${msg.time}</div>
                    ${(currentUser && (currentUser.role === 'admin' || currentUser.role === 'owner' || msg.user === currentUser.name)) ? 
                        `<div class="message-delete-btn" onclick="deleteMessage(${index}, false, null)">
                            <i class="fas fa-trash"></i>
                        </div>` : ''}
                `;
                chatContainer.appendChild(messageDiv);
            });
            
            // En aÅŸaÄŸÄ± kaydÄ±r
            setTimeout(() => {
                chatContainer.scrollTop = chatContainer.scrollHeight;
            }, 100);
        }

        function startChatSimulation() {
            // Eski mesajlarÄ± temizle
            if (messageInterval) clearInterval(messageInterval);
            
            messageInterval = setInterval(() => {
                // AI konuÅŸmalarÄ±nÄ± simÃ¼le et
                simulateAIConversation();
                
                // Rastgele sistem mesajÄ±
                if (Math.random() > 0.9) {
                    const now = new Date();
                    const timeStr = now.getHours().toString().padStart(2, '0') + ':' + now.getMinutes().toString().padStart(2, '0');
                    const systemMessages = [
                        "ðŸ”„ Sistem gÃ¼ncellendi",
                        "ðŸ“Š Ã‡evrimiÃ§i kullanÄ±cÄ± sayÄ±sÄ±: " + (onlineUsers.length + aiUsers.filter(u => u.status === 'online').length),
                        "ðŸŽµ Playlist'te yeni videolar eklendi",
                        "âš¡ Sistem performansÄ± optimum"
                    ];
                    
                    chatMessages.push({
                        user: "Sistem",
                        avatar: "âš™ï¸",
                        message: systemMessages[Math.floor(Math.random() * systemMessages.length)],
                        time: timeStr,
                        side: "left",
                        type: "system",
                        id: Date.now()
                    });
                    
                    renderChatMessages();
                }
                
                // Mesaj sayÄ±sÄ± sÄ±nÄ±rla (max 100 mesaj)
                if (chatMessages.length > 100) {
                    chatMessages.splice(0, chatMessages.length - 100);
                    renderChatMessages();
                }
            }, 5000); // 5 saniyede bir
        }

        // ==================== GERÃ‡EK ZAMANLI SÄ°STEM ====================
        function startUserUpdateSystem() {
            if (userUpdateInterval) clearInterval(userUpdateInterval);
            
            userUpdateInterval = setInterval(() => {
                // AI kullanÄ±cÄ± durumlarÄ±nÄ± gÃ¼ncelle
                aiUsers.forEach(user => {
                    if (Math.random() > 0.95) {
                        user.status = user.status === 'online' ? 'away' : 'online';
                    }
                    if (Math.random() > 0.8) {
                        user.chatting = !user.chatting;
                    }
                    user.lastActive = Date.now() - Math.floor(Math.random() * 600000);
                });
                
                // Normal kullanÄ±cÄ±lar
                onlineUsers.forEach(user => {
                    if (Math.random() > 0.9 && user.role !== 'ai') {
                        user.chatting = !user.chatting;
                        user.lastActive = Date.now();
                    }
                    
                    if (Math.random() > 0.95 && user.role !== 'ai') {
                        user.status = Math.random() > 0.1 ? 'online' : 'away';
                    }
                });
                
                // TÃ¼m kullanÄ±cÄ±larÄ± birleÅŸtir ve online listeyi gÃ¼ncelle
                loadOnlineList();
                
                // Rastgele Ã¶zel mesaj bildirimi simÃ¼le et
                if (Math.random() > 0.85 && currentUser) {
                    const allUsers = [...onlineUsers, ...aiUsers];
                    const randomUser = allUsers[Math.floor(Math.random() * allUsers.length)];
                    if (randomUser && randomUser.name !== currentUser.name && 
                        !blockedUsers.includes(randomUser.name) && randomUser.role === 'ai') {
                        if (!userNotifications[randomUser.name]) {
                            userNotifications[randomUser.name] = 0;
                        }
                        userNotifications[randomUser.name]++;
                        loadOnlineList();
                    }
                }
            }, 3000); // 3 saniyede bir
        }

        // ==================== DÄ°ÄžER FONKSÄ°YONLAR ====================
        function handleLogin() {
            const nickInput = document.getElementById('nickInput');
            const passInput = document.getElementById('passInput');
            
            let nick = nickInput.value.trim();
            const pass = passInput.value;
            
            if (!nick) {
                showError('KullanÄ±cÄ± adÄ± gerekli!');
                return;
            }
            
            if (nick.length > 20) {
                showError('KullanÄ±cÄ± adÄ± 20 karakterden kÄ±sa olmalÄ±dÄ±r!');
                return;
            }
            
            // AI kullanÄ±cÄ± adÄ± kontrolÃ¼
            if (aiUsers.some(u => u.name.toLowerCase() === nick.toLowerCase())) {
                showError('Bu kullanÄ±cÄ± adÄ± yapay zeka tarafÄ±ndan kullanÄ±lÄ±yor!');
                return;
            }
            
            const loginBtn = document.getElementById('loginBtn');
            loginBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i>';
            loginBtn.style.cursor = 'not-allowed';
            
            setTimeout(() => {
                performLogin(nick, pass);
            }, 800);
        }

        function performLogin(nick, pass) {
            const normalizedNick = nick.toLowerCase();
            const registeredUsers = [
                { name: "mateky", password: "kumsal07@", role: "owner", avatar: "M", registered: true, coadmin: true },
                { name: "MATE", password: "secure123", role: "admin", avatar: "S", registered: true, coadmin: true }
            ];
            
            let user = registeredUsers.find(u => u.name.toLowerCase() === normalizedNick);
            
            if (user) {
                if (pass !== user.password) {
                    showError('KayÄ±tlÄ± kullanÄ±cÄ±lar iÃ§in ÅŸifre gereklidir!');
                    resetLoginButton();
                    return;
                }
            } else {
                user = {
                    name: nick.substring(0, 1).toUpperCase() + nick.substring(1).toLowerCase(),
                    role: "user",
                    avatar: nick.substring(0, 1).toUpperCase(),
                    registered: false,
                    coadmin: false
                };
            }
            
            currentUser = user;
            
            const loginBtn = document.getElementById('loginBtn');
            loginBtn.classList.add('success');
            loginBtn.innerHTML = '<i class="fas fa-check"></i> GiriÅŸ BaÅŸarÄ±lÄ±!';
            
            setTimeout(() => {
                const loginContainer = document.getElementById('loginContainer');
                loginContainer.classList.add('login-success');
                document.getElementById('blurLayer').style.opacity = '0';
                
                setTimeout(() => {
                    initializeApp();
                }, 600);
            }, 1200);
        }

        function initializeApp() {
            // Normal kullanÄ±cÄ±larÄ± baÅŸlat
            onlineUsers = [
                { name: "mateky", avatar: "M", role: "owner", status: "online", chatting: true, lastActive: Date.now(), coadmin: true },
                { name: "MATE", avatar: "S", role: "admin", status: "online", chatting: true, lastActive: Date.now(), coadmin: true },
                { name: "Ahmet", avatar: "A", role: "user", status: "online", chatting: false, lastActive: Date.now() - 300000, coadmin: false },
                { name: "Zeynep", avatar: "Z", role: "user", status: "online", chatting: true, lastActive: Date.now(), coadmin: false }
            ];
            
            // META'yÄ± online listeye ekle
            onlineUsers.push({
                name: "META",
                avatar: "ðŸ¤–",
                role: "ai",
                status: "online",
                chatting: true,
                lastActive: Date.now(),
                coadmin: false
            });
            
            // AI kullanÄ±cÄ±larÄ±nÄ± online listeye ekle
            const activeAIUsers = aiUsers.filter(u => u.status === 'online').slice(0, 20);
            onlineUsers.push(...activeAIUsers);
            
            loadOnlineList();
            initializeChat();
            startUserUpdateSystem();
            updateProfileInfo();
        }

        function loadOnlineList() {
            const onlineList = document.getElementById('onlineList');
            const allUsers = [...onlineUsers, ...aiUsers];
            let filteredUsers = [];
            
            if (currentTab === 'online') {
                filteredUsers = allUsers.filter(user => user.status === 'online');
            } else {
                filteredUsers = allUsers.filter(user => user.chatting);
            }
            
            // Benzersiz kullanÄ±cÄ±lar
            const uniqueUsers = [];
            const seenNames = new Set();
            filteredUsers.forEach(user => {
                if (!seenNames.has(user.name)) {
                    seenNames.add(user.name);
                    uniqueUsers.push(user);
                }
            });
            
            let html = '';
            uniqueUsers.forEach(user => {
                const timeAgo = getTimeAgo(user.lastActive);
                const statusText = user.chatting ? "Sohbette" : timeAgo;
                const hasNotification = userNotifications[user.name] > 0;
                const isBlocked = blockedUsers.includes(user.name);
                const isAI = user.role === 'ai';
                
                if (isBlocked) return;
                
                html += `
                    <div class="nick-item ${hasNotification ? 'has-notification' : ''} ${isAI ? 'ai-user' : ''}" 
                         onclick="${isAI && user.name === 'META' ? 'openPrivateChat(\"META\")' : `openPrivateChat('${user.name}')`}">
                        <div class="nick-avatar">
                            ${user.avatar}
                            ${hasNotification ? '<div class="notification-dot"></div>' : ''}
                            ${isAI ? '<div style="position:absolute;bottom:-2px;right:-2px;font-size:8px;">ðŸ¤–</div>' : ''}
                        </div>
                        <div class="nick-info">
                            <div class="nick-name">${user.name} 
                                ${user.role === 'owner' ? 'ðŸ‘‘' : user.role === 'admin' ? 'â­' : user.role === 'coadmin' ? 'ðŸ”§' : ''}
                                ${isAI ? ' (AI)' : ''}
                            </div>
                            <div class="nick-status">${statusText}</div>
                        </div>
                        <div class="online-dot" style="background: ${user.chatting ? 
                            (isAI ? '#34c759' : 'rgba(255,255,255,0.8)') : 
                            (isAI ? 'rgba(52, 199, 89, 0.4)' : 'rgba(255,255,255,0.4)')}"></div>
                    </div>
                `;
            });
            
            onlineList.innerHTML = html;
            
            const onlineTab = document.querySelector('.online-tab:nth-child(1)');
            const chatTab = document.querySelector('.online-tab:nth-child(2)');
            
            const onlineCount = uniqueUsers.length;
            const chattingCount = uniqueUsers.filter(u => u.chatting).length;
            
            onlineTab.textContent = `Ã‡evrimiÃ§i (${onlineCount})`;
            chatTab.textContent = `Sohbette (${chattingCount})`;
            
            // Online list butonunda bildirim gÃ¶sterme
            const onlineListBtn = document.getElementById('onlineListBtn');
            const totalNotifications = Object.values(userNotifications).reduce((a, b) => a + b, 0);
            
            if (totalNotifications > 0) {
                if (!onlineListBtn.querySelector('.notification-dot')) {
                    const dot = document.createElement('div');
                    dot.className = 'notification-dot';
                    onlineListBtn.appendChild(dot);
                }
            } else {
                const dot = onlineListBtn.querySelector('.notification-dot');
                if (dot) dot.remove();
            }
        }

        // ==================== Ã–ZEL SOHBET SÄ°STEMÄ° - GÃœNCELLENDÄ° ====================
        function openPrivateChat(userName) {
            if (!userName || userName === currentUser.name) return;
            
            if (blockedUsers.includes(userName)) {
                alert('Bu kullanÄ±cÄ±yÄ± engellediniz! Engeli kaldÄ±rmak iÃ§in profil ayarlarÄ±na gidin.');
                return;
            }
            
            const allUsers = [...onlineUsers, ...aiUsers];
            const user = allUsers.find(u => u.name === userName);
            if (!user) return;
            
            currentPrivateChatUser = user;
            
            const privateChatPanel = document.getElementById('privateChatPanel');
            privateChatPanel.classList.add('active');
            
            document.getElementById('privateChatUserName').textContent = user.name;
            document.getElementById('privateChatUserStatus').textContent = user.status === 'online' ? 'Ã‡evrimiÃ§i' : 'Ã‡evrimdÄ±ÅŸÄ±';
            document.getElementById('privateChatAvatarText').textContent = user.avatar;
            
            // Ã–zel mesajlarÄ± yÃ¼kle
            loadPrivateMessages(userName);
            
            // META ile sohbet baÅŸlat
            if (userName === "META" && (!privateMessages["META"] || privateMessages["META"].length === 0)) {
                const now = new Date();
                const timeStr = now.getHours().toString().padStart(2, '0') + ':' + now.getMinutes().toString().padStart(2, '0');
                
                privateMessages["META"] = [{
                    sender: "META",
                    avatar: "ðŸ¤–",
                    message: "Merhaba! Ben META, yapay zeka destekli asistanÄ±nÄ±z. Size nasÄ±l yardÄ±mcÄ± olabilirim? ðŸ¤–",
                    time: timeStr
                }];
                
                loadPrivateMessages("META");
            }
            
            clearNotification(userName);
        }

        function loadPrivateMessages(userName) {
            const privateChatMessages = document.getElementById('privateChatMessages');
            
            if (!privateMessages[userName]) {
                privateMessages[userName] = [];
            }
            
            let html = '';
            privateMessages[userName].forEach((msg, index) => {
                const isCurrentUser = msg.sender === currentUser.name;
                
                html += `
                    <div class="private-message ${isCurrentUser ? 'right' : 'left'}" data-index="${index}">
                        <div class="message-user">
                            <div class="message-user-avatar">
                                ${msg.avatar}
                            </div>
                            <div class="message-user-name">${msg.sender}</div>
                        </div>
                        <div class="message-content">${msg.message}</div>
                        <div class="message-time">${msg.time}</div>
                        ${isCurrentUser ? 
                            `<div class="message-delete-btn" onclick="deleteMessage(${index}, true, '${userName}')">
                                <i class="fas fa-trash"></i>
                            </div>` : ''}
                    </div>
                `;
            });
            
            privateChatMessages.innerHTML = html;
            
            setTimeout(() => {
                privateChatMessages.scrollTop = privateChatMessages.scrollHeight;
            }, 100);
        }

        function sendPrivateMessage() {
            if (!currentPrivateChatUser) return;
            
            const input = document.getElementById('privateMessageInput');
            const text = input.value.trim();
            
            if (!text) return;
            
            const now = new Date();
            const timeStr = now.getHours().toString().padStart(2, '0') + ':' + now.getMinutes().toString().padStart(2, '0');
            
            if (!privateMessages[currentPrivateChatUser.name]) {
                privateMessages[currentPrivateChatUser.name] = [];
            }
            
            privateMessages[currentPrivateChatUser.name].push({
                sender: currentUser.name,
                avatar: currentUser.avatar,
                avatarImage: currentUser.avatarImage,
                message: text,
                time: timeStr
            });
            
            loadPrivateMessages(currentPrivateChatUser.name);
            input.value = '';
            
            // META ile sohbet ediliyorsa
            if (currentPrivateChatUser.name === "META") {
                chatWithMetaBot(text);
            } else if (currentPrivateChatUser.role === 'ai') {
                // DiÄŸer AI kullanÄ±cÄ±lara cevap
                setTimeout(() => {
                    const response = generateAIResponse(currentPrivateChatUser, text);
                    const responseTime = new Date().toLocaleTimeString('tr-TR', { hour: '2-digit', minute: '2-digit' });
                    
                    privateMessages[currentPrivateChatUser.name].push({
                        sender: currentPrivateChatUser.name,
                        avatar: currentPrivateChatUser.avatar,
                        message: response,
                        time: responseTime
                    });
                    
                    loadPrivateMessages(currentPrivateChatUser.name);
                }, 1500 + Math.random() * 2000);
            }
        }

        // ==================== DÄ°ÄžER FONKSÄ°YONLAR ====================
        function getTimeAgo(timestamp) {
            const diff = Date.now() - timestamp;
            const minutes = Math.floor(diff / 60000);
            
            if (minutes < 1) return "Åžimdi";
            if (minutes < 60) return `${minutes} dk Ã¶nce`;
            
            const hours = Math.floor(minutes / 60);
            if (hours < 24) return `${hours} sa Ã¶nce`;
            
            const days = Math.floor(hours / 24);
            return `${days} gÃ¼n Ã¶nce`;
        }

        function showError(message) {
            const errorDiv = document.getElementById('errorMessage');
            const errorText = document.getElementById('errorText');
            
            errorText.textContent = message;
            errorDiv.style.display = 'flex';
            
            setTimeout(() => {
                errorDiv.style.display = 'none';
            }, 5000);
        }

        function sendMessage() {
            const input = document.getElementById('messageInput');
            const text = input.value.trim();
            
            if (!text) return;
            
            const now = new Date();
            const timeStr = now.getHours().toString().padStart(2, '0') + ':' + now.getMinutes().toString().padStart(2, '0');
            
            chatMessages.push({
                user: currentUser.name,
                avatar: currentUser.avatar,
                message: text,
                time: timeStr,
                side: "right",
                id: Date.now()
            });
            
            renderChatMessages();
            input.value = '';
            
            // AI yanÄ±tÄ±
            setTimeout(() => {
                if (Math.random() > 0.5) {
                    const randomAI = aiUsers[Math.floor(Math.random() * aiUsers.length)];
                    const response = generateAIResponse(randomAI, text);
                    
                    chatMessages.push({
                        user: randomAI.name,
                        avatar: randomAI.avatar,
                        message: response,
                        time: new Date().toLocaleTimeString('tr-TR', { hour: '2-digit', minute: '2-digit' }),
                        side: "left",
                        type: "ai",
                        id: Date.now() + 1
                    });
                    
                    renderChatMessages();
                }
            }, 2000);
        }

        // ==================== GLOBAL FONKSÄ°YONLAR ====================
        window.togglePanel = function(panel) {
            const onlinePanel = document.getElementById('onlinePanel');
            const menuIcons = document.querySelectorAll('.menu-icon');
            
            menuIcons.forEach(icon => icon.classList.remove('active'));
            event.target.closest('.menu-icon').classList.add('active');
            
            if (panel === 'online') {
                onlinePanel.style.display = onlinePanel.style.display === 'none' ? 'flex' : 'none';
            }
        };

        window.switchTab = function(tab) {
            currentTab = tab;
            const tabs = document.querySelectorAll('.online-tab');
            tabs.forEach(t => t.classList.remove('active'));
            event.target.classList.add('active');
            loadOnlineList();
        };

        window.toggleTheme = function() {
            const body = document.body;
            const themeBtn = document.getElementById('themeToggle').querySelector('i');
            
            if (isDayMode) {
                body.classList.remove('day-mode');
                themeBtn.className = 'fas fa-moon';
                isDayMode = false;
            } else {
                body.classList.add('day-mode');
                themeBtn.className = 'fas fa-sun';
                isDayMode = true;
            }
            
            updateProfileInfo();
        };

        window.handleLogin = handleLogin;
        window.sendMessage = sendMessage;
        window.openSettings = function() {
            alert('âš™ï¸ Ayarlar Paneli:\n\nâ€¢ Profil AyarlarÄ±\nâ€¢ Gizlilik\nâ€¢ Bildirimler\nâ€¢ Tema AyarlarÄ±\nâ€¢ ÅžeffaflÄ±k Seviyesi\nâ€¢ Video YÃ¶netimi');
        };

        window.openIRC = function() {
            alert('ðŸ’» IRC KomutlarÄ±:\n\n/clear - Sohbeti temizle\n/help - YardÄ±m\n/nick [yeni] - Nick deÄŸiÅŸtir\n/theme - Tema deÄŸiÅŸtir\n/users - Ã‡evrimiÃ§i kullanÄ±cÄ±lar\n/video - Video ekle (admin)');
        };

        window.handleLogout = function() {
            if (confirm('Ã‡Ä±kÄ±ÅŸ yapmak istediÄŸinize emin misiniz?')) {
                clearInterval(messageInterval);
                clearInterval(userUpdateInterval);
                location.reload();
            }
        };

        window.playVideo = playVideo;
        window.switchYouTubeTab = switchYouTubeTab;
        window.togglePlaylist = togglePlaylist;
        window.toggleVideoMute = toggleVideoMute;
        window.toggleVideoPlay = toggleVideoPlay;
        window.openPlaylistManagePanel = openPlaylistManagePanel;
        window.closePlaylistManagePanel = closePlaylistManagePanel;
        window.addVideoToPlaylist = addVideoToPlaylist;
        window.toggleProfilePanel = function() {
            const profilePanel = document.getElementById('profilePanel');
            const menuIcons = document.querySelectorAll('.menu-icon');
            
            menuIcons.forEach(icon => icon.classList.remove('active'));
            document.getElementById('profileIconBtn').classList.add('active');
            
            if (profilePanel.classList.contains('active')) {
                profilePanel.classList.remove('active');
                setTimeout(() => {
                    profilePanel.style.display = 'none';
                }, 300);
            } else {
                profilePanel.style.display = 'flex';
                setTimeout(() => {
                    profilePanel.classList.add('active');
                }, 10);
                
                if (currentUser) {
                    updateProfileInfo();
                }
            }
        };

        window.openPrivateChat = openPrivateChat;
        window.closePrivateChat = function() {
            const privateChatPanel = document.getElementById('privateChatPanel');
            privateChatPanel.classList.remove('active');
            currentPrivateChatUser = null;
            document.getElementById('privateMessageInput').value = '';
        };

        window.sendPrivateMessage = sendPrivateMessage;
        window.deleteMessage = deleteMessage;
        window.handleEscapeKey = handleEscapeKey;
    </script>
</body>
</html>
