<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Popbox Elite</title>
    <style>
        :root {
            --bg: #ffffff;
            --bg-dark: #0f1115;
            --text: #000000;
            --text-dark: #e0e0e0;
            --primary: #1890ff;
            --primary-hover: #40a9ff;
            --danger: #ff4d4f;
            --gray: #f0f0f0;
            --gray-dark: #1f2229;
            --border: #ddd;
            --border-dark: #2a2e35;
            --blur-bg: rgba(255,255,255,0.6);
            --blur-bg-dark: rgba(15,17,21,0.7);
        }
        body { margin:0; font-family:system-ui, sans-serif; background:var(--bg); color:var(--text); height:100vh; overflow:hidden; transition:background 0.5s, color 0.5s; }
        body.dark { background:var(--bg-dark); color:var(--text-dark); }
        .login-screen {
            position:fixed; inset:0; z-index:9999;
            background: linear-gradient(135deg, #e6f7ff, #ffffff);
            display:flex; align-items:center; justify-content:center;
            backdrop-filter: blur(8px);
            -webkit-backdrop-filter: blur(8px);
            transition:backdrop-filter 0.5s;
        }
        body.dark .login-screen {
            background: linear-gradient(135deg, #0a0c10, #11141a);
        }
        .login-box {
            background: var(--blur-bg);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border:1px solid rgba(255,255,255,0.2);
            border-radius:20px;
            padding:40px;
            width:360px;
            text-align:center;
            box-shadow:0 15px 50px rgba(0,0,0,0.25);
            transition:background 0.5s;
        }
        body.dark .login-box {
            background: var(--blur-bg-dark);
            border-color:rgba(255,255,255,0.1);
        }
        input {
            width:100%; padding:14px; margin:14px 0; border:1px solid var(--border);
            border-radius:10px; font-size:16px; background:rgba(255,255,255,0.4);
            transition:0.3s;
        }
        body.dark input {
            background:rgba(30,35,45,0.5); color:#eee; border-color:#444;
        }
        button {
            width:100%; padding:14px; background:var(--primary); color:white;
            border:none; border-radius:10px; font-size:16px; cursor:pointer;
            transition:0.3s;
        }
        button:hover { background:var(--primary-hover); transform:scale(1.02); }
        .error { color:var(--danger); margin-top:12px; min-height:20px; font-size:14px; }
        .app { display:none; height:100vh; flex-direction:column; }
        .header { height:60px; background:#f8f9fa; border-bottom:1px solid var(--border); padding:0 20px; display:flex; align-items:center; justify-content:space-between; }
        body.dark .header { background:#11141a; border-color:var(--border-dark); }
        .chat-area { flex:1; display:flex; overflow:hidden; }
        .messages { flex:1; padding:20px; overflow-y:auto; }
        .input-area { padding:12px 20px; border-top:1px solid var(--border); background:#f8f9fa; display:flex; gap:12px; }
        body.dark .input-area { background:#11141a; border-color:var(--border-dark); }
        textarea { flex:1; padding:12px; border:1px solid var(--border); border-radius:10px; resize:none; font-size:15px; background:rgba(255,255,255,0.5); }
        body.dark textarea { background:rgba(30,35,45,0.6); color:#eee; border-color:#444; }
        .send-btn { padding:12px 20px; background:var(--primary); color:white; border:none; border-radius:10px; cursor:pointer; }
        .users-sidebar { width:220px; background:#f8f9fa; border-left:1px solid var(--border); padding:20px; overflow-y:auto; }
        body.dark .users-sidebar { background:#0c0e12; border-color:var(--border-dark); }
        .user-item { padding:12px; cursor:pointer; border-radius:10px; margin-bottom:8px; transition:0.2s; }
        .user-item:hover { background:var(--gray); transform:translateX(4px); }
        body.dark .user-item:hover { background:#1f2229; }
        .private-overlay { position:fixed; inset:0; background:rgba(0,0,0,0.65); display:none; justify-content:flex-end; z-index:2000; backdrop-filter:blur(6px); }
        .private-overlay.active { display:flex; }
        .private-window { width:55%; min-width:520px; height:100%; background:var(--bg); border-left:1px solid var(--border); display:flex; flex-direction:column; box-shadow:-12px 0 40px rgba(0,0,0,0.4); }
        body.dark .private-window { background:var(--bg-dark); border-color:var(--border-dark); }
        .private-header { padding:16px 20px; background:var(--primary); color:white; display:flex; justify-content:space-between; align-items:center; }
        .private-messages { flex:1; padding:20px; overflow-y:auto; }
        .private-input-area { padding:12px 20px; border-top:1px solid var(--border); display:flex; gap:12px; background:var(--gray); }
        body.dark .private-input-area { background:#11141a; border-color:var(--border-dark); }
        .close-btn { background:none; border:none; color:white; font-size:28px; cursor:pointer; }
        .info-text { font-size:14px; color:#555; margin-top:20px; }
        body.dark .info-text { color:#aaa; }
    </style>
</head>
<body>

<!-- Giri≈ü Ekranƒ± (≈ûeffaf + Samimi) -->
<div id="loginScreen" class="login-screen">
    <div class="login-box">
        <h2>Popbox Elite</h2>
        <p style="margin:8px 0 20px; font-size:15px;">Burada ne var lan? Nick yaz da gir bakalƒ±m!</p>
        
        <input id="nickInput" type="text" placeholder="Nick yaz..." autofocus>
        <input id="passInput" type="password" placeholder="≈ûifre? (gerek yoksa bo≈ü bƒ±rak)">
        
        <button onclick="handleLogin()">Giri≈ü Yap</button>
        
        <div class="error" id="errorMsg"></div>
        
        <p class="info-text">Normal kullanƒ±cƒ±lar ≈üifre girmesin, sadece nick yeter. Yetkiliysen ≈üifreyi biliyorsundur zaten üòâ</p>
    </div>
</div>

<!-- Ana Uygulama -->
<div id="app" class="app">
    <div class="header">
        <div>Genel Sohbet</div>
        <div>
            <button onclick="document.body.classList.toggle('dark')">Gece/G√ºnd√ºz</button>
            <button onclick="openProfile()">Profil</button>
        </div>
    </div>
    
    <div class="chat-area">
        <div class="messages" id="messages">
            <p id="welcome">Ho≈ü geldin! Burasƒ± Popbox Elite ‚Äì mesaj yazmaya ba≈üla...</p>
        </div>
        
        <div class="input-area">
            <textarea id="msgInput" placeholder="Mesaj yaz..."></textarea>
            <button class="send-btn" onclick="sendMessage()">G√∂nder</button>
        </div>
    </div>
    
    <div class="users-sidebar">
        <h4>√áevrimi√ßi</h4>
        <div id="userList"></div>
    </div>
</div>

<!-- √ñzel Sohbet Penceresi -->
<div id="privateOverlay" class="private-overlay">
    <div class="private-window">
        <div class="private-header">
            <div style="display:flex; align-items:center; gap:16px;">
                <button class="close-btn" onclick="closePrivate()">‚Üê</button>
                <span id="privateTitle">√ñzel Sohbet</span>
            </div>
            <div>
                <button style="background:rgba(255,255,255,0.25); border:none; color:white; padding:8px 14px; border-radius:8px; margin-right:10px;" onclick="alert('≈ûikayet g√∂nderildi')">≈ûikayet Et</button>
                <button style="background:var(--danger); color:white; border:none; padding:8px 14px; border-radius:8px;" onclick="alert('Engellendi')">Engelle</button>
            </div>
        </div>
        <div class="private-messages" id="privateMessages">
            <p>Sohbet ba≈üladƒ±...</p>
        </div>
        <div class="private-input-area">
            <textarea id="privateInput" placeholder="Mesaj yaz..."></textarea>
            <button class="send-btn" onclick="sendPrivateMsg()">G√∂nder</button>
        </div>
    </div>
</div>

<script>
// Deƒüi≈ükenler
let currentUser = null;
let activePrivate = null;

// Hata g√∂ster
function showError(msg) {
    document.getElementById('errorMsg').textContent = msg;
}

// Giri≈ü i≈ülemi
function handleLogin() {
    const nick = document.getElementById('nickInput').value.trim();
    const pass = document.getElementById('passInput').value;
    
    showError('');
    
    if (!nick) return showError('Nick yaz lan!');
    
    let role = 'user';
    if (nick.toLowerCase() === 'mateky' && pass === 'kumsal07@') {
        role = 'owner';
    } else if (pass) {
        return showError('≈ûifre yanlƒ±≈ü veya gerek yok!');
    }
    
    currentUser = { nick, role };
    
    document.getElementById('loginScreen').style.display = 'none';
    document.getElementById('app').style.display = 'flex';
    
    document.getElementById('welcome').innerHTML = `Ho≈ü geldin <strong>${nick}</strong>! (Rol: ${role})<br>Burada ne yapalƒ±m, yaz bakalƒ±m...`;
    
    updateUserList();
}

// Kullanƒ±cƒ± listesini g√ºncelle
function updateUserList() {
    const list = document.getElementById('userList');
    list.innerHTML = '';
    
    // √ñrnek + mevcut kullanƒ±cƒ±
    ['Ahmet', 'Ay≈üe', 'Mehmet', 'Elif', currentUser.nick].forEach(name => {
        const div = document.createElement('div');
        div.className = 'user-item';
        div.textContent = name + (name === currentUser.nick ? ' (sen)' : '');
        div.onclick = () => openPrivateChat(name);
        list.appendChild(div);
    });
}

// Genel mesaj g√∂nderme
function sendMessage() {
    const input = document.getElementById('msgInput');
    if (!input.value.trim()) return;
    
    const msg = document.createElement('p');
    msg.innerHTML = `<strong>${currentUser.nick}:</strong> ${input.value}`;
    document.getElementById('messages').appendChild(msg);
    document.getElementById('messages').scrollTop = document.getElementById('messages').scrollHeight;
    input.value = '';
}

// √ñzel sohbet a√ß
function openPrivateChat(nick) {
    activePrivate = nick;
    document.getElementById('privateTitle').textContent = nick + ' ile √∂zel sohbet';
    document.getElementById('privateMessages').innerHTML = `<p>Sohbet ba≈üladƒ±: ${nick}</p>`;
    document.getElementById('privateOverlay').classList.add('active');
    
    document.addEventListener('keydown', escClose);
}

// √ñzel sohbet kapat
function closePrivate() {
    document.getElementById('privateOverlay').classList.remove('active');
    document.removeEventListener('keydown', escClose);
    activePrivate = null;
}

function escClose(e) {
    if (e.key === 'Escape') closePrivate();
}

// √ñzel mesaj g√∂nderme
function sendPrivateMsg() {
    const input = document.getElementById('privateInput');
    if (!input.value.trim()) return;
    
    const msg = document.createElement('p');
    msg.innerHTML = `<strong>Sen:</strong> ${input.value}`;
    document.getElementById('privateMessages').appendChild(msg);
    document.getElementById('privateMessages').scrollTop = document.getElementById('privateMessages').scrollHeight;
    input.value = '';
}

// Enter desteƒüi
document.getElementById('nickInput').addEventListener('keypress', e => { if (e.key === 'Enter') handleLogin(); });
document.getElementById('passInput').addEventListener('keypress', e => { if (e.key === 'Enter') handleLogin(); });
document.getElementById('msgInput').addEventListener('keypress', e => {
    if (e.key === 'Enter' && !e.shiftKey) {
        e.preventDefault();
        sendMessage();
    }
});
document.getElementById('privateInput').addEventListener('keypress', e => {
    if (e.key === 'Enter' && !e.shiftKey) {
        e.preventDefault();
        sendPrivateMsg();
    }
});

// Profil placeholder
function openProfile() {
    alert(`Profil: ${currentUser.nick} (${currentUser.role})\n\nYakƒ±nda burasƒ± dolacak!`);
}
</script>
</body>
</html>
