<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Popbox Elite - Minimal Chat</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        /* TEMEL SIFIRLAMA */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: #000000;
            color: #ffffff;
            height: 100vh;
            overflow: hidden;
            position: relative;
            transition: background-color 0.5s ease, color 0.5s ease;
        }

        body.day-mode {
            background: #ffffff;
            color: #000000;
        }

        .hidden {
            display: none !important;
        }

        /* YOUTUBE VİDEO PANELİ */
        .youtube-panel {
            position: fixed;
            top: 50%;
            right: 30px;
            transform: translateY(-50%);
            width: 420px;
            height: 680px;
            z-index: 10;
            border-radius: 20px;
            overflow: hidden;
            box-shadow: 
                0 25px 50px rgba(0, 0, 0, 0.5),
                inset 0 0 0 1px rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            background: rgba(0, 0, 0, 0.75);
            border: 1px solid rgba(255, 255, 255, 0.15);
        }

        .day-mode .youtube-panel {
            background: rgba(255, 255, 255, 0.75);
            border: 1px solid rgba(0, 0, 0, 0.15);
            box-shadow: 
                0 25px 50px rgba(0, 0, 0, 0.1),
                inset 0 0 0 1px rgba(0, 0, 0, 0.1);
        }

        .youtube-header {
            padding: 20px;
            background: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .day-mode .youtube-header {
            background: rgba(255, 255, 255, 0.5);
            border-bottom: 1px solid rgba(0, 0, 0, 0.1);
        }

        .youtube-tabs {
            display: flex;
            gap: 10px;
        }

        .youtube-tab {
            padding: 8px 16px;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(5px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 12px;
            color: rgba(255, 255, 255, 0.8);
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .day-mode .youtube-tab {
            background: rgba(0, 0, 0, 0.1);
            border: 1px solid rgba(0, 0, 0, 0.2);
            color: rgba(0, 0, 0, 0.8);
        }

        .youtube-tab.active {
            background: rgba(255, 255, 255, 0.25);
            border-color: rgba(255, 255, 255, 0.3);
            color: #ffffff;
        }

        .day-mode .youtube-tab.active {
            background: rgba(0, 0, 0, 0.25);
            border-color: rgba(0, 0, 0, 0.3);
            color: #000000;
        }

        .youtube-iframe {
            width: 100%;
            height: 380px;
            border: none;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .day-mode .youtube-iframe {
            border-bottom: 1px solid rgba(0, 0, 0, 0.1);
        }

        .youtube-overlay {
            position: absolute;
            top: 80px;
            left: 0;
            width: 100%;
            height: 380px;
            background: linear-gradient(135deg, 
                rgba(0, 0, 0, 0.3) 0%, 
                rgba(0, 0, 0, 0.1) 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0.5;
            transition: opacity 0.3s ease;
        }

        .youtube-overlay:hover {
            opacity: 0.8;
        }

        .youtube-title {
            padding: 20px;
            font-size: 16px;
            font-weight: 600;
            color: rgba(255, 255, 255, 0.95);
            background: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(10px);
        }

        .day-mode .youtube-title {
            color: rgba(0, 0, 0, 0.95);
            background: rgba(255, 255, 255, 0.5);
        }

        .playlist-container {
            padding: 15px 5px 15px 15px;
            max-height: 200px;
            overflow-y: auto;
            /* Scrollbar düzenlemeleri */
            scrollbar-width: thin;
            scrollbar-color: rgba(255, 255, 255, 0.3) rgba(255, 255, 255, 0.1);
        }

        .day-mode .playlist-container {
            scrollbar-color: rgba(0, 0, 0, 0.3) rgba(0, 0, 0, 0.1);
        }

        /* Özel scrollbar için */
        .playlist-container::-webkit-scrollbar {
            width: 6px;
        }

        .playlist-container::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
        }

        .day-mode .playlist-container::-webkit-scrollbar-track {
            background: rgba(0, 0, 0, 0.05);
        }

        .playlist-container::-webkit-scrollbar-thumb {
            background: rgba(255, 255, 255, 0.3);
            border-radius: 10px;
        }

        .day-mode .playlist-container::-webkit-scrollbar-thumb {
            background: rgba(0, 0, 0, 0.3);
        }

        .playlist-container::-webkit-scrollbar-thumb:hover {
            background: rgba(255, 255, 255, 0.4);
        }

        .day-mode .playlist-container::-webkit-scrollbar-thumb:hover {
            background: rgba(0, 0, 0, 0.4);
        }

        .playlist-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px;
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(5px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            margin-bottom: 10px;
            margin-right: 5px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .day-mode .playlist-item {
            background: rgba(0, 0, 0, 0.05);
            border: 1px solid rgba(0, 0, 0, 0.1);
        }

        .playlist-item:hover {
            background: rgba(255, 255, 255, 0.1);
            transform: translateX(5px);
        }

        .day-mode .playlist-item:hover {
            background: rgba(0, 0, 0, 0.1);
        }

        .playlist-item.active {
            background: rgba(255, 255, 255, 0.15);
            border-color: rgba(255, 255, 255, 0.2);
        }

        .day-mode .playlist-item.active {
            background: rgba(0, 0, 0, 0.15);
            border-color: rgba(0, 0, 0, 0.2);
        }

        .playlist-number {
            width: 24px;
            height: 24px;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(5px);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            font-weight: 600;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .day-mode .playlist-number {
            background: rgba(0, 0, 0, 0.1);
            border: 1px solid rgba(0, 0, 0, 0.2);
        }

        .playlist-title {
            flex: 1;
            font-size: 14px;
            color: rgba(255, 255, 255, 0.9);
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .day-mode .playlist-title {
            color: rgba(0, 0, 0, 0.9);
        }

        .playlist-duration {
            font-size: 12px;
            color: rgba(255, 255, 255, 0.5);
            white-space: nowrap;
        }

        .day-mode .playlist-duration {
            color: rgba(0, 0, 0, 0.5);
        }

        /* VİDEO KONTROL BUTONLARI */
        .video-controls {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 10px 20px;
            background: rgba(0, 0, 0, 0.3);
            backdrop-filter: blur(10px);
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }

        .day-mode .video-controls {
            background: rgba(255, 255, 255, 0.3);
            border-top: 1px solid rgba(0, 0, 0, 0.1);
        }

        .video-control-btn {
            padding: 8px 16px;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(5px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            color: rgba(255, 255, 255, 0.9);
            font-size: 13px;
            font-weight: 500;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 6px;
            transition: all 0.3s ease;
        }

        .day-mode .video-control-btn {
            background: rgba(0, 0, 0, 0.1);
            border: 1px solid rgba(0, 0, 0, 0.2);
            color: rgba(0, 0, 0, 0.9);
        }

        .video-control-btn:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        .day-mode .video-control-btn:hover {
            background: rgba(0, 0, 0, 0.2);
        }

        .volume-slider {
            width: 100px;
            height: 4px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 2px;
            appearance: none;
            outline: none;
            cursor: pointer;
        }

        .volume-slider::-webkit-slider-thumb {
            appearance: none;
            width: 14px;
            height: 14px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.9);
            cursor: pointer;
        }

        .day-mode .volume-slider {
            background: rgba(0, 0, 0, 0.1);
        }

        .day-mode .volume-slider::-webkit-slider-thumb {
            background: rgba(0, 0, 0, 0.9);
        }

        /* CHAT MESAJLARI - DÜZELTİLMİŞ */
        .chat-messages {
            flex: 1;
            position: relative;
            display: flex;
            flex-direction: column;
            justify-content: flex-end;
            padding: 20px;
            height: calc(100vh - 80px); /* Input alanı için yer bırak */
        }

        .chat-messages-container {
            display: flex;
            flex-direction: column;
            gap: 12px;
            max-height: 100%;
            overflow-y: auto;
            padding-right: 10px;
            scroll-behavior: smooth;
        }

        /* Chat container için scrollbar */
        .chat-messages-container::-webkit-scrollbar {
            width: 6px;
        }

        .chat-messages-container::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
        }

        .day-mode .chat-messages-container::-webkit-scrollbar-track {
            background: rgba(0, 0, 0, 0.05);
        }

        .chat-messages-container::-webkit-scrollbar-thumb {
            background: rgba(255, 255, 255, 0.2);
            border-radius: 10px;
        }

        .day-mode .chat-messages-container::-webkit-scrollbar-thumb {
            background: rgba(0, 0, 0, 0.2);
        }

        .chat-messages-container::-webkit-scrollbar-thumb:hover {
            background: rgba(255, 255, 255, 0.3);
        }

        .day-mode .chat-messages-container::-webkit-scrollbar-thumb:hover {
            background: rgba(0, 0, 0, 0.3);
        }

        .chat-message {
            background: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 18px;
            padding: 12px 16px;
            max-width: 70%;
            animation: messageAppear 0.3s ease forwards;
            opacity: 0;
            transform: translateY(10px);
        }

        @keyframes messageAppear {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .day-mode .chat-message {
            background: rgba(255, 255, 255, 0.5);
            border: 1px solid rgba(0, 0, 0, 0.1);
        }

        /* Sol tarafa giden mesajlar */
        .chat-message.left {
            align-self: flex-start;
            background: rgba(255, 255, 255, 0.1);
        }

        .day-mode .chat-message.left {
            background: rgba(0, 0, 0, 0.1);
        }

        /* Sağ tarafa giden mesajlar (kullanıcı) */
        .chat-message.right {
            align-self: flex-end;
            background: rgba(255, 255, 255, 0.15);
        }

        .day-mode .chat-message.right {
            background: rgba(0, 0, 0, 0.15);
        }

        .message-user {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 4px;
        }

        .message-user-avatar {
            width: 24px;
            height: 24px;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(5px);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            font-size: 12px;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .day-mode .message-user-avatar {
            background: rgba(0, 0, 0, 0.1);
            border: 1px solid rgba(0, 0, 0, 0.2);
        }

        .message-user-name {
            font-size: 12px;
            font-weight: 600;
            color: rgba(255, 255, 255, 0.9);
        }

        .day-mode .message-user-name {
            color: rgba(0, 0, 0, 0.9);
        }

        .message-content {
            font-size: 14px;
            line-height: 1.4;
            color: rgba(255, 255, 255, 0.95);
        }

        .day-mode .message-content {
            color: rgba(0, 0, 0, 0.95);
        }

        .message-time {
            font-size: 10px;
            color: rgba(255, 255, 255, 0.4);
            text-align: right;
            margin-top: 4px;
        }

        .day-mode .message-time {
            color: rgba(0, 0, 0, 0.4);
        }

        /* PROFİL PANELİ */
        .profile-panel {
            position: fixed;
            left: 70px;
            top: 0;
            width: 350px;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(20px);
            border-right: 1px solid rgba(255, 255, 255, 0.1);
            z-index: 95;
            display: none;
            flex-direction: column;
            padding: 20px;
            transform: translateX(-100%);
            transition: transform 0.3s ease, opacity 0.3s ease;
            opacity: 0;
        }

        .profile-panel.active {
            transform: translateX(0);
            opacity: 1;
        }

        .day-mode .profile-panel {
            background: rgba(255, 255, 255, 0.8);
            border-right: 1px solid rgba(0, 0, 0, 0.1);
        }

        .profile-header {
            padding-bottom: 20px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .day-mode .profile-header {
            border-bottom: 1px solid rgba(0, 0, 0, 0.1);
        }

        .profile-avatar-large {
            width: 70px;
            height: 70px;
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(10px);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            font-weight: 600;
            border: 2px solid rgba(255, 255, 255, 0.3);
        }

        .day-mode .profile-avatar-large {
            background: rgba(0, 0, 0, 0.15);
            border: 2px solid rgba(0, 0, 0, 0.3);
        }

        .profile-info h3 {
            font-size: 20px;
            font-weight: 600;
            color: rgba(255, 255, 255, 0.95);
            margin-bottom: 5px;
        }

        .day-mode .profile-info h3 {
            color: rgba(0, 0, 0, 0.95);
        }

        .profile-role {
            font-size: 14px;
            color: rgba(255, 255, 255, 0.6);
            padding: 4px 10px;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(5px);
            border-radius: 20px;
            display: inline-block;
        }

        .day-mode .profile-role {
            color: rgba(0, 0, 0, 0.6);
            background: rgba(0, 0, 0, 0.1);
        }

        .profile-sections {
            flex: 1;
            overflow-y: auto;
            padding-right: 10px;
        }

        .profile-section {
            margin-bottom: 25px;
        }

        .profile-section h4 {
            font-size: 14px;
            font-weight: 600;
            color: rgba(255, 255, 255, 0.8);
            margin-bottom: 12px;
            padding-bottom: 8px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        }

        .day-mode .profile-section h4 {
            color: rgba(0, 0, 0, 0.8);
            border-bottom: 1px solid rgba(0, 0, 0, 0.05);
        }

        .profile-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px;
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(5px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            margin-bottom: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .day-mode .profile-item {
            background: rgba(0, 0, 0, 0.05);
            border: 1px solid rgba(0, 0, 0, 0.1);
        }

        .profile-item:hover {
            background: rgba(255, 255, 255, 0.1);
            transform: translateX(5px);
        }

        .day-mode .profile-item:hover {
            background: rgba(0, 0, 0, 0.1);
        }

        .profile-item-icon {
            width: 36px;
            height: 36px;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(5px);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 16px;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .day-mode .profile-item-icon {
            background: rgba(0, 0, 0, 0.1);
            border: 1px solid rgba(0, 0, 0, 0.2);
        }

        .profile-item-text {
            flex: 1;
        }

        .profile-item-title {
            font-size: 14px;
            font-weight: 500;
            color: rgba(255, 255, 255, 0.95);
            margin-bottom: 2px;
        }

        .day-mode .profile-item-title {
            color: rgba(0, 0, 0, 0.95);
        }

        .profile-item-desc {
            font-size: 12px;
            color: rgba(255, 255, 255, 0.5);
        }

        .day-mode .profile-item-desc {
            color: rgba(0, 0, 0, 0.5);
        }

        /* DİĞER STİLLER */
        .blur-layer {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            transition: opacity 1.5s ease;
        }

        .day-mode .blur-layer {
            background: rgba(255, 255, 255, 0.8);
        }

        .icon-menu {
            position: fixed;
            left: 0;
            top: 0;
            width: 70px;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(20px);
            border-right: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px 0;
            z-index: 100;
        }

        .day-mode .icon-menu {
            background: rgba(255, 255, 255, 0.7);
            border-right: 1px solid rgba(0, 0, 0, 0.1);
        }

        .menu-icon {
            width: 50px;
            height: 50px;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 12px;
            color: rgba(255, 255, 255, 0.9);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            margin-bottom: 15px;
            transition: all 0.3s ease;
        }

        .day-mode .menu-icon {
            background: rgba(0, 0, 0, 0.1);
            border: 1px solid rgba(0, 0, 0, 0.2);
            color: rgba(0, 0, 0, 0.9);
        }

        .menu-icon:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-2px);
        }

        .day-mode .menu-icon:hover {
            background: rgba(0, 0, 0, 0.2);
        }

        .menu-icon.active {
            background: rgba(255, 255, 255, 0.25);
            border-color: rgba(255, 255, 255, 0.3);
        }

        .day-mode .menu-icon.active {
            background: rgba(0, 0, 0, 0.25);
            border-color: rgba(0, 0, 0, 0.3);
        }

        .online-panel {
            position: fixed;
            left: 70px;
            top: 0;
            width: 300px;
            height: 100%;
            background: rgba(0, 0, 0, 0.6);
            backdrop-filter: blur(15px);
            border-right: 1px solid rgba(255, 255, 255, 0.1);
            z-index: 90;
            display: flex;
            flex-direction: column;
            padding: 20px;
        }

        .day-mode .online-panel {
            background: rgba(255, 255, 255, 0.6);
            border-right: 1px solid rgba(0, 0, 0, 0.1);
        }

        .online-header {
            padding-bottom: 15px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            margin-bottom: 20px;
        }

        .day-mode .online-header {
            border-bottom: 1px solid rgba(0, 0, 0, 0.1);
        }

        .online-header h3 {
            font-size: 18px;
            font-weight: 600;
            color: rgba(255, 255, 255, 0.95);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .day-mode .online-header h3 {
            color: rgba(0, 0, 0, 0.95);
        }

        .online-tabs {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }

        .online-tab {
            flex: 1;
            padding: 8px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            color: rgba(255, 255, 255, 0.8);
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            text-align: center;
            transition: all 0.3s ease;
        }

        .day-mode .online-tab {
            background: rgba(0, 0, 0, 0.1);
            border: 1px solid rgba(0, 0, 0, 0.2);
            color: rgba(0, 0, 0, 0.8);
        }

        .online-tab.active {
            background: rgba(255, 255, 255, 0.25);
            border-color: rgba(255, 255, 255, 0.3);
            color: #ffffff;
        }

        .day-mode .online-tab.active {
            background: rgba(0, 0, 0, 0.25);
            border-color: rgba(0, 0, 0, 0.3);
            color: #000000;
        }

        .nick-list {
            flex: 1;
            overflow-y: auto;
            padding-right: 10px;
        }

        /* Nick list için scrollbar */
        .nick-list::-webkit-scrollbar {
            width: 6px;
        }

        .nick-list::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
        }

        .day-mode .nick-list::-webkit-scrollbar-track {
            background: rgba(0, 0, 0, 0.05);
        }

        .nick-list::-webkit-scrollbar-thumb {
            background: rgba(255, 255, 255, 0.2);
            border-radius: 10px;
        }

        .day-mode .nick-list::-webkit-scrollbar-thumb {
            background: rgba(0, 0, 0, 0.2);
        }

        .nick-list::-webkit-scrollbar-thumb:hover {
            background: rgba(255, 255, 255, 0.3);
        }

        .day-mode .nick-list::-webkit-scrollbar-thumb:hover {
            background: rgba(0, 0, 0, 0.3);
        }

        .nick-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .nick-item:hover {
            background: rgba(255, 255, 255, 0.05);
            padding-left: 8px;
            border-radius: 8px;
        }

        .day-mode .nick-item:hover {
            background: rgba(0, 0, 0, 0.05);
        }

        .nick-avatar {
            width: 36px;
            height: 36px;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(5px);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            font-size: 14px;
            border: 2px solid rgba(255, 255, 255, 0.2);
        }

        .day-mode .nick-avatar {
            background: rgba(0, 0, 0, 0.1);
            border: 2px solid rgba(0, 0, 0, 0.2);
        }

        .nick-info {
            flex: 1;
        }

        .nick-name {
            font-size: 14px;
            font-weight: 500;
            color: rgba(255, 255, 255, 0.95);
        }

        .day-mode .nick-name {
            color: rgba(0, 0, 0, 0.95);
        }

        .nick-status {
            font-size: 11px;
            color: rgba(255, 255, 255, 0.5);
            margin-top: 2px;
        }

        .day-mode .nick-status {
            color: rgba(0, 0, 0, 0.5);
        }

        .online-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.6);
        }

        .day-mode .online-dot {
            background: rgba(0, 0, 0, 0.6);
        }

        .chat-panel {
            position: fixed;
            left: 370px;
            top: 0;
            right: 450px;
            height: 100%;
            background: transparent;
            z-index: 80;
            display: flex;
            flex-direction: column;
        }

        .message-input-area {
            padding: 20px;
            background: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(15px);
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            flex-shrink: 0;
        }

        .day-mode .message-input-area {
            background: rgba(255, 255, 255, 0.5);
            border-top: 1px solid rgba(0, 0, 0, 0.1);
        }

        .message-input-wrapper {
            display: flex;
            gap: 12px;
        }

        .message-input {
            flex: 1;
            padding: 14px 18px;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 24px;
            color: #ffffff;
            font-size: 14px;
            font-family: inherit;
            transition: all 0.3s ease;
        }

        .day-mode .message-input {
            background: rgba(0, 0, 0, 0.1);
            border: 1px solid rgba(0, 0, 0, 0.2);
            color: #000000;
        }

        .message-input:focus {
            outline: none;
            border-color: rgba(255, 255, 255, 0.4);
            background: rgba(255, 255, 255, 0.15);
        }

        .day-mode .message-input:focus {
            border-color: rgba(0, 0, 0, 0.4);
            background: rgba(0, 0, 0, 0.15);
        }

        .send-button {
            width: 50px;
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 50%;
            color: rgba(255, 255, 255, 0.9);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            transition: all 0.3s ease;
        }

        .day-mode .send-button {
            background: rgba(0, 0, 0, 0.1);
            border: 1px solid rgba(0, 0, 0, 0.2);
            color: rgba(0, 0, 0, 0.9);
        }

        .send-button:hover {
            background: rgba(255, 255, 255, 0.25);
            transform: scale(1.1);
        }

        .day-mode .send-button:hover {
            background: rgba(0, 0, 0, 0.2);
        }

        /* VİDEO EKLE BUTTONU */
        .add-video-btn {
            width: 40px;
            height: 40px;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 50%;
            color: rgba(255, 255, 255, 0.9);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 16px;
            transition: all 0.3s ease;
            margin-left: 10px;
        }

        .day-mode .add-video-btn {
            background: rgba(0, 0, 0, 0.1);
            border: 1px solid rgba(0, 0, 0, 0.2);
            color: rgba(0, 0, 0, 0.9);
        }

        .add-video-btn:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: scale(1.1);
        }

        .day-mode .add-video-btn:hover {
            background: rgba(0, 0, 0, 0.2);
        }

        .add-video-btn.admin-only {
            background: rgba(59, 130, 246, 0.2);
            border-color: rgba(59, 130, 246, 0.3);
            color: #3b82f6;
        }

        .day-mode .add-video-btn.admin-only {
            background: rgba(59, 130, 246, 0.1);
            border-color: rgba(59, 130, 246, 0.2);
            color: #1d4ed8;
        }

        /* GİRİŞ PANELİ */
        .login-container {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 1000;
            width: 100%;
            max-width: 400px;
            background: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(25px);
            border-radius: 20px;
            border: 1px solid rgba(255, 255, 255, 0.15);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.4);
            overflow: hidden;
            transition: all 1s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .login-container.login-success {
            transform: translate(-50%, -50%) scale(0.9);
            opacity: 0;
            pointer-events: none;
        }

        .login-header {
            padding: 40px 40px 20px;
            text-align: center;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .logo {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
            margin-bottom: 20px;
        }

        .logo-icon {
            width: 60px;
            height: 60px;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 24px;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .logo-text {
            font-size: 32px;
            font-weight: 700;
            color: #ffffff;
        }

        .login-title {
            font-size: 18px;
            font-weight: 600;
            color: rgba(255, 255, 255, 0.9);
            margin-bottom: 8px;
        }

        .login-subtitle {
            font-size: 14px;
            color: rgba(255, 255, 255, 0.7);
        }

        .login-form {
            padding: 40px;
        }

        .input-group {
            margin-bottom: 24px;
        }

        .input-label {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 8px;
            color: rgba(255, 255, 255, 0.9);
            font-size: 14px;
            font-weight: 500;
        }

        .login-input {
            width: 100%;
            padding: 16px 20px;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 12px;
            color: #ffffff;
            font-size: 15px;
            transition: all 0.3s ease;
        }

        .login-input:focus {
            outline: none;
            border-color: rgba(255, 255, 255, 0.4);
            background: rgba(255, 255, 255, 0.15);
        }

        .login-btn {
            width: 100%;
            padding: 16px;
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(10px);
            color: white;
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 12px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .login-btn:hover {
            background: rgba(255, 255, 255, 0.25);
        }

        .login-footer {
            padding: 30px 40px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            text-align: center;
            background: rgba(255, 255, 255, 0.05);
        }

        .login-note {
            font-size: 13px;
            color: rgba(255, 255, 255, 0.6);
            line-height: 1.5;
        }

        .error-message {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: rgba(255, 255, 255, 0.9);
            padding: 12px 16px;
            border-radius: 10px;
            margin-bottom: 20px;
            font-size: 13px;
            display: none;
            align-items: center;
            gap: 10px;
            backdrop-filter: blur(10px);
        }

        /* RESPONSIVE */
        @media (max-width: 1400px) {
            .youtube-panel {
                width: 380px;
                height: 650px;
            }
            
            .chat-panel {
                right: 410px;
            }
        }

        @media (max-width: 1200px) {
            .youtube-panel {
                display: none;
            }
            
            .chat-panel {
                right: 0;
            }
        }

        @media (max-width: 992px) {
            .online-panel {
                display: none;
            }
            
            .icon-menu {
                width: 60px;
            }
            
            .chat-panel {
                left: 60px;
            }
        }

        @media (max-width: 768px) {
            .chat-panel {
                left: 0;
                padding-bottom: 80px;
            }
            
            .icon-menu {
                bottom: 0;
                top: auto;
                width: 100%;
                height: 60px;
                flex-direction: row;
                justify-content: space-around;
                padding: 0 10px;
                border-right: none;
                border-top: 1px solid rgba(255, 255, 255, 0.1);
            }
            
            .menu-icon {
                width: 40px;
                height: 40px;
                margin-bottom: 0;
            }
        }
    </style>
</head>
<body class="night-mode">
    <!-- YOUTUBE VİDEO PANELİ -->
    <div class="youtube-panel" id="youtubePanel">
        <div class="youtube-header">
            <div class="youtube-tabs">
                <div class="youtube-tab active" onclick="switchYouTubeTab('live')">Canlı Yayın</div>
                <div class="youtube-tab" onclick="switchYouTubeTab('playlist')">Playlist</div>
            </div>
            <div style="display: flex; gap: 8px;">
                <div class="add-video-btn admin-only" onclick="openVideoAddPanel()" title="Video Ekle (Admin)">
                    <i class="fas fa-plus"></i>
                </div>
                <div class="menu-icon" style="width: 40px; height: 40px; margin: 0;" onclick="togglePlaylist()" title="Playlist">
                    <i class="fas fa-list"></i>
                </div>
            </div>
        </div>
        
        <iframe 
            class="youtube-iframe"
            id="youtubeIframe"
            src="https://www.youtube.com/embed/jfKfPfyJRdk?autoplay=1&mute=0&controls=1&modestbranding=1&rel=0"
            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
            allowfullscreen>
        </iframe>
        
        <div class="youtube-overlay">
            <i class="fas fa-play" style="font-size: 40px; color: rgba(255,255,255,0.8);"></i>
        </div>
        
        <div class="youtube-title" id="videoTitle">Popbox Radio • 24/7 Canlı Müzik</div>
        
        <!-- Video Kontrolleri -->
        <div class="video-controls">
            <div class="video-control-btn" onclick="toggleVideoMute()" id="muteBtn">
                <i class="fas fa-volume-up"></i>
                <span>Ses Kapat</span>
            </div>
            <div class="video-control-btn" onclick="toggleVideoPlay()" id="playBtn">
                <i class="fas fa-pause"></i>
                <span>Duraklat</span>
            </div>
            <input type="range" class="volume-slider" id="volumeSlider" min="0" max="100" value="50" oninput="changeVolume(this.value)">
        </div>
        
        <div class="playlist-container" id="playlistContainer" style="display: none;">
            <!-- Playlist öğeleri buraya yüklenecek -->
        </div>
    </div>

    <!-- PROFİL PANELİ -->
    <div class="profile-panel" id="profilePanel">
        <div class="profile-header">
            <div class="profile-avatar-large" id="profileAvatarLarge">M</div>
            <div class="profile-info">
                <h3 id="profileName">mateky</h3>
                <div class="profile-role" id="profileRole">owner</div>
            </div>
        </div>
        
        <div class="profile-sections">
            <div class="profile-section">
                <h4>Profil Ayarları</h4>
                <div class="profile-item" onclick="changeProfileAvatar()">
                    <div class="profile-item-icon">
                        <i class="fas fa-user-circle"></i>
                    </div>
                    <div class="profile-item-text">
                        <div class="profile-item-title">Profil Resmi Değiştir</div>
                        <div class="profile-item-desc">Avatarınızı güncelleyin</div>
                    </div>
                </div>
                
                <div class="profile-item" onclick="changePassword()" id="passwordChangeItem">
                    <div class="profile-item-icon">
                        <i class="fas fa-key"></i>
                    </div>
                    <div class="profile-item-text">
                        <div class="profile-item-title">Şifre Değiştir</div>
                        <div class="profile-item-desc">Güvenliğiniz için şifrenizi güncelleyin</div>
                    </div>
                </div>
            </div>
            
            <div class="profile-section">
                <h4>Görünüm</h4>
                <div class="profile-item" onclick="toggleTheme()">
                    <div class="profile-item-icon">
                        <i class="fas fa-moon"></i>
                    </div>
                    <div class="profile-item-text">
                        <div class="profile-item-title" id="themeTitle">Gece Modu</div>
                        <div class="profile-item-desc">Tema değiştir: Gece/Gündüz</div>
                    </div>
                </div>
                
                <div class="profile-item" onclick="toggleSleepMode()">
                    <div class="profile-item-icon">
                        <i class="fas fa-bed"></i>
                    </div>
                    <div class="profile-item-text">
                        <div class="profile-item-title" id="sleepModeTitle">Uyku Modu: Kapalı</div>
                        <div class="profile-item-desc">Otomatik kapanma ayarları</div>
                    </div>
                </div>
            </div>
            
            <div class="profile-section">
                <h4>Hesap İşlemleri</h4>
                <div class="profile-item" onclick="openRegistrationPanel()" id="registrationItem">
                    <div class="profile-item-icon">
                        <i class="fas fa-user-plus"></i>
                    </div>
                    <div class="profile-item-text">
                        <div class="profile-item-title" id="registrationTitle">Hesap Kaydı</div>
                        <div class="profile-item-desc">Hesabınızı kaydedin veya güncelleyin</div>
                    </div>
                </div>
                
                <div class="profile-item" onclick="handleLogout()">
                    <div class="profile-item-icon">
                        <i class="fas fa-sign-out-alt"></i>
                    </div>
                    <div class="profile-item-text">
                        <div class="profile-item-title">Çıkış Yap</div>
                        <div class="profile-item-desc">Güvenli çıkış</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- BULANIK KATMAN -->
    <div class="blur-layer" id="blurLayer"></div>

    <!-- SOL BAR - ICON MENU -->
    <div class="icon-menu">
        <div class="menu-icon active" onclick="togglePanel('online')" title="Online Listesi">
            <i class="fas fa-users"></i>
        </div>
        <div class="menu-icon" onclick="toggleProfilePanel()" title="Profil" id="profileIconBtn">
            <i class="fas fa-user-circle"></i>
        </div>
        <div class="menu-icon" onclick="toggleTheme()" title="Tema Değiştir" id="themeToggle">
            <i class="fas fa-moon"></i>
        </div>
        <div class="menu-icon" onclick="openSettings()" title="Ayarlar">
            <i class="fas fa-cog"></i>
        </div>
        <div class="menu-icon" onclick="openIRC()" title="IRC Komutları">
            <i class="fas fa-terminal"></i>
        </div>
        <div class="menu-icon" onclick="handleLogout()" title="Çıkış Yap">
            <i class="fas fa-sign-out-alt"></i>
        </div>
    </div>

    <!-- SOL PANEL - ONLINE LİSTESİ -->
    <div class="online-panel" id="onlinePanel">
        <div class="online-header">
            <h3><i class="fas fa-users"></i> Online Listeler</h3>
            <div class="online-tabs">
                <div class="online-tab active" onclick="switchTab('online')">Çevrimiçi (5)</div>
                <div class="online-tab" onclick="switchTab('chatting')">Sohbette (3)</div>
            </div>
        </div>
        
        <div class="nick-list" id="onlineList">
            <!-- Online kullanıcılar buraya yüklenecek -->
        </div>
    </div>

    <!-- ORTA PANEL - GENEL SOHBET -->
    <div class="chat-panel">
        <div class="chat-messages" id="chatMessages">
            <div class="chat-messages-container" id="chatContainer">
                <!-- Mesajlar buraya yüklenecek -->
            </div>
        </div>
        
        <div class="message-input-area">
            <div class="message-input-wrapper">
                <input type="text" id="messageInput" class="message-input" placeholder="Mesajınızı yazın...">
                <button class="send-button" onclick="sendMessage()">
                    <i class="fas fa-paper-plane"></i>
                </button>
            </div>
        </div>
    </div>

    <!-- GİRİŞ PANELİ -->
    <div class="login-container" id="loginContainer">
        <div class="login-header">
            <div class="logo">
                <div class="logo-icon">
                    <i class="fas fa-comment-dots"></i>
                </div>
                <div class="logo-text">Popbox Elite</div>
            </div>
            <h2 class="login-title">Minimalist Chat Platform</h2>
            <p class="login-subtitle">Siyah & Beyaz • Şeffaf • Premium</p>
        </div>

        <div class="login-form">
            <div id="errorMessage" class="error-message">
                <i class="fas fa-exclamation-circle"></i>
                <span id="errorText"></span>
            </div>

            <div class="input-group">
                <div class="input-label">
                    <i class="fas fa-user"></i>
                    Kullanıcı Adı
                </div>
                <input type="text" 
                       id="nickInput" 
                       class="login-input" 
                       placeholder="Kullanıcı adınızı girin"
                       autofocus>
            </div>

            <div class="input-group">
                <div class="input-label">
                    <i class="fas fa-lock"></i>
                    Şifre
                </div>
                <input type="password" 
                       id="passInput" 
                       class="login-input" 
                       placeholder="Şifrenizi girin (opsiyonel)">
            </div>

            <button class="login-btn" onclick="handleLogin()" id="loginBtn">
                <span id="btnText">Giriş Yap</span>
            </button>
        </div>

        <div class="login-footer">
            <div class="login-note">
                <p><strong>Demo Kullanıcılar:</strong></p>
                <p><strong>mateky</strong> / <strong>kumsal07@</strong></p>
                <p><strong>MATE</strong> / <strong>secure123</strong></p>
                <p style="margin-top: 10px; font-size: 12px; color: rgba(255,255,255,0.4);">
                    Not: Kayıtlı olmayan nickler için şifre gerekmez
                </p>
            </div>
        </div>
    </div>

    <script>
        // ==================== DEĞİŞKENLER ====================
        let currentUser = null;
        let isDayMode = false;
        let isSleepMode = false;
        let currentTab = 'online';
        let currentYouTubeTab = 'live';
        let onlineUsers = [];
        let chatMessages = [];
        let messageInterval;
        let userUpdateInterval;
        let currentVideoIndex = 0;
        let isVideoMuted = false;
        let isVideoPlaying = true;
        let currentVolume = 50;

        // Türkçe Radyo ve Müzik YouTube Kanalları
        const youtubeVideos = [
            {
                id: "jfKfPfyJRdk",
                title: "Popbox Radio • 24/7 Canlı Müzik",
                type: "live"
            },
            {
                id: "7NOSDKb0HlU",
                title: "TRT FM • Canlı Yayın",
                type: "radio"
            },
            {
                id: "0vq4KtIcYp8",
                title: "Kral Pop • Canlı Radyo",
                type: "radio"
            },
            {
                id: "UCS5IYCU1Y7YcL7jRzrKofFg",
                title: "Power Türk • Canlı Müzik",
                type: "live"
            },
            {
                id: "qK7N4x-3Kc8",
                title: "Slow Türk • Akustik Müzik",
                type: "radio"
            },
            {
                id: "o1tj2zJ2Wvg",
                title: "NTV Radyo • Haber & Müzik",
                type: "radio"
            },
            {
                id: "KpG8pZRz3GY",
                title: "Alem FM • Pop Müzik",
                type: "radio"
            },
            {
                id: "zClcLQ5pXWg",
                title: "Radyo D • En İyi Türkçe Şarkılar",
                type: "playlist"
            },
            {
                id: "7NNbR3w6G-I",
                title: "Best FM • Hit Müzik",
                type: "radio"
            },
            {
                id: "qJ_Mu6q4TPw",
                title: "Show Radyo • Türkçe Pop",
                type: "radio"
            }
        ];

        // ==================== SAYFA YÜKLENDİĞİNDE ====================
        document.addEventListener('DOMContentLoaded', function() {
            document.getElementById('nickInput').focus();
            document.getElementById('blurLayer').style.opacity = '0.8';
            
            // Enter tuşu ile giriş
            document.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    const activeElement = document.activeElement;
                    if (activeElement.id === 'nickInput' || activeElement.id === 'passInput') {
                        handleLogin();
                    } else if (activeElement.id === 'messageInput') {
                        sendMessage();
                    }
                }
            });
            
            // Playlist'i yükle
            loadPlaylist();
        });

        // ==================== YOUTUBE SİSTEMİ ====================
        function loadPlaylist() {
            const playlistContainer = document.getElementById('playlistContainer');
            let html = '';
            
            youtubeVideos.forEach((video, index) => {
                const duration = Math.floor(Math.random() * 4) + 2; // 2-5 saat
                html += `
                    <div class="playlist-item ${index === 0 ? 'active' : ''}" onclick="playVideo(${index})">
                        <div class="playlist-number">${index + 1}</div>
                        <div class="playlist-title">${video.title}</div>
                        <div class="playlist-duration">${duration}:00</div>
                    </div>
                `;
            });
            
            playlistContainer.innerHTML = html;
        }

        function playVideo(index) {
            const video = youtubeVideos[index];
            const iframe = document.getElementById('youtubeIframe');
            const title = document.getElementById('videoTitle');
            
            // YouTube iframe URL'sini güncelle
            iframe.src = `https://www.youtube.com/embed/${video.id}?autoplay=1&mute=0&controls=1&modestbranding=1&rel=0`;
            
            // Başlığı güncelle
            title.textContent = video.title;
            
            // Aktif playlist öğesini güncelle
            const playlistItems = document.querySelectorAll('.playlist-item');
            playlistItems.forEach(item => item.classList.remove('active'));
            playlistItems[index].classList.add('active');
            
            currentVideoIndex = index;
            
            // Canlı yayın sekmesine geç
            if (video.type === 'live' || video.type === 'radio') {
                switchYouTubeTab('live');
            }
        }

        function switchYouTubeTab(tab) {
            currentYouTubeTab = tab;
            const tabs = document.querySelectorAll('.youtube-tab');
            const iframe = document.getElementById('youtubeIframe');
            const playlistContainer = document.getElementById('playlistContainer');
            
            tabs.forEach(t => t.classList.remove('active'));
            event.target.classList.add('active');
            
            if (tab === 'live') {
                playlistContainer.style.display = 'none';
                // Rastgele bir canlı yayın seç
                const liveVideos = youtubeVideos.filter(v => v.type === 'live' || v.type === 'radio');
                const randomIndex = Math.floor(Math.random() * liveVideos.length);
                const randomVideo = liveVideos[randomIndex];
                
                iframe.src = `https://www.youtube.com/embed/${randomVideo.id}?autoplay=1&mute=0&controls=1&modestbranding=1&rel=0`;
                document.getElementById('videoTitle').textContent = randomVideo.title;
                
                // Playlist'te aktif öğeyi bul
                const videoIndex = youtubeVideos.findIndex(v => v.id === randomVideo.id);
                if (videoIndex !== -1) {
                    const playlistItems = document.querySelectorAll('.playlist-item');
                    playlistItems.forEach(item => item.classList.remove('active'));
                    playlistItems[videoIndex].classList.add('active');
                    currentVideoIndex = videoIndex;
                }
            } else {
                playlistContainer.style.display = 'block';
                // Playlist'ten rastgele bir video seç
                const playlistVideos = youtubeVideos.filter(v => v.type === 'playlist');
                if (playlistVideos.length > 0) {
                    const randomVideo = playlistVideos[0];
                    iframe.src = `https://www.youtube.com/embed/${randomVideo.id}?autoplay=1&mute=0&controls=1&modestbranding=1&rel=0`;
                    document.getElementById('videoTitle').textContent = randomVideo.title;
                }
            }
        }

        function togglePlaylist() {
            const playlistContainer = document.getElementById('playlistContainer');
            playlistContainer.style.display = playlistContainer.style.display === 'none' ? 'block' : 'none';
        }

        // Video Ses Kontrolleri
        function toggleVideoMute() {
            const iframe = document.getElementById('youtubeIframe');
            const muteBtn = document.getElementById('muteBtn');
            const muteIcon = muteBtn.querySelector('i');
            const muteText = muteBtn.querySelector('span');
            
            isVideoMuted = !isVideoMuted;
            
            if (isVideoMuted) {
                muteIcon.className = 'fas fa-volume-mute';
                muteText.textContent = 'Ses Aç';
                // YouTube iframe ses kapatma işlemi
                iframe.src = iframe.src.replace('mute=0', 'mute=1');
            } else {
                muteIcon.className = 'fas fa-volume-up';
                muteText.textContent = 'Ses Kapat';
                // YouTube iframe ses açma işlemi
                iframe.src = iframe.src.replace('mute=1', 'mute=0');
            }
        }

        function toggleVideoPlay() {
            const playBtn = document.getElementById('playBtn');
            const playIcon = playBtn.querySelector('i');
            const playText = playBtn.querySelector('span');
            
            isVideoPlaying = !isVideoPlaying;
            
            if (isVideoPlaying) {
                playIcon.className = 'fas fa-pause';
                playText.textContent = 'Duraklat';
                // YouTube iframe oynatma işlemi
                const iframe = document.getElementById('youtubeIframe');
                iframe.src = iframe.src.replace('autoplay=0', 'autoplay=1');
            } else {
                playIcon.className = 'fas fa-play';
                playText.textContent = 'Oynat';
                // YouTube iframe duraklatma işlemi
                const iframe = document.getElementById('youtubeIframe');
                iframe.src = iframe.src.replace('autoplay=1', 'autoplay=0');
            }
        }

        function changeVolume(value) {
            currentVolume = value;
            // YouTube iframe ses seviyesi kontrolü
            const iframe = document.getElementById('youtubeIframe');
            // YouTube iframe ses kontrolü için API gerekiyor, 
            // basit versiyonda sadece görsel değişiklik yapıyoruz
            const volumeSlider = document.getElementById('volumeSlider');
            volumeSlider.value = value;
            
            if (value == 0 && !isVideoMuted) {
                toggleVideoMute();
            } else if (value > 0 && isVideoMuted) {
                toggleVideoMute();
            }
        }

        function openVideoAddPanel() {
            // Sadece admin ve owner yetkisi kontrolü
            if (currentUser && (currentUser.role === 'admin' || currentUser.role === 'owner')) {
                const videoUrl = prompt('YouTube Video URL veya ID girin:');
                if (videoUrl) {
                    // Basit URL doğrulama
                    let videoId = videoUrl;
                    
                    // YouTube URL'den ID çıkarma
                    if (videoUrl.includes('youtube.com/watch?v=')) {
                        videoId = videoUrl.split('v=')[1];
                        const ampersandPosition = videoId.indexOf('&');
                        if (ampersandPosition !== -1) {
                            videoId = videoId.substring(0, ampersandPosition);
                        }
                    } else if (videoUrl.includes('youtu.be/')) {
                        videoId = videoUrl.split('youtu.be/')[1];
                    }
                    
                    // Yeni video ekle
                    youtubeVideos.push({
                        id: videoId,
                        title: "Yeni Eklenen Video",
                        type: "playlist"
                    });
                    
                    // Playlist'i yenile
                    loadPlaylist();
                    
                    // Bilgi mesajı
                    alert('Video başarıyla eklendi! Playlist sekmesinden görebilirsiniz.');
                }
            } else {
                alert('Bu özellik sadece admin ve owner yetkilerine sahip kullanıcılar içindir.');
            }
        }

        // ==================== PROFİL PANELİ ====================
        function toggleProfilePanel() {
            const profilePanel = document.getElementById('profilePanel');
            const menuIcons = document.querySelectorAll('.menu-icon');
            
            menuIcons.forEach(icon => icon.classList.remove('active'));
            document.getElementById('profileIconBtn').classList.add('active');
            
            if (profilePanel.classList.contains('active')) {
                profilePanel.classList.remove('active');
                setTimeout(() => {
                    profilePanel.style.display = 'none';
                }, 300);
            } else {
                profilePanel.style.display = 'flex';
                setTimeout(() => {
                    profilePanel.classList.add('active');
                }, 10);
                
                // Profil bilgilerini güncelle
                if (currentUser) {
                    updateProfileInfo();
                }
            }
        }

        function updateProfileInfo() {
            document.getElementById('profileName').textContent = currentUser.name;
            document.getElementById('profileRole').textContent = currentUser.role;
            document.getElementById('profileAvatarLarge').textContent = currentUser.avatar;
            
            // Tema başlığını güncelle
            const themeTitle = document.getElementById('themeTitle');
            themeTitle.textContent = isDayMode ? 'Gündüz Modu' : 'Gece Modu';
            
            // Kayıt durumunu güncelle
            const registrationTitle = document.getElementById('registrationTitle');
            const registrationItem = document.getElementById('registrationItem');
            const passwordChangeItem = document.getElementById('passwordChangeItem');
            
            if (currentUser.registered === false) {
                registrationTitle.textContent = 'Hesap Kaydı';
                registrationItem.style.display = 'flex';
                passwordChangeItem.style.display = 'none';
            } else {
                registrationTitle.textContent = 'Hesap Bilgileri';
                registrationItem.style.display = 'flex';
                passwordChangeItem.style.display = 'flex';
            }
            
            // Uyku modu başlığını güncelle
            const sleepModeTitle = document.getElementById('sleepModeTitle');
            sleepModeTitle.textContent = `Uyku Modu: ${isSleepMode ? 'Açık' : 'Kapalı'}`;
        }

        function changeProfileAvatar() {
            if (!currentUser) return;
            
            const letters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';
            const randomLetter = letters[Math.floor(Math.random() * letters.length)];
            const customLetter = prompt('Profil harfinizi girin (A-Z):', currentUser.avatar);
            
            if (customLetter && customLetter.length === 1 && letters.includes(customLetter.toUpperCase())) {
                currentUser.avatar = customLetter.toUpperCase();
                updateProfileInfo();
                alert('Profil resminiz güncellendi!');
            } else {
                currentUser.avatar = randomLetter;
                updateProfileInfo();
                alert(`Profil resminiz rastgele güncellendi: ${randomLetter}`);
            }
        }

        function changePassword() {
            if (!currentUser || currentUser.registered === false) {
                alert('Sadece kayıtlı kullanıcılar şifre değiştirebilir.');
                return;
            }
            
            const oldPass = prompt('Eski şifrenizi girin:');
            const newPass = prompt('Yeni şifrenizi girin:');
            const confirmPass = prompt('Yeni şifrenizi tekrar girin:');
            
            if (newPass && newPass === confirmPass) {
                currentUser.password = newPass;
                alert('Şifreniz başarıyla değiştirildi!');
            } else {
                alert('Şifreler uyuşmuyor veya geçersiz!');
            }
        }

        function toggleSleepMode() {
            isSleepMode = !isSleepMode;
            const sleepModeTitle = document.getElementById('sleepModeTitle');
            sleepModeTitle.textContent = `Uyku Modu: ${isSleepMode ? 'Açık' : 'Kapalı'}`;
            
            if (isSleepMode) {
                alert('Uyku modu açıldı. 30 dakika sonra otomatik kapanacak.');
                setTimeout(() => {
                    if (isSleepMode) {
                        alert('Uyku modu: Sistem 5 dakika içinde kapanacak.');
                        setTimeout(() => {
                            if (isSleepMode) {
                                alert('Sistem kapanıyor...');
                                // Gerçek uygulamada sayfa kapatılabilir
                            }
                        }, 300000); // 5 dakika
                    }
                }, 1800000); // 30 dakika
            } else {
                alert('Uyku modu kapatıldı.');
            }
        }

        function openRegistrationPanel() {
            if (currentUser.registered === false) {
                // Kayıt olma işlemi
                const pass1 = prompt('Kayıt için şifre belirleyin:');
                const pass2 = prompt('Şifreyi tekrar girin:');
                
                if (pass1 && pass1 === pass2) {
                    currentUser.password = pass1;
                    currentUser.registered = true;
                    updateProfileInfo();
                    alert('Hesabınız başarıyla kaydedildi! Artık şifre değiştirebilirsiniz.');
                } else {
                    alert('Şifreler uyuşmuyor!');
                }
            } else {
                // Hesap bilgilerini göster
                alert(`Hesap Bilgileri:\n\nKullanıcı: ${currentUser.name}\nRol: ${currentUser.role}\nKayıtlı: ${currentUser.registered ? 'Evet' : 'Hayır'}\nAvatar: ${currentUser.avatar}`);
            }
        }

        // ==================== DÜZELTİLMİŞ CHAT SİSTEMİ ====================
        function initializeChat() {
            // Demo mesajları yükle
            chatMessages = [
                { user: "mateky", avatar: "M", message: "Sohbet düzeltildi!", time: "14:00", side: "left" },
                { user: "MATE", avatar: "S", message: "Artık mesajlar düzgün görünüyor 👌", time: "13:58", side: "left" },
                { user: "Ahmet", avatar: "A", message: "Çok daha iyi oldu!", time: "13:55", side: "left" },
                { user: "Zeynep", avatar: "Z", message: "Tebrikler, harika düzeltme! 💫", time: "13:50", side: "left" },
                { user: currentUser.name, avatar: currentUser.avatar, message: "Merhaba! Sohbet alanı düzeltildi!", time: "Şimdi", side: "right" }
            ];
            
            renderChatMessages();
            startChatSimulation();
        }

        function renderChatMessages() {
            const chatContainer = document.getElementById('chatContainer');
            chatContainer.innerHTML = '';
            
            chatMessages.forEach(msg => {
                const messageDiv = document.createElement('div');
                messageDiv.className = `chat-message ${msg.side}`;
                messageDiv.innerHTML = `
                    <div class="message-user">
                        <div class="message-user-avatar">${msg.avatar}</div>
                        <div class="message-user-name">${msg.user}</div>
                    </div>
                    <div class="message-content">${msg.message}</div>
                    <div class="message-time">${msg.time}</div>
                `;
                chatContainer.appendChild(messageDiv);
            });
            
            // En aşağı kaydır - DÜZELTİLDİ
            setTimeout(() => {
                chatContainer.scrollTop = chatContainer.scrollHeight;
            }, 100);
        }

        function startChatSimulation() {
            // Eski mesajları temizle
            if (messageInterval) clearInterval(messageInterval);
            
            messageInterval = setInterval(() => {
                simulateNewMessage();
                
                // Mesaj sayısı sınırla (max 50 mesaj)
                if (chatMessages.length > 50) {
                    chatMessages.splice(0, chatMessages.length - 50);
                    renderChatMessages();
                }
            }, 8000); // 8 saniyede bir yeni mesaj
        }

        function simulateNewMessage() {
            const demoUsers = [
                { name: "mateky", avatar: "M", role: "owner" },
                { name: "MATE", avatar: "S", role: "admin" },
                { name: "Ahmet", avatar: "A", role: "user" },
                { name: "Zeynep", avatar: "Z", role: "user" },
                { name: "Mehmet", avatar: "M", role: "user" }
            ];
            
            const demoMessages = [
                "Sohbet alanı düzeltildi!",
                "Artık her şey daha iyi",
                "Scrollbar tema ile uyumlu",
                "Video ekleme özelliği harika",
                "Admin panel işlevsel",
                "Playlist scrollbar düzgün",
                "Tüm sistem stabil çalışıyor!",
                "Radyo dinlemek keyifli",
                "Yeni video ekleyebiliyorum",
                "Tebrikler harika iş!"
            ];
            
            const randomUser = demoUsers[Math.floor(Math.random() * demoUsers.length)];
            const randomMessage = demoMessages[Math.floor(Math.random() * demoMessages.length)];
            const now = new Date();
            const timeStr = now.getHours().toString().padStart(2, '0') + ':' + now.getMinutes().toString().padStart(2, '0');
            
            // Yeni mesaj ekle
            chatMessages.push({
                user: randomUser.name,
                avatar: randomUser.avatar,
                message: randomMessage,
                time: timeStr,
                side: "left"
            });
            
            // Chat'i render et
            renderChatMessages();
            
            // Kullanıcıyı güncelle
            const user = onlineUsers.find(u => u.name === randomUser.name);
            if (user) {
                user.chatting = true;
                user.lastActive = Date.now();
                loadOnlineList();
            }
        }

        // ==================== MESAJ GÖNDER ====================
        function sendMessage() {
            const input = document.getElementById('messageInput');
            const text = input.value.trim();
            
            if (!text) return;
            
            const now = new Date();
            const timeStr = now.getHours().toString().padStart(2, '0') + ':' + now.getMinutes().toString().padStart(2, '0');
            
            // Kendi mesajını ekle
            chatMessages.push({
                user: currentUser.name,
                avatar: currentUser.avatar,
                message: text,
                time: timeStr,
                side: "right"
            });
            
            // Chat'i render et
            renderChatMessages();
            
            // Input'u temizle
            input.value = '';
            
            // Kullanıcıyı güncelle
            const user = onlineUsers.find(u => u.name === currentUser.name);
            if (user) {
                user.chatting = true;
                user.lastActive = Date.now();
                loadOnlineList();
            }
            
            // Bot cevabı (gecikmeli)
            setTimeout(() => {
                const botMessages = [
                    "Harika bir mesaj!",
                    "Sohbet düzeltmesi iyi oldu değil mi?",
                    "Video ekleme özelliğini denedin mi?",
                    "Playlist scrollbar artık uyumlu!",
                    "Admin yetkilerin var mı?"
                ];
                const randomMsg = botMessages[Math.floor(Math.random() * botMessages.length)];
                
                chatMessages.push({
                    user: "MATE",
                    avatar: "S",
                    message: randomMsg,
                    time: new Date().toLocaleTimeString('tr-TR', { hour: '2-digit', minute: '2-digit' }),
                    side: "left"
                });
                
                renderChatMessages();
            }, 1500);
        }

        // ==================== DİĞER FONKSİYONLAR ====================
        function togglePanel(panel) {
            const onlinePanel = document.getElementById('onlinePanel');
            const menuIcons = document.querySelectorAll('.menu-icon');
            
            menuIcons.forEach(icon => icon.classList.remove('active'));
            event.target.closest('.menu-icon').classList.add('active');
            
            if (panel === 'online') {
                onlinePanel.style.display = onlinePanel.style.display === 'none' ? 'flex' : 'none';
            }
        }

        function switchTab(tab) {
            currentTab = tab;
            const tabs = document.querySelectorAll('.online-tab');
            tabs.forEach(t => t.classList.remove('active'));
            event.target.classList.add('active');
            loadOnlineList();
        }

        function toggleTheme() {
            const body = document.body;
            const themeBtn = document.getElementById('themeToggle').querySelector('i');
            const profileThemeTitle = document.getElementById('themeTitle');
            
            if (isDayMode) {
                body.classList.remove('day-mode');
                themeBtn.className = 'fas fa-moon';
                profileThemeTitle.textContent = 'Gece Modu';
                isDayMode = false;
            } else {
                body.classList.add('day-mode');
                themeBtn.className = 'fas fa-sun';
                profileThemeTitle.textContent = 'Gündüz Modu';
                isDayMode = true;
            }
            
            loadOnlineList();
        }

        function handleLogin() {
            const nickInput = document.getElementById('nickInput');
            const passInput = document.getElementById('passInput');
            
            let nick = nickInput.value.trim();
            const pass = passInput.value;
            
            if (!nick) {
                showError('Kullanıcı adı gerekli!');
                return;
            }
            
            if (nick.length > 20) {
                showError('Kullanıcı adı 20 karakterden kısa olmalıdır!');
                return;
            }
            
            const loginBtn = document.getElementById('loginBtn');
            loginBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i>';
            loginBtn.style.cursor = 'not-allowed';
            
            setTimeout(() => {
                performLogin(nick, pass);
            }, 800);
        }

        function performLogin(nick, pass) {
            const normalizedNick = nick.toLowerCase();
            const registeredUsers = [
                { name: "mateky", password: "kumsal07@", role: "owner", avatar: "M", registered: true },
                { name: "MATE", password: "secure123", role: "admin", avatar: "S", registered: true }
            ];
            
            let user = registeredUsers.find(u => u.name.toLowerCase() === normalizedNick);
            
            if (user) {
                if (pass !== user.password) {
                    showError('Kayıtlı kullanıcılar için şifre gereklidir!');
                    resetLoginButton();
                    return;
                }
            } else {
                user = {
                    name: nick.substring(0, 1).toUpperCase() + nick.substring(1).toLowerCase(),
                    role: "user",
                    avatar: nick.substring(0, 1).toUpperCase(),
                    registered: false
                };
            }
            
            currentUser = user;
            
            const loginBtn = document.getElementById('loginBtn');
            loginBtn.classList.add('success');
            loginBtn.innerHTML = '<i class="fas fa-check"></i> Giriş Başarılı!';
            
            setTimeout(() => {
                const loginContainer = document.getElementById('loginContainer');
                loginContainer.classList.add('login-success');
                document.getElementById('blurLayer').style.opacity = '0';
                
                setTimeout(() => {
                    initializeApp();
                }, 600);
            }, 1200);
        }

        function initializeApp() {
            initializeDemoData();
            loadOnlineList();
            initializeChat();
            startUserUpdateSystem();
        }

        function initializeDemoData() {
            onlineUsers = [
                { name: "mateky", avatar: "M", role: "owner", status: "online", chatting: true, lastActive: Date.now() },
                { name: "MATE", avatar: "S", role: "admin", status: "online", chatting: true, lastActive: Date.now() },
                { name: "Ahmet", avatar: "A", role: "user", status: "online", chatting: false, lastActive: Date.now() - 300000 },
                { name: "Zeynep", avatar: "Z", role: "user", status: "online", chatting: true, lastActive: Date.now() },
                { name: "Mehmet", avatar: "M", role: "user", status: "online", chatting: false, lastActive: Date.now() - 600000 },
                { name: "Ayşe", avatar: "A", role: "user", status: "away", chatting: false, lastActive: Date.now() - 1800000 },
                { name: "Can", avatar: "C", role: "user", status: "online", chatting: false, lastActive: Date.now() }
            ];
        }

        function loadOnlineList() {
            const onlineList = document.getElementById('onlineList');
            let filteredUsers = [];
            
            if (currentTab === 'online') {
                filteredUsers = onlineUsers.filter(user => user.status === 'online');
            } else {
                filteredUsers = onlineUsers.filter(user => user.chatting);
            }
            
            let html = '';
            filteredUsers.forEach(user => {
                const timeAgo = getTimeAgo(user.lastActive);
                const statusText = user.chatting ? "Sohbette" : timeAgo;
                
                html += `
                    <div class="nick-item">
                        <div class="nick-avatar">${user.avatar}</div>
                        <div class="nick-info">
                            <div class="nick-name">${user.name} ${user.role !== 'user' ? `(${user.role})` : ''}</div>
                            <div class="nick-status">${statusText}</div>
                        </div>
                        <div class="online-dot" style="background: ${user.chatting ? 'rgba(255,255,255,0.8)' : 'rgba(255,255,255,0.4)'}"></div>
                    </div>
                `;
            });
            
            onlineList.innerHTML = html;
            
            const onlineTab = document.querySelector('.online-tab:nth-child(1)');
            const chatTab = document.querySelector('.online-tab:nth-child(2)');
            
            onlineTab.textContent = `Çevrimiçi (${onlineUsers.filter(u => u.status === 'online').length})`;
            chatTab.textContent = `Sohbette (${onlineUsers.filter(u => u.chatting).length})`;
        }

        function getTimeAgo(timestamp) {
            const diff = Date.now() - timestamp;
            const minutes = Math.floor(diff / 60000);
            
            if (minutes < 1) return "Şimdi";
            if (minutes < 60) return `${minutes} dk önce`;
            
            const hours = Math.floor(minutes / 60);
            if (hours < 24) return `${hours} sa önce`;
            
            const days = Math.floor(hours / 24);
            return `${days} gün önce`;
        }

        function startUserUpdateSystem() {
            if (userUpdateInterval) clearInterval(userUpdateInterval);
            
            userUpdateInterval = setInterval(() => {
                onlineUsers.forEach(user => {
                    if (Math.random() > 0.7) {
                        user.chatting = !user.chatting;
                        user.lastActive = Date.now();
                    }
                    
                    if (Math.random() > 0.9) {
                        user.status = Math.random() > 0.1 ? 'online' : 'away';
                    }
                });
                
                loadOnlineList();
            }, 10000);
        }

        function showError(message) {
            const errorDiv = document.getElementById('errorMessage');
            const errorText = document.getElementById('errorText');
            
            errorText.textContent = message;
            errorDiv.style.display = 'flex';
            
            setTimeout(() => {
                errorDiv.style.display = 'none';
            }, 5000);
        }

        function resetLoginButton() {
            document.getElementById('loginBtn').innerHTML = '<span id="btnText">Giriş Yap</span>';
            document.getElementById('loginBtn').style.cursor = 'pointer';
        }

        function openSettings() {
            alert('⚙️ Ayarlar Paneli:\n\n• Profil Ayarları\n• Gizlilik\n• Bildirimler\n• Tema Ayarları\n• Şeffaflık Seviyesi\n• Video Yönetimi');
        }

        function openIRC() {
            alert('💻 IRC Komutları:\n\n/clear - Sohbeti temizle\n/help - Yardım\n/nick [yeni] - Nick değiştir\n/theme - Tema değiştir\n/users - Çevrimiçi kullanıcılar\n/video - Video ekle (admin)');
        }

        function handleLogout() {
            if (confirm('Çıkış yapmak istediğinize emin misiniz?')) {
                clearInterval(messageInterval);
                clearInterval(userUpdateInterval);
                location.reload();
            }
        }

        // ==================== GLOBAL FONKSİYONLAR ====================
        window.togglePanel = togglePanel;
        window.switchTab = switchTab;
        window.toggleTheme = toggleTheme;
        window.handleLogin = handleLogin;
        window.sendMessage = sendMessage;
        window.openSettings = openSettings;
        window.openIRC = openIRC;
        window.handleLogout = handleLogout;
        window.playVideo = playVideo;
        window.switchYouTubeTab = switchYouTubeTab;
        window.togglePlaylist = togglePlaylist;
        window.openVideoAddPanel = openVideoAddPanel;
        window.toggleVideoMute = toggleVideoMute;
        window.toggleVideoPlay = toggleVideoPlay;
        window.changeVolume = changeVolume;
        window.toggleProfilePanel = toggleProfilePanel;
        window.changeProfileAvatar = changeProfileAvatar;
        window.changePassword = changePassword;
        window.toggleSleepMode = toggleSleepMode;
        window.openRegistrationPanel = openRegistrationPanel;
    </script>
</body>
</html>
