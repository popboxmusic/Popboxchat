<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Popbox Elite - Genel Oda</title>
    <style>
        :root {
            --bg: #ffffff;
            --bg-dark: #0d1117;
            --text: #000000;
            --text-dark: #c9d1d9;
            --primary: #58a6ff;
            --primary-hover: #79c0ff;
            --danger: #ff4d4f;
            --gray: #f6f8fa;
            --gray-dark: #161b22;
            --border: #d0d7de;
            --border-dark: #30363d;
            --blur-bg: rgba(255,255,255,0.65);
            --blur-bg-dark: rgba(13,17,23,0.75);
        }
        body { margin:0; font-family:system-ui, sans-serif; background:var(--bg); color:var(--text); height:100vh; overflow:hidden; transition:all 0.4s; }
        body.dark { background:var(--bg-dark); color:var(--text-dark); }
        .login-screen { position:fixed; inset:0; z-index:9999; background:linear-gradient(135deg, #e6f0ff, #ffffff); display:flex; align-items:center; justify-content:center; backdrop-filter:blur(10px); }
        body.dark .login-screen { background:linear-gradient(135deg, #0d1117, #161b22); }
        .login-box { background:var(--blur-bg); backdrop-filter:blur(16px); border:1px solid var(--border); border-radius:20px; padding:40px; width:360px; text-align:center; box-shadow:0 10px 40px rgba(0,0,0,0.15); }
        body.dark .login-box { background:var(--blur-bg-dark); border-color:var(--border-dark); }
        h2 { margin:0 0 12px; font-size:28px; }
        p.tagline { font-size:16px; margin:0 0 32px; color:#6e7781; }
        body.dark p.tagline { color:#8b949e; }
        input { width:100%; padding:12px; margin:12px 0; border:1px solid var(--border); border-radius:8px; background:#f6f8fa; color:#000; font-size:16px; }
        body.dark input { background:#161b22; color:#c9d1d9; border-color:#30363d; }
        button { width:100%; padding:12px; background:var(--primary); color:white; border:none; border-radius:8px; font-size:16px; cursor:pointer; transition:0.2s; }
        button:hover { background:var(--primary-hover); }
        .error { color:var(--danger); margin-top:12px; font-size:14px; }
        .app { display:none; height:100vh; flex-direction:column; }
        .sidebar { width:30%; min-width:320px; background:var(--gray); border-right:1px solid var(--border); display:flex; flex-direction:column; }
        body.dark .sidebar { background:var(--gray-dark); border-color:var(--border-dark); }
        .chat-main { flex:1; display:flex; flex-direction:column; background:var(--bg); }
        body.dark .chat-main { background:var(--bg-dark); }
        .chat-header { height:60px; background:var(--gray); border-bottom:1px solid var(--border); padding:0 16px; display:flex; align-items:center; justify-content:space-between; }
        body.dark .chat-header { background:var(--gray-dark); border-color:var(--border-dark); }
        .messages { flex:1; padding:20px; overflow-y:auto; }
        .input-area { padding:10px 16px; background:var(--gray); display:flex; gap:10px; align-items:center; }
        body.dark .input-area { background:var(--gray-dark); }
        textarea { flex:1; padding:12px; border:none; border-radius:8px; background:#ffffff; color:#000; resize:none; font-size:15px; }
        body.dark textarea { background:#161b22; color:#c9d1d9; }
        .send-btn, .attach-btn { padding:12px; background:var(--primary); border:none; border-radius:50%; cursor:pointer; font-size:20px; color:white; }
        .msg { margin-bottom:12px; max-width:70%; padding:8px 12px; border-radius:8px; word-wrap:break-word; }
        .msg-self { background:var(--primary); color:white; margin-left:auto; }
        .msg-other { background:var(--gray); margin-right:auto; }
        .msg-media img, .msg-media video { max-width:100%; border-radius:8px; margin-top:6px; }
        .overlay { position:fixed; inset:0; background:rgba(0,0,0,0.7); display:none; justify-content:flex-end; z-index:2000; }
        .overlay.active { display:flex; }
        .overlay-content { width:380px; height:100%; background:var(--gray); border-left:1px solid var(--border); display:flex; flex-direction:column; }
        body.dark .overlay-content { background:var(--gray-dark); border-color:var(--border-dark); }
        .overlay-header { padding:16px; background:var(--primary); color:white; display:flex; justify-content:space-between; align-items:center; }
        .close-overlay { background:none; border:none; color:white; font-size:28px; cursor:pointer; }
        .profile-panel { padding:32px; text-align:center; }
        .profile-avatar { width:120px; height:120px; margin:0 auto 16px; border-radius:50%; background:var(--primary); color:white; display:flex; align-items:center; justify-content:center; font-size:56px; }
    </style>
</head>
<body>

<!-- GiriÅŸ -->
<div id="loginScreen" class="login-screen">
    <div class="login-box">
        <h2>Popbox Elite</h2>
        <p class="tagline">Burada ne var lan? Nick yaz da gir bakalÄ±m!</p>
        <input id="nickInput" type="text" placeholder="Nick yaz..." autofocus>
        <input id="passInput" type="password" placeholder="Åžifre? (gerek yoksa boÅŸ bÄ±rak)">
        <button onclick="handleLogin()">GiriÅŸ Yap</button>
        <div class="error" id="errorMsg"></div>
    </div>
</div>

<!-- Ana Uygulama -->
<div id="app" class="app" style="display:none;">
    <div class="sidebar">
        <div class="chat-header">
            <div style="font-weight:600;">Genel Oda</div>
            <div>
                <button onclick="document.body.classList.toggle('dark')">Gece/GÃ¼ndÃ¼z</button>
                <button onclick="openProfile()">Profil</button>
            </div>
        </div>
        <div class="messages" id="messages">
            <p id="welcome">HoÅŸ geldin! BurasÄ± Genel Oda â€“ mesaj yazmaya baÅŸla...</p>
        </div>
        <div class="input-area">
            <textarea id="msgInput" placeholder="Mesaj yaz..."></textarea>
            <button class="attach-btn" onclick="document.getElementById('fileInput').click()">ðŸ“Ž</button>
            <input type="file" id="fileInput" accept="image/*,video/*" style="display:none;" onchange="handleLocalMedia(event)">
            <button class="send-btn" onclick="sendMessage()">âž¤</button>
        </div>
    </div>

    <!-- Overlay (Profil / Ã–zel Sohbet) -->
    <div id="overlay" class="overlay">
        <div class="overlay-content">
            <div class="overlay-header">
                <span id="overlayTitle">Profil</span>
                <button class="close-overlay" onclick="closeOverlay()">Ã—</button>
            </div>
            <div id="overlayBody" style="padding:16px; overflow-y:auto; flex:1;"></div>
        </div>
    </div>
</div>

<script>
    let currentUser = null;
    let godMode = false;

    function handleLogin() {
        const nick = document.getElementById('nickInput').value.trim();
        const pass = document.getElementById('passInput').value;
        
        if (!nick) return alert('Nick yaz lan!');
        
        let role = 'user';
        if (nick.toLowerCase() === 'mateky' && pass === 'kumsal07@') role = 'owner';
        
        currentUser = { nick, role };
        
        document.getElementById('loginScreen').style.display = 'none';
        document.getElementById('app').style.display = 'flex';
        
        document.getElementById('welcome').innerHTML = `HoÅŸ geldin <strong>${nick}</strong>! (Rol: ${role})`;
    }

    function sendMessage() {
        const input = document.getElementById('msgInput');
        if (!input.value.trim()) return;
        
        const msg = document.createElement('div');
        msg.className = 'msg msg-self';
        msg.textContent = input.value;
        document.getElementById('messages').appendChild(msg);
        document.getElementById('messages').scrollTop = document.getElementById('messages').scrollHeight;
        input.value = '';
    }

    function handleLocalMedia(event) {
        const file = event.target.files[0];
        if (!file) return;

        const reader = new FileReader();
        reader.onload = function(e) {
            const msg = document.createElement('div');
            msg.className = 'msg msg-self';
            if (file.type.startsWith('image')) {
                msg.innerHTML = `<img src="${e.target.result}" style="max-width:100%; border-radius:12px;">`;
            } else if (file.type.startsWith('video')) {
                msg.innerHTML = `<video src="${e.target.result}" controls style="max-width:100%; border-radius:12px;"></video>`;
            }
            document.getElementById('messages').appendChild(msg);
            document.getElementById('messages').scrollTop = document.getElementById('messages').scrollHeight;
        };
        reader.readAsDataURL(file);
    }

    function openProfile() {
        document.getElementById('overlayTitle').textContent = 'Profil';
        const body = document.getElementById('overlayBody');
        body.innerHTML = `
            <div style="text-align:center;">
                <div style="width:120px; height:120px; margin:0 auto 16px; border-radius:50%; background:var(--accent); color:white; display:flex; align-items:center; justify-content:center; font-size:56px;">${currentUser.nick.charAt(0).toUpperCase()}</div>
                <h2>${currentUser.nick}</h2>
                <p>Rol: ${currentUser.role}</p>
                <button onclick="toggleGodMode()" style="margin-top:16px; padding:12px 24px; background:var(--accent); color:white; border:none; border-radius:8px; cursor:pointer;">TanrÄ± Modu ${godMode ? 'Kapat' : 'AÃ§'}</button>
            </div>
        `;
        document.getElementById('overlay').classList.add('active');
    }

    function closeOverlay() {
        document.getElementById('overlay').classList.remove('active');
    }

    function toggleGodMode() {
        godMode = !godMode;
        alert(`TanrÄ± modu ${godMode ? 'AÃ‡ILDI' : 'KAPATILDI'}!`);
    }

    // Enter desteÄŸi
    document.getElementById('nickInput').addEventListener('keypress', e => { if (e.key === 'Enter') handleLogin(); });
    document.getElementById('passInput').addEventListener('keypress', e => { if (e.key === 'Enter') handleLogin(); });
    document.getElementById('msgInput').addEventListener('keypress', e => { if (e.key === 'Enter' && !e.shiftKey) { e.preventDefault(); sendMessage(); } });
</script>
</body>
</html>
