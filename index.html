<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Popbox Elite</title>
    <style>
        :root {
            --bg: #ffffff;
            --bg-dark: #0f1115;
            --text: #000000;
            --text-dark: #e0e0e0;
            --primary: #1890ff;
            --primary-hover: #40a9ff;
            --danger: #ff4d4f;
            --gray: #f0f0f0;
            --gray-dark: #1f2229;
            --border: #ddd;
            --border-dark: #2a2e35;
            --blur-bg: rgba(255,255,255,0.65);
            --blur-bg-dark: rgba(15,17,21,0.75);
        }
        body { margin:0; font-family:system-ui, sans-serif; background:var(--bg); color:var(--text); height:100vh; overflow:hidden; transition:all 0.4s; }
        body.dark { background:var(--bg-dark); color:var(--text-dark); }
        .login-screen { position:fixed; inset:0; z-index:9999; background:linear-gradient(135deg, #e6f7ff, #ffffff); display:flex; align-items:center; justify-content:center; backdrop-filter:blur(10px); }
        body.dark .login-screen { background:linear-gradient(135deg, #0a0c10, #11141a); }
        .login-box { background:var(--blur-bg); backdrop-filter:blur(16px); border:1px solid rgba(255,255,255,0.25); border-radius:24px; padding:48px 40px; width:380px; text-align:center; box-shadow:0 20px 60px rgba(0,0,0,0.25); }
        body.dark .login-box { background:var(--blur-bg-dark); border-color:rgba(255,255,255,0.12); }
        h2 { margin:0 0 12px; font-size:28px; }
        p.tagline { font-size:16px; margin:0 0 32px; color:#555; }
        body.dark p.tagline { color:#aaa; }
        input { width:100%; padding:14px; margin:14px 0; border:1px solid var(--border); border-radius:12px; font-size:16px; background:rgba(255,255,255,0.45); }
        body.dark input { background:rgba(30,35,45,0.55); color:#eee; border-color:#444; }
        button { width:100%; padding:14px; background:var(--primary); color:white; border:none; border-radius:12px; font-size:16px; cursor:pointer; transition:0.3s; }
        button:hover { background:var(--primary-hover); transform:scale(1.03); }
        .error { color:var(--danger); margin-top:12px; font-size:14px; }
        .app { display:none; height:100vh; flex-direction:column; }
        .header { height:64px; background:#f8f9fa; border-bottom:1px solid var(--border); padding:0 24px; display:flex; align-items:center; justify-content:space-between; }
        body.dark .header { background:#11141a; border-color:var(--border-dark); }
        .chat-area { flex:1; display:flex; overflow:hidden; }
        .messages { flex:1; padding:24px; overflow-y:auto; }
        .input-area { padding:16px 24px; border-top:1px solid var(--border); background:#f8f9fa; display:flex; gap:16px; }
        body.dark .input-area { background:#11141a; border-color:var(--border-dark); }
        textarea { flex:1; padding:14px; border:1px solid var(--border); border-radius:12px; resize:none; font-size:15px; background:rgba(255,255,255,0.6); }
        body.dark textarea { background:rgba(30,35,45,0.7); color:#eee; border-color:#444; }
        .send-btn { padding:14px 24px; background:var(--primary); color:white; border:none; border-radius:12px; cursor:pointer; }
        .users-sidebar { width:240px; background:#f8f9fa; border-left:1px solid var(--border); padding:24px 16px; overflow-y:auto; }
        body.dark .users-sidebar { background:#0c0e12; border-color:var(--border-dark); }
        .user-item { padding:12px 16px; cursor:pointer; border-radius:12px; margin-bottom:8px; transition:0.25s; }
        .user-item:hover { background:var(--gray); transform:translateX(6px); }
        body.dark .user-item:hover { background:#1f2229; }
        .private-overlay { position:fixed; inset:0; background:rgba(0,0,0,0.7); display:none; justify-content:flex-end; z-index:2000; backdrop-filter:blur(8px); }
        .private-overlay.active { display:flex; }
        .private-window { width:60%; min-width:600px; height:100%; background:var(--bg); border-left:1px solid var(--border); display:flex; flex-direction:column; box-shadow:-15px 0 50px rgba(0,0,0,0.4); }
        body.dark .private-window { background:var(--bg-dark); border-color:var(--border-dark); }
        .private-header { padding:16px 24px; background:var(--primary); color:white; display:flex; justify-content:space-between; align-items:center; }
        .private-messages { flex:1; padding:24px; overflow-y:auto; }
        .private-input-area { padding:16px 24px; border-top:1px solid var(--border); display:flex; gap:16px; background:var(--gray); }
        body.dark .private-input-area { background:#11141a; border-color:var(--border-dark); }
        .close-btn { background:none; border:none; color:white; font-size:32px; cursor:pointer; }
        /* Profil */
        .profile-overlay { position:fixed; inset:0; background:rgba(0,0,0,0.7); display:none; align-items:center; justify-content:center; z-index:3000; backdrop-filter:blur(8px); }
        .profile-overlay.active { display:flex; }
        .profile-panel { width:90%; max-width:520px; background:var(--bg); border-radius:20px; overflow:hidden; box-shadow:0 20px 70px rgba(0,0,0,0.4); }
        body.dark .profile-panel { background:var(--bg-dark); }
        .profile-header { padding:40px 32px; background:linear-gradient(135deg, var(--primary), #722ed1); color:white; text-align:center; }
        .profile-avatar { width:100px; height:100px; margin:0 auto 16px; border-radius:50%; background:var(--primary); color:white; display:flex; align-items:center; justify-content:center; font-size:48px; font-weight:bold; border:6px solid white; }
        .profile-body { padding:32px; }
        .profile-section { margin-bottom:24px; }
        .section-title { font-size:18px; font-weight:600; margin-bottom:12px; }
        .profile-options { display:grid; grid-template-columns:repeat(auto-fit, minmax(140px, 1fr)); gap:16px; }
        .option-btn { padding:14px; background:var(--gray); border:none; border-radius:12px; cursor:pointer; transition:0.3s; }
        body.dark .option-btn { background:#1f2229; color:#eee; }
        .option-btn:hover { background:var(--primary); color:white; transform:translateY(-3px); }
        .god-toggle { background:var(--warning); color:black; }
        .close-profile { position:absolute; top:16px; right:16px; background:none; border:none; color:white; font-size:32px; cursor:pointer; }
    </style>
</head>
<body>

<!-- Şeffaf Giriş -->
<div id="loginScreen" class="login-screen">
    <div class="login-box">
        <h2>Popbox Elite</h2>
        <p class="tagline">Burada ne var lan? Nick yaz da gir bakalım!</p>
        <input id="nickInput" type="text" placeholder="Nick yaz..." autofocus>
        <input id="passInput" type="password" placeholder="Şifre? (gerek yoksa boş bırak)">
        <button onclick="handleLogin()">Giriş Yap</button>
        <div class="error" id="errorMsg"></div>
        <p class="info-text">Normal kullanıcılar şifre girmesin, sadece nick yeter.</p>
    </div>
</div>

<!-- Ana Uygulama -->
<div id="app" class="app">
    <div class="header">
        <div>Genel Sohbet</div>
        <div>
            <button onclick="document.body.classList.toggle('dark')">Gece/Gündüz</button>
            <button onclick="openProfile()">Profil</button>
        </div>
    </div>
    
    <div class="chat-area">
        <div class="messages" id="messages">
            <p id="welcome">Hoş geldin! Burası Popbox Elite – mesaj yazmaya başla...</p>
        </div>
        
        <div class="input-area">
            <textarea id="msgInput" placeholder="Mesaj yaz..."></textarea>
            <button class="send-btn" onclick="sendMessage()">Gönder</button>
        </div>
    </div>
    
    <div class="users-sidebar">
        <h4>Çevrimiçi</h4>
        <div id="userList"></div>
    </div>
</div>

<!-- Özel Sohbet -->
<div id="privateOverlay" class="private-overlay">
    <div class="private-window">
        <div class="private-header">
            <div style="display:flex; align-items:center; gap:16px;">
                <button class="close-btn" onclick="closePrivate()">←</button>
                <span id="privateTitle">Özel Sohbet</span>
            </div>
            <div>
                <button style="background:rgba(255,255,255,0.3); border:none; color:white; padding:8px 16px; border-radius:10px; margin-right:12px;" onclick="alert('Şikayet gönderildi')">Şikayet Et</button>
                <button style="background:var(--danger); color:white; border:none; padding:8px 16px; border-radius:10px;" onclick="alert('Engellendi')">Engelle</button>
            </div>
        </div>
        <div class="private-messages" id="privateMessages"><p>Sohbet başladı...</p></div>
        <div class="private-input-area">
            <textarea id="privateInput" placeholder="Mesaj yaz..."></textarea>
            <button class="send-btn" onclick="sendPrivateMsg()">Gönder</button>
        </div>
    </div>
</div>

<!-- Profil Paneli -->
<div id="profileOverlay" class="profile-overlay" onclick="closeProfile(event)">
    <div class="profile-panel" onclick="event.stopPropagation()">
        <div class="profile-header">
            <button class="close-profile" onclick="closeProfile()">×</button>
            <div class="profile-avatar" id="profileAvatar"></div>
            <h2 id="profileName"></h2>
            <p id="profileRole"></p>
        </div>
        <div class="profile-body">
            <div class="profile-section">
                <div class="section-title">Bilgiler</div>
                <p>Katılım: <span id="joinDate"></span></p>
                <p>Rol: <span id="userRole"></span></p>
                <p>Durum: <span id="userStatus">online</span></p>
            </div>
            <div class="profile-section">
                <div class="section-title">Seçenekler</div>
                <div class="profile-options">
                    <button class="option-btn" onclick="toggleFollow()">Takip Et / Bırak</button>
                    <button class="option-btn" onclick="toggleBlock()">Engelle</button>
                    <button class="option-btn" onclick="changeStatus()">Durum Değiştir</button>
                    <button class="option-btn" onclick="alert('İstatistikler yakında')">İstatistikler</button>
                    <button class="option-btn god-toggle" id="godToggle" onclick="toggleGodMode()" style="display:none;">Tanrı Modu Aç/Kapat</button>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
// Değişkenler
let currentUser = null;
let activePrivate = null;
let godMode = false;

function showError(msg) {
    document.getElementById('errorMsg').textContent = msg;
}

function handleLogin() {
    const nick = document.getElementById('nickInput').value.trim();
    const pass = document.getElementById('passInput').value;
    
    showError('');
    
    if (!nick) return showError('Nick yaz lan!');
    
    let role = 'user';
    if (nick.toLowerCase() === 'mateky' && pass === 'kumsal07@') {
        role = 'owner';
    } else if (pass) {
        return showError('Şifre yanlış veya gerek yok!');
    }
    
    currentUser = { nick, role, joined: new Date().toLocaleDateString('tr-TR') };
    
    document.getElementById('loginScreen').style.display = 'none';
    document.getElementById('app').style.display = 'flex';
    
    document.getElementById('welcome').innerHTML = `Hoş geldin <strong>${nick}</strong>! (Rol: ${role})<br>Burada ne yapalım, yaz bakalım...`;
    
    updateUserList();
    
    if (role === 'owner') document.getElementById('godToggle').style.display = 'block';
}

function updateUserList() {
    const list = document.getElementById('userList');
    list.innerHTML = '';
    
    ['Ahmet', 'Ayşe', 'Mehmet', 'Elif', currentUser.nick].forEach(name => {
        const div = document.createElement('div');
        div.className = 'user-item';
        div.textContent = name + (name === currentUser.nick ? ' (sen)' : '');
        if (godMode && name === currentUser.nick) div.textContent += ' (gizli)';
        div.onclick = () => openPrivateChat(name);
        list.appendChild(div);
    });
}

function sendMessage() {
    const input = document.getElementById('msgInput');
    if (!input.value.trim()) return;
    
    const msg = document.createElement('p');
    msg.innerHTML = `<strong>${currentUser.nick}:</strong> ${input.value}`;
    document.getElementById('messages').appendChild(msg);
    document.getElementById('messages').scrollTop = document.getElementById('messages').scrollHeight;
    input.value = '';
}

function openPrivateChat(nick) {
    activePrivate = nick;
    document.getElementById('privateTitle').textContent = nick + ' ile özel sohbet';
    document.getElementById('privateMessages').innerHTML = `<p>Sohbet başladı: ${nick}</p>`;
    document.getElementById('privateOverlay').classList.add('active');
    document.addEventListener('keydown', e => { if (e.key === 'Escape') closePrivate(); });
}

function closePrivate() {
    document.getElementById('privateOverlay').classList.remove('active');
}

function sendPrivateMsg() {
    const input = document.getElementById('privateInput');
    if (!input.value.trim()) return;
    
    const msg = document.createElement('p');
    msg.innerHTML = `<strong>Sen:</strong> ${input.value}`;
    document.getElementById('privateMessages').appendChild(msg);
    document.getElementById('privateMessages').scrollTop = document.getElementById('privateMessages').scrollHeight;
    input.value = '';
}

function openProfile() {
    document.getElementById('profileName').textContent = currentUser.nick;
    document.getElementById('profileRole').textContent = currentUser.role;
    document.getElementById('profileAvatar').textContent = currentUser.nick.charAt(0).toUpperCase();
    document.getElementById('joinDate').textContent = currentUser.joined;
    document.getElementById('userRole').textContent = currentUser.role;
    document.getElementById('profileOverlay').classList.add('active');
}

function closeProfile(e) {
    if (e.target.classList.contains('profile-overlay') || e.target.classList.contains('close-profile')) {
        document.getElementById('profileOverlay').classList.remove('active');
    }
}

function toggleGodMode() {
    godMode = !godMode;
    alert(`Tanrı modu ${godMode ? 'AÇILDI' : 'KAPATILDI'}! Artık gizlisin.`);
    updateUserList();
}

function toggleFollow() { alert('Takip yakında!'); }
function toggleBlock() { alert('Engelle yakında!'); }
function changeStatus() { alert('Durum değiştirme yakında!'); }

// Enter desteği
document.getElementById('nickInput').addEventListener('keypress', e => { if (e.key === 'Enter') handleLogin(); });
document.getElementById('passInput').addEventListener('keypress', e => { if (e.key === 'Enter') handleLogin(); });
document.getElementById('msgInput').addEventListener('keypress', e => { if (e.key === 'Enter' && !e.shiftKey) { e.preventDefault(); sendMessage(); } });
document.getElementById('privateInput').addEventListener('keypress', e => { if (e.key === 'Enter' && !e.shiftKey) { e.preventDefault(); sendPrivateMsg(); } });
</script>
</body>
</html>
