<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Popbox Elite</title>
    
    <style>
        :root {
            --bg-primary: #ffffff;
            --bg-secondary: #fafafa;
            --bg-sidebar: #f5f7fa;
            --bg-header: #ffffff;
            --bg-input: #ffffff;
            --bg-card: #ffffff;
            --bg-modal: #ffffff;
            --bg-hover: #f0f2f5;
            --bg-overlay: rgba(0,0,0,0.7);
            
            --text-primary: #1a1a1a;
            --text-secondary: #595959;
            --text-light: #8c8c8c;
            --text-muted: #bfbfbf;
            
            --border-color: #e8e8e8;
            --border-hover: #d9d9d9;
            
            --primary: #1890ff;
            --primary-light: #e6f7ff;
            --primary-hover: #40a9ff;
            --danger: #ff4d4f;
            --success: #52c41a;
            --warning: #faad14;
            --info: #13c2c2;
            --purple: #722ed1;
            --orange: #fa8c16;
            
            --shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.03);
            --shadow-md: 0 2px 8px rgba(0, 0, 0, 0.06);
            --shadow-lg: 0 4px 16px rgba(0, 0, 0, 0.08);
            --shadow-xl: 0 8px 32px rgba(0, 0, 0, 0.12);
            
            --radius-sm: 6px;
            --radius-md: 8px;
            --radius-lg: 12px;
            --radius-xl: 16px;
            --radius-round: 50%;
            
            --transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        body.dark-mode {
            --bg-primary: #141414;
            --bg-secondary: #1f1f1f;
            --bg-sidebar: #1a1a1a;
            --bg-header: #141414;
            --bg-input: #262626;
            --bg-card: #1f1f1f;
            --bg-modal: #1f1f1f;
            --bg-hover: #2a2a2a;
            --bg-overlay: rgba(0,0,0,0.9);
            
            --text-primary: #ffffff;
            --text-secondary: #bfbfbf;
            --text-light: #8c8c8c;
            --text-muted: #595959;
            
            --border-color: #303030;
            --border-hover: #434343;
            
            --primary: #177ddc;
            --primary-light: #111b26;
            --primary-hover: #3c9ae8;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        }
        
        html, body {
            height: 100%;
            width: 100%;
            overflow: hidden;
            background: var(--bg-primary);
            color: var(--text-primary);
            font-size: 14px;
            line-height: 1.5715;
        }
        
        .app-container {
            display: flex;
            height: 100vh;
            width: 100vw;
        }
        
        /* SOL Sƒ∞DEBAR - KANALLAR */
        .channels-sidebar {
            width: 80px;
            background: var(--bg-sidebar);
            border-right: 1px solid var(--border-color);
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 16px 0;
            gap: 8px;
        }
        
        .logo {
            font-size: 28px;
            font-weight: 700;
            margin-bottom: 16px;
            color: var(--primary);
            background: linear-gradient(135deg, var(--primary), var(--purple));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        .channel-item {
            width: 48px;
            height: 48px;
            border-radius: var(--radius-md);
            background: transparent;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: var(--transition);
            font-size: 20px;
            color: var(--text-secondary);
            position: relative;
            border: 1px solid transparent;
        }
        
        .channel-item:hover {
            background: var(--bg-hover);
            color: var(--text-primary);
            border-color: var(--border-color);
        }
        
        .channel-item.active {
            background: var(--primary);
            color: white;
            border-color: var(--primary);
            transform: scale(1.05);
        }
        
        .unread-indicator {
            position: absolute;
            top: -4px;
            right: -4px;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: var(--danger);
            border: 2px solid var(--bg-sidebar);
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.2); opacity: 0.7; }
            100% { transform: scale(1); opacity: 1; }
        }
        
        /* ANA ƒ∞√áERƒ∞K */
        .main-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }
        
        /* HEADER */
        .header {
            height: 64px;
            padding: 0 24px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            border-bottom: 1px solid var(--border-color);
            background: var(--bg-header);
        }
        
        .channel-info {
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .channel-icon {
            width: 40px;
            height: 40px;
            border-radius: var(--radius-md);
            background: linear-gradient(135deg, var(--primary), var(--purple));
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            font-weight: 600;
            box-shadow: var(--shadow-sm);
        }
        
        .channel-name {
            font-size: 18px;
            font-weight: 600;
            color: var(--text-primary);
        }
        
        .channel-topic {
            font-size: 13px;
            color: var(--text-light);
            margin-top: 2px;
        }
        
        .header-actions {
            display: flex;
            gap: 8px;
            align-items: center;
        }
        
        .icon-btn {
            width: 40px;
            height: 40px;
            border-radius: var(--radius-round);
            border: 1px solid var(--border-color);
            background: var(--bg-input);
            color: var(--text-secondary);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: var(--transition);
            position: relative;
            font-size: 18px;
        }
        
        .icon-btn:hover {
            background: var(--bg-hover);
            border-color: var(--border-hover);
            color: var(--text-primary);
            transform: translateY(-1px);
        }
        
        .notification-badge {
            position: absolute;
            top: -4px;
            right: -4px;
            min-width: 18px;
            height: 18px;
            border-radius: 9px;
            background: var(--danger);
            color: white;
            font-size: 11px;
            font-weight: 700;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 0 4px;
            border: 2px solid var(--bg-header);
        }
        
        /* SOHBET ALANI */
        .chat-container {
            flex: 1;
            display: flex;
            overflow: hidden;
        }
        
        /* SOL PANEL - VIDEO/STREAM */
        .video-panel {
            width: 300px;
            background: var(--bg-sidebar);
            border-right: 1px solid var(--border-color);
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }
        
        .video-header {
            padding: 16px;
            border-bottom: 1px solid var(--border-color);
            background: var(--bg-header);
        }
        
        .video-title {
            font-size: 16px;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .video-container {
            flex: 1;
            padding: 16px;
            display: flex;
            flex-direction: column;
            gap: 12px;
            overflow-y: auto;
        }
        
        .video-item {
            width: 100%;
            aspect-ratio: 16/9;
            border-radius: var(--radius-md);
            overflow: hidden;
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            position: relative;
            cursor: pointer;
            transition: var(--transition);
        }
        
        .video-item:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
            border-color: var(--primary);
        }
        
        .video-thumbnail {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .video-info {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: linear-gradient(to top, rgba(0,0,0,0.8), transparent);
            padding: 12px;
            color: white;
        }
        
        .video-user {
            font-size: 12px;
            font-weight: 500;
            margin-bottom: 4px;
            display: flex;
            align-items: center;
            gap: 6px;
        }
        
        .video-status {
            font-size: 11px;
            opacity: 0.9;
            display: flex;
            align-items: center;
            gap: 4px;
        }
        
        .live-badge {
            background: var(--danger);
            color: white;
            padding: 2px 6px;
            border-radius: var(--radius-sm);
            font-size: 10px;
            font-weight: 700;
            animation: blink 1.5s infinite;
        }
        
        @keyframes blink {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        
        /* ORTA PANEL - SOHBET */
        .chat-messages {
            flex: 1;
            display: flex;
            flex-direction: column;
            overflow: hidden;
            background: var(--bg-primary);
        }
        
        .messages-container {
            flex: 1;
            overflow-y: auto;
            padding: 20px;
        }
        
        .message-group {
            margin-bottom: 20px;
        }
        
        .message-date {
            text-align: center;
            margin: 20px 0;
            font-size: 12px;
            color: var(--text-muted);
            position: relative;
        }
        
        .message-date::before {
            content: '';
            position: absolute;
            left: 0;
            top: 50%;
            width: 100%;
            height: 1px;
            background: var(--border-color);
            z-index: 1;
        }
        
        .message-date span {
            background: var(--bg-primary);
            padding: 0 16px;
            position: relative;
            z-index: 2;
        }
        
        .message {
            display: flex;
            padding: 8px 16px;
            transition: var(--transition);
            border-radius: var(--radius-md);
            margin: 2px 0;
        }
        
        .message:hover {
            background: var(--bg-hover);
        }
        
        .message.mentioned {
            background: rgba(24, 144, 255, 0.1);
            border-left: 3px solid var(--primary);
        }
        
        .message-avatar {
            width: 36px;
            height: 36px;
            border-radius: var(--radius-round);
            background: linear-gradient(135deg, var(--primary), var(--purple));
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 16px;
            font-weight: 600;
            margin-right: 12px;
            flex-shrink: 0;
            cursor: pointer;
            border: 2px solid var(--bg-primary);
            box-shadow: var(--shadow-sm);
        }
        
        .message-avatar:hover {
            transform: scale(1.1);
        }
        
        .message-content {
            flex: 1;
            min-width: 0;
        }
        
        .message-header {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 4px;
        }
        
        .message-sender {
            font-weight: 600;
            font-size: 14px;
            color: var(--text-primary);
            cursor: pointer;
        }
        
        .message-sender:hover {
            text-decoration: underline;
        }
        
        .message-badge {
            font-size: 10px;
            padding: 2px 6px;
            border-radius: var(--radius-sm);
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .badge-owner { background: linear-gradient(135deg, #ff4d4f, #ff7875); color: white; }
        .badge-admin { background: linear-gradient(135deg, #faad14, #ffc53d); color: black; }
        .badge-coadmin { background: linear-gradient(135deg, #13c2c2, #36cfc9); color: white; }
        .badge-operator { background: linear-gradient(135deg, #722ed1, #9254de); color: white; }
        .badge-bot { background: linear-gradient(135deg, #52c41a, #73d13d); color: white; }
        .badge-vip { background: linear-gradient(135deg, #fa8c16, #ffa940); color: white; }
        .badge-user { background: var(--bg-hover); color: var(--text-secondary); }
        
        .message-time {
            font-size: 11px;
            color: var(--text-muted);
            font-family: 'Monaco', 'Consolas', monospace;
        }
        
        .message-text {
            font-size: 14px;
            line-height: 1.6;
            color: var(--text-primary);
            word-break: break-word;
        }
        
        .message-text a {
            color: var(--primary);
            text-decoration: none;
            font-weight: 500;
        }
        
        .message-text a:hover {
            text-decoration: underline;
        }
        
        .message-media {
            margin-top: 8px;
            max-width: 400px;
            border-radius: var(--radius-md);
            overflow: hidden;
            border: 1px solid var(--border-color);
            background: var(--bg-card);
        }
        
        .message-media img, .message-media video {
            width: 100%;
            max-height: 300px;
            object-fit: cover;
            display: block;
        }
        
        .message-actions {
            display: flex;
            gap: 8px;
            margin-top: 6px;
            opacity: 0;
            transition: var(--transition);
        }
        
        .message:hover .message-actions {
            opacity: 1;
        }
        
        .message-action-btn {
            font-size: 12px;
            color: var(--text-light);
            background: none;
            border: none;
            cursor: pointer;
            padding: 4px 8px;
            border-radius: var(--radius-sm);
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 4px;
        }
        
        .message-action-btn:hover {
            background: var(--bg-hover);
            color: var(--text-primary);
        }
        
        .typing-indicator {
            padding: 12px 24px;
            font-size: 13px;
            color: var(--text-light);
            font-style: italic;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .typing-dots {
            display: flex;
            gap: 4px;
        }
        
        .typing-dot {
            width: 6px;
            height: 6px;
            border-radius: 50%;
            background: var(--text-light);
            animation: typing 1.4s infinite;
        }
        
        .typing-dot:nth-child(2) { animation-delay: 0.2s; }
        .typing-dot:nth-child(3) { animation-delay: 0.4s; }
        
        @keyframes typing {
            0%, 60%, 100% { transform: translateY(0); opacity: 0.3; }
            30% { transform: translateY(-4px); opacity: 1; }
        }
        
        /* SOHBET Gƒ∞Rƒ∞≈û */
        .chat-input-area {
            padding: 16px 24px;
            border-top: 1px solid var(--border-color);
            background: var(--bg-primary);
        }
        
        .input-container {
            display: flex;
            gap: 12px;
            align-items: flex-end;
        }
        
        .input-actions {
            display: flex;
            gap: 4px;
            margin-bottom: 8px;
        }
        
        .input-action-btn {
            padding: 6px 12px;
            font-size: 13px;
            background: var(--bg-input);
            border: 1px solid var(--border-color);
            border-radius: var(--radius-md);
            color: var(--text-secondary);
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 6px;
        }
        
        .input-action-btn:hover {
            background: var(--bg-hover);
            border-color: var(--primary);
            color: var(--primary);
        }
        
        .chat-input {
            flex: 1;
            padding: 14px 16px;
            background: var(--bg-input);
            border: 1px solid var(--border-color);
            border-radius: var(--radius-lg);
            color: var(--text-primary);
            font-size: 14px;
            resize: none;
            min-height: 44px;
            max-height: 120px;
            outline: none;
            transition: var(--transition);
            line-height: 1.5;
            font-family: inherit;
        }
        
        .chat-input:focus {
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(24, 144, 255, 0.1);
        }
        
        .send-btn {
            width: 44px;
            height: 44px;
            border-radius: var(--radius-round);
            background: linear-gradient(135deg, var(--primary), var(--purple));
            color: white;
            border: none;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: var(--transition);
            flex-shrink: 0;
            font-size: 18px;
            font-weight: 600;
        }
        
        .send-btn:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
        }
        
        .send-btn:active {
            transform: translateY(0);
        }
        
        /* SAƒû PANEL - ONLINE Lƒ∞STESƒ∞ */
        .right-sidebar {
            width: 280px;
            background: var(--bg-sidebar);
            border-left: 1px solid var(--border-color);
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }
        
        .users-header {
            padding: 20px;
            border-bottom: 1px solid var(--border-color);
            background: var(--bg-header);
        }
        
        .users-search {
            position: relative;
        }
        
        .search-input {
            width: 100%;
            padding: 10px 12px 10px 36px;
            background: var(--bg-input);
            border: 1px solid var(--border-color);
            border-radius: var(--radius-md);
            color: var(--text-primary);
            font-size: 13px;
            outline: none;
            transition: var(--transition);
        }
        
        .search-input:focus {
            border-color: var(--primary);
            box-shadow: 0 0 0 2px rgba(24, 144, 255, 0.1);
        }
        
        .search-icon {
            position: absolute;
            left: 12px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--text-muted);
            font-size: 14px;
        }
        
        .users-list {
            flex: 1;
            overflow-y: auto;
            padding: 12px 0;
        }
        
        .user-item {
            display: flex;
            align-items: center;
            padding: 10px 20px;
            cursor: pointer;
            transition: var(--transition);
            gap: 12px;
        }
        
        .user-item:hover {
            background: var(--bg-hover);
        }
        
        .user-item.active {
            background: var(--primary-light);
            border-left: 3px solid var(--primary);
        }
        
        .user-status {
            width: 10px;
            height: 10px;
            border-radius: var(--radius-round);
            flex-shrink: 0;
            position: relative;
        }
        
        .user-status.online {
            background: var(--success);
        }
        
        .user-status.online::after {
            content: '';
            position: absolute;
            top: -2px;
            left: -2px;
            right: -2px;
            bottom: -2px;
            border-radius: var(--radius-round);
            background: var(--success);
            opacity: 0.3;
            animation: pulse 2s infinite;
        }
        
        .user-status.away {
            background: var(--warning);
        }
        
        .user-status.away::after {
            background: var(--warning);
        }
        
        .user-status.busy {
            background: var(--danger);
        }
        
        .user-status.busy::after {
            background: var(--danger);
        }
        
        .user-status.offline {
            background: var(--text-muted);
        }
        
        .user-status.offline::after {
            display: none;
        }
        
        .user-avatar {
            width: 36px;
            height: 36px;
            border-radius: var(--radius-round);
            background: linear-gradient(135deg, var(--primary), var(--purple));
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 15px;
            font-weight: 600;
            flex-shrink: 0;
            border: 2px solid var(--bg-sidebar);
            box-shadow: var(--shadow-sm);
        }
        
        .user-info {
            flex: 1;
            min-width: 0;
        }
        
        .user-name {
            font-size: 14px;
            font-weight: 600;
            color: var(--text-primary);
            display: flex;
            align-items: center;
            gap: 6px;
        }
        
        .user-role {
            font-size: 12px;
            color: var(--text-light);
            margin-top: 2px;
        }
        
        /* STORY BAR */
        .story-bar {
            height: 100px;
            background: var(--bg-header);
            border-bottom: 1px solid var(--border-color);
            overflow-x: auto;
            overflow-y: hidden;
            white-space: nowrap;
            display: flex;
            align-items: center;
            padding: 0 20px;
            scrollbar-width: none;
        }
        
        .story-bar::-webkit-scrollbar {
            display: none;
        }
        
        .story-item-bar {
            display: inline-flex;
            flex-direction: column;
            align-items: center;
            margin-right: 20px;
            cursor: pointer;
            position: relative;
            flex-shrink: 0;
        }
        
        .story-avatar-bar {
            width: 60px;
            height: 60px;
            border-radius: var(--radius-round);
            border: 3px solid transparent;
            background: linear-gradient(45deg, #ff6b6b, #feca57, #48dbfb, #ff9ff3);
            padding: 2px;
            margin-bottom: 6px;
            transition: var(--transition);
        }
        
        .story-avatar-bar:hover {
            transform: scale(1.1);
        }
        
        .story-avatar-bar img {
            width: 100%;
            height: 100%;
            border-radius: var(--radius-round);
            object-fit: cover;
            border: 2px solid var(--bg-header);
        }
        
        .story-name-bar {
            font-size: 12px;
            font-weight: 500;
            color: var(--text-primary);
            max-width: 60px;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        
        /* MODAL'LER */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--bg-overlay);
            z-index: 1000;
            display: none;
            align-items: center;
            justify-content: center;
        }
        
        .modal-overlay.active {
            display: flex;
        }
        
        .modal {
            background: var(--bg-modal);
            border-radius: var(--radius-lg);
            border: 1px solid var(--border-color);
            box-shadow: var(--shadow-xl);
            max-width: 90%;
            max-height: 90%;
            overflow: hidden;
            animation: modalSlide 0.3s ease;
        }
        
        @keyframes modalSlide {
            from { transform: translateY(-20px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        
        /* PROFƒ∞L MODAL */
        .profile-modal {
            width: 500px;
            display: flex;
            flex-direction: column;
        }
        
        .profile-header {
            padding: 30px;
            background: linear-gradient(135deg, var(--primary), var(--purple));
            color: white;
            text-align: center;
            position: relative;
        }
        
        .profile-close {
            position: absolute;
            top: 16px;
            right: 16px;
            width: 32px;
            height: 32px;
            border-radius: var(--radius-round);
            background: rgba(255,255,255,0.2);
            border: none;
            color: white;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: var(--transition);
        }
        
        .profile-close:hover {
            background: rgba(255,255,255,0.3);
            transform: rotate(90deg);
        }
        
        .profile-avatar {
            width: 100px;
            height: 100px;
            border-radius: var(--radius-round);
            border: 4px solid white;
            margin: 0 auto 16px;
            background: linear-gradient(135deg, #ff6b6b, #feca57);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 40px;
            font-weight: 700;
            color: white;
            box-shadow: var(--shadow-lg);
        }
        
        .profile-name {
            font-size: 24px;
            font-weight: 700;
            margin-bottom: 4px;
        }
        
        .profile-role {
            font-size: 14px;
            opacity: 0.9;
            margin-bottom: 16px;
        }
        
        .profile-stats {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin-top: 20px;
        }
        
        .profile-stat {
            text-align: center;
        }
        
        .profile-stat-value {
            font-size: 24px;
            font-weight: 700;
            margin-bottom: 4px;
        }
        
        .profile-stat-label {
            font-size: 12px;
            opacity: 0.8;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .profile-body {
            padding: 24px;
            overflow-y: auto;
            max-height: 400px;
        }
        
        .profile-section {
            margin-bottom: 24px;
        }
        
        .section-title {
            font-size: 15px;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 12px;
            padding-bottom: 8px;
            border-bottom: 1px solid var(--border-color);
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .profile-info {
            font-size: 14px;
            color: var(--text-secondary);
            line-height: 1.6;
        }
        
        .profile-info div {
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .profile-actions {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 12px;
            margin-top: 16px;
        }
        
        .profile-action {
            padding: 12px;
            background: var(--bg-input);
            border: 1px solid var(--border-color);
            border-radius: var(--radius-md);
            text-align: center;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
        }
        
        .profile-action:hover {
            background: var(--bg-hover);
            border-color: var(--primary);
            transform: translateY(-2px);
            box-shadow: var(--shadow-sm);
        }
        
        .action-icon {
            font-size: 20px;
        }
        
        .action-text {
            font-size: 12px;
            font-weight: 500;
            color: var(--text-primary);
        }
        
        /* √ñZEL SOHBET MODAL */
        .private-modal {
            width: 700px;
            height: 600px;
            display: flex;
            flex-direction: column;
        }
        
        .private-header {
            padding: 20px;
            background: linear-gradient(135deg, var(--primary), var(--purple));
            color: white;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .private-user {
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .private-avatar {
            width: 44px;
            height: 44px;
            border-radius: var(--radius-round);
            background: white;
            color: var(--primary);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 18px;
        }
        
        .private-actions {
            display: flex;
            gap: 8px;
        }
        
        .private-btn {
            padding: 8px 16px;
            background: rgba(255,255,255,0.2);
            border: 1px solid rgba(255,255,255,0.3);
            border-radius: var(--radius-md);
            color: white;
            cursor: pointer;
            font-size: 13px;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 6px;
        }
        
        .private-btn:hover {
            background: rgba(255,255,255,0.3);
        }
        
        .private-messages {
            flex: 1;
            overflow-y: auto;
            padding: 20px;
            background: var(--bg-primary);
        }
        
        .private-input-area {
            padding: 16px 20px;
            border-top: 1px solid var(--border-color);
            background: var(--bg-modal);
        }
        
        /* ADMIN PANEL */
        .admin-modal {
            width: 1000px;
            height: 700px;
            display: flex;
            flex-direction: column;
        }
        
        .admin-header {
            padding: 20px 24px;
            background: linear-gradient(135deg, var(--primary), var(--purple));
            color: white;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .admin-title {
            font-size: 20px;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .admin-stats {
            display: flex;
            gap: 16px;
        }
        
        .admin-stat {
            display: flex;
            align-items: center;
            gap: 6px;
            font-size: 14px;
            background: rgba(255,255,255,0.2);
            padding: 6px 12px;
            border-radius: var(--radius-sm);
        }
        
        .admin-body {
            flex: 1;
            display: flex;
            overflow: hidden;
        }
        
        .admin-sidebar {
            width: 220px;
            background: var(--bg-sidebar);
            border-right: 1px solid var(--border-color);
            padding: 20px 0;
            overflow-y: auto;
        }
        
        .admin-nav-item {
            padding: 12px 20px;
            cursor: pointer;
            transition: var(--transition);
            border-left: 3px solid transparent;
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 14px;
        }
        
        .admin-nav-item:hover {
            background: var(--bg-hover);
        }
        
        .admin-nav-item.active {
            background: var(--primary-light);
            border-left-color: var(--primary);
            color: var(--primary);
            font-weight: 600;
        }
        
        .admin-content {
            flex: 1;
            padding: 24px;
            overflow-y: auto;
        }
        
        .admin-section {
            display: none;
        }
        
        .admin-section.active {
            display: block;
        }
        
        .admin-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 16px;
        }
        
        .admin-table th {
            background: var(--bg-secondary);
            padding: 12px;
            text-align: left;
            font-weight: 600;
            color: var(--text-primary);
            border-bottom: 1px solid var(--border-color);
        }
        
        .admin-table td {
            padding: 12px;
            border-bottom: 1px solid var(--border-color);
            vertical-align: middle;
        }
        
        .admin-action-btn {
            padding: 6px 12px;
            font-size: 12px;
            border-radius: var(--radius-sm);
            border: 1px solid var(--border-color);
            background: var(--bg-input);
            cursor: pointer;
            transition: var(--transition);
            margin-right: 4px;
        }
        
        .admin-action-btn:hover {
            background: var(--bg-hover);
            border-color: var(--primary);
            color: var(--primary);
        }
        
        /* Gƒ∞Rƒ∞≈û EKRANI */
        .login-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 10000;
        }
        
        .login-container {
            width: 100%;
            max-width: 400px;
            padding: 40px;
            background: rgba(255,255,255,0.95);
            border-radius: var(--radius-xl);
            box-shadow: var(--shadow-xl);
            backdrop-filter: blur(10px);
        }
        
        .dark-mode .login-container {
            background: rgba(26, 26, 26, 0.95);
        }
        
        .login-title {
            font-size: 32px;
            font-weight: 800;
            color: var(--text-primary);
            text-align: center;
            margin-bottom: 8px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        .login-subtitle {
            font-size: 14px;
            color: var(--text-light);
            text-align: center;
            margin-bottom: 32px;
        }
        
        .login-input {
            width: 100%;
            padding: 14px 16px;
            margin-bottom: 16px;
            background: var(--bg-input);
            border: 1px solid var(--border-color);
            border-radius: var(--radius-md);
            color: var(--text-primary);
            font-size: 14px;
            outline: none;
            transition: var(--transition);
        }
        
        .login-input:focus {
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(24, 144, 255, 0.1);
        }
        
        .login-btn {
            width: 100%;
            padding: 14px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            border-radius: var(--radius-md);
            font-size: 15px;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            margin-top: 8px;
        }
        
        .login-btn:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
        }
        
        .login-info {
            margin-top: 24px;
            padding: 16px;
            background: var(--bg-secondary);
            border-radius: var(--radius-md);
            font-size: 13px;
            color: var(--text-light);
            line-height: 1.5;
        }
        
        .login-error {
            color: var(--danger);
            margin-top: 16px;
            font-size: 13px;
            text-align: center;
            padding: 12px;
            background: rgba(255, 77, 79, 0.1);
            border-radius: var(--radius-sm);
            display: none;
        }
        
        /* SCROLLBAR */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }
        
        ::-webkit-scrollbar-track {
            background: transparent;
        }
        
        ::-webkit-scrollbar-thumb {
            background: var(--border-color);
            border-radius: 4px;
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: var(--text-light);
        }
        
        /* UTILITY */
        .hidden {
            display: none !important;
        }
        
        .text-center {
            text-align: center;
        }
        
        .text-muted {
            color: var(--text-muted);
        }
        
        .text-danger {
            color: var(--danger);
        }
        
        .text-success {
            color: var(--success);
        }
        
        .text-warning {
            color: var(--warning);
        }
    </style>
</head>
<body>
    <!-- Gƒ∞Rƒ∞≈û EKRANI -->
    <div class="login-screen" id="loginScreen">
        <div class="login-container">
            <div class="login-title">POPBOX ELITE</div>
            <div class="login-subtitle">Profesyonel IRC Tabanlƒ± Chat Platformu</div>
            
            <input type="text" id="loginNick" class="login-input" placeholder="Kullanƒ±cƒ± adƒ±nƒ±z" autocomplete="off" autofocus>
            <input type="password" id="loginPassword" class="login-input" placeholder="≈ûifre (yetkili giri≈üi i√ßin)" autocomplete="off">
            
            <button class="login-btn" onclick="login()">Giri≈ü Yap</button>
            
            <div class="login-info">
                ‚Ä¢ Sistem Owner: MateKy (≈üifre: kumsal07@)<br>
                ‚Ä¢ Admin/Co-Admin/Operator ≈üifre ile giri≈ü yapar<br>
                ‚Ä¢ Normal kullanƒ±cƒ±lar sadece nick ile girebilir<br>
                ‚Ä¢ /help yazarak IRC komutlarƒ±nƒ± g√∂rebilirsiniz
            </div>
            
            <div class="login-error" id="loginError"></div>
        </div>
    </div>
    
    <!-- PROFƒ∞L MODAL -->
    <div class="modal-overlay" id="profileModal">
        <div class="modal profile-modal">
            <!-- Profil i√ßeriƒüi dinamik olarak eklenecek -->
        </div>
    </div>
    
    <!-- √ñZEL SOHBET MODAL -->
    <div class="modal-overlay" id="privateChatModal">
        <div class="modal private-modal">
            <!-- √ñzel sohbet i√ßeriƒüi dinamik olarak eklenecek -->
        </div>
    </div>
    
    <!-- ADMIN PANEL -->
    <div class="modal-overlay" id="adminModal">
        <div class="modal admin-modal">
            <!-- Admin panel i√ßeriƒüi dinamik olarak eklenecek -->
        </div>
    </div>
    
    <!-- ANA UYGULAMA -->
    <div class="app-container" id="appContainer" style="display: none;">
        <!-- SOL Sƒ∞DEBAR - KANALLAR -->
        <div class="channels-sidebar">
            <div class="logo">PE</div>
            
            <div class="channel-list" id="channelList">
                <!-- Kanallar dinamik olarak eklenecek -->
            </div>
            
            <div class="channel-item" onclick="createChannel()" title="Yeni Kanal" style="margin-top: auto;">
                +
            </div>
        </div>
        
        <!-- ANA ƒ∞√áERƒ∞K -->
        <div class="main-content">
            <!-- STORY BAR -->
            <div class="story-bar" id="storyBar">
                <!-- Story'ler dinamik olarak eklenecek -->
            </div>
            
            <!-- HEADER -->
            <div class="header">
                <div class="channel-info">
                    <div class="channel-icon" id="currentChannelIcon">#</div>
                    <div>
                        <div class="channel-name" id="currentChannelName">#Genel</div>
                        <div class="channel-topic" id="currentChannelTopic">Ho≈ü geldiniz! /help komutlarƒ± g√∂sterir</div>
                    </div>
                </div>
                
                <div class="header-actions">
                    <button class="icon-btn" onclick="toggleTheme()" title="Tema Deƒüi≈ütir">
                        üåô
                    </button>
                    <button class="icon-btn" onclick="openProfile(currentUser.nick)" title="Profilim">
                        üë§
                    </button>
                    <button class="icon-btn" onclick="openAdminPanel()" id="adminBtn" style="display: none;" title="Y√∂netim Paneli">
                        ‚ö°
                        <span class="notification-badge" id="adminBadge">0</span>
                    </button>
                    <button class="icon-btn" onclick="toggleNotifications()" title="Bildirimler">
                        üîî
                        <span class="notification-badge" id="notificationBadge">0</span>
                    </button>
                </div>
            </div>
            
            <!-- SOHBET ALANI -->
            <div class="chat-container">
                <!-- SOL PANEL - VIDEO/STREAM -->
                <div class="video-panel">
                    <div class="video-header">
                        <div class="video-title">
                            üé• Canlƒ± Yayƒ±nlar
                            <span style="font-size: 12px; color: var(--text-light); margin-left: auto;">3 aktif</span>
                        </div>
                        <button class="input-action-btn" onclick="startStream()" style="width: 100%; justify-content: center;">
                            üé¨ Yayƒ±n Ba≈ülat
                        </button>
                    </div>
                    
                    <div class="video-container" id="videoContainer">
                        <!-- Videolar dinamik olarak eklenecek -->
                    </div>
                </div>
                
                <!-- ORTA PANEL - SOHBET -->
                <div class="chat-messages">
                    <div class="messages-container" id="messagesContainer">
                        <!-- Mesajlar dinamik olarak eklenecek -->
                    </div>
                    
                    <div class="typing-indicator" id="typingIndicator" style="display: none;">
                        <div class="typing-dots">
                            <div class="typing-dot"></div>
                            <div class="typing-dot"></div>
                            <div class="typing-dot"></div>
                        </div>
                        <span id="typingUsers"></span> yazƒ±yor...
                    </div>
                    
                    <div class="chat-input-area">
                        <div class="input-actions">
                            <button class="input-action-btn" onclick="showEmojiPicker()">
                                üòÄ Emoji
                            </button>
                            <button class="input-action-btn" onclick="attachFile()">
                                üìé Dosya
                            </button>
                            <button class="input-action-btn" onclick="showCommandHelp()">
                                / Komutlar
                            </button>
                            <button class="input-action-btn" onclick="clearChat()" id="clearBtn" style="display: none;">
                                üóëÔ∏è Temizle
                            </button>
                        </div>
                        
                        <div class="input-container">
                            <textarea 
                                id="messageInput" 
                                class="chat-input" 
                                placeholder="Mesajƒ±nƒ±zƒ± yazƒ±n... (IRC komutlarƒ± i√ßin / kullanƒ±n)"
                                rows="1"
                                oninput="autoResize(this)"
                                onkeydown="handleKeyDown(event)"
                                onfocus="userStartedTyping()"
                                onblur="userStoppedTyping()"
                            ></textarea>
                            <button class="send-btn" onclick="sendMessage()">
                                ‚û§
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- SAƒû PANEL - ONLINE Lƒ∞STESƒ∞ -->
                <div class="right-sidebar">
                    <div class="users-header">
                        <div class="users-search">
                            <input type="text" class="search-input" placeholder="Kullanƒ±cƒ± ara..." id="userSearch" oninput="filterUsers()">
                            <span class="search-icon">üîç</span>
                        </div>
                    </div>
                    
                    <div class="users-list" id="usersList">
                        <!-- Kullanƒ±cƒ±lar dinamik olarak eklenecek -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // ========== Sƒ∞STEM KONFƒ∞G√úRASYONU ==========
        const CONFIG = {
            OWNER_PASSWORD: 'kumsal07@',
            ADMIN_PASSWORD: 'admin123',
            COADMIN_PASSWORD: 'coadmin123',
            OPERATOR_PASSWORD: 'operator123',
            
            ROLES: {
                OWNER: 'owner',
                ADMIN: 'admin',
                COADMIN: 'coadmin',
                OPERATOR: 'operator',
                VIP: 'vip',
                USER: 'user',
                BOT: 'bot'
            },
            
            PERMISSIONS: {
                OWNER: ['all'],
                ADMIN: ['clear', 'kick', 'mute', 'ban', 'op', 'view_reports', 'manage_stories', 'manage_channels', 'view_logs'],
                COADMIN: ['clear', 'kick', 'mute', 'view_reports', 'manage_stories'],
                OPERATOR: ['clear', 'mute'],
                VIP: [],
                USER: [],
                BOT: ['auto_moderate']
            },
            
            CHANNELS: {
                'general': { name: '#Genel', icon: 'üí¨', topic: 'Ho≈ü geldiniz! /help komutlarƒ± g√∂sterir' },
                'random': { name: '#Rastgele', icon: 'üé≤', topic: 'Serbest sohbet' },
                'help': { name: '#Yardƒ±m', icon: '‚ùì', topic: 'IRC komutlarƒ± ve yardƒ±m' },
                'gaming': { name: '#Oyun', icon: 'üéÆ', topic: 'Oyun sohbeti' },
                'music': { name: '#M√ºzik', icon: 'üéµ', topic: 'M√ºzik payla≈üƒ±mƒ±' }
            },
            
            BOT: {
                NAME: 'MATE',
                AVATAR: 'ü§ñ',
                COLOR: '#13c2c2'
            }
        };
        
        // ========== VERƒ∞ YAPILARI ==========
        let currentUser = null;
        let currentChannel = 'general';
        let activePrivateChat = null;
        let users = {};
        let channels = {};
        let privateChats = {};
        let stories = [];
        let videos = [];
        let notifications = [];
        let reports = [];
        let typingUsers = {};
        let following = {};
        let blocked = {};
        let unreadMessages = {};
        
        // ========== Sƒ∞STEM BOTU MATE ==========
        const BOT_MATE = {
            nick: CONFIG.BOT.NAME,
            role: CONFIG.ROLES.BOT,
            avatar: CONFIG.BOT.AVATAR,
            color: CONFIG.BOT.COLOR,
            isOnline: true,
            owner: null,
            
            sendMessage: function(channel, text) {
                const message = {
                    id: Date.now(),
                    type: 'message',
                    sender: this.nick,
                    text: text,
                    time: new Date(),
                    role: this.role,
                    avatar: this.avatar,
                    color: this.color,
                    channel: channel
                };
                
                this.addToChannel(channel, message);
                this.updateUI(channel, message);
            },
            
            sendPrivate: function(target, text) {
                const message = {
                    id: Date.now(),
                    type: 'private',
                    sender: this.nick,
                    text: text,
                    time: new Date(),
                    role: this.role,
                    avatar: this.avatar,
                    color: this.color
                };
                
                const chatId = [this.nick, target].sort().join('_');
                if (!privateChats[chatId]) {
                    privateChats[chatId] = {
                        users: [this.nick, target],
                        messages: []
                    };
                }
                
                privateChats[chatId].messages.push(message);
                
                // Bildirim g√∂nder
                if (users[target]) {
                    addNotification('bot', `${this.nick}: ${text.substring(0, 50)}...`);
                }
            },
            
            addToChannel: function(channelId, message) {
                if (!channels[channelId]) return;
                channels[channelId].messages.push(message);
                
                // Okunmamƒ±≈ü mesaj sayƒ±sƒ±nƒ± g√ºncelle
                if (channelId !== currentChannel) {
                    unreadMessages[channelId] = (unreadMessages[channelId] || 0) + 1;
                    updateChannelBadges();
                }
            },
            
            updateUI: function(channelId, message) {
                if (channelId === currentChannel) {
                    addMessageToUI(message);
                }
            },
            
            moderate: function(message) {
                // Otomatik moderasyon
                const bannedWords = ['k√ºf√ºr', 'hakaret', 'spam', 'reklam'];
                for (let word of bannedWords) {
                    if (message.text.toLowerCase().includes(word)) {
                        this.sendMessage(message.channel || currentChannel, `‚ö†Ô∏è Moderasyon: "${word}" kelimesi tespit edildi!`);
                        return false;
                    }
                }
                return true;
            },
            
            executeCommand: function(command, args) {
                switch(command) {
                    case 'stats':
                        const onlineCount = Object.values(users).filter(u => u.isOnline).length;
                        this.sendMessage(currentChannel, 
                            `üìä Sistem ƒ∞statistikleri:\n` +
                            `‚Ä¢ √áevrimi√ßi: ${onlineCount}\n` +
                            `‚Ä¢ Toplam Kullanƒ±cƒ±: ${Object.keys(users).length}\n` +
                            `‚Ä¢ Kanallar: ${Object.keys(channels).length}\n` +
                            `‚Ä¢ Story'ler: ${stories.length}\n` +
                            `‚Ä¢ Canlƒ± Yayƒ±n: ${videos.length}`
                        );
                        break;
                        
                    case 'cleanup':
                        // 1 g√ºnden eski mesajlarƒ± temizle
                        let cleaned = 0;
                        const oneDayAgo = Date.now() - 24 * 60 * 60 * 1000;
                        
                        Object.values(channels).forEach(channel => {
                            const oldCount = channel.messages.length;
                            channel.messages = channel.messages.filter(msg => 
                                msg.time.getTime() > oneDayAgo
                            );
                            cleaned += oldCount - channel.messages.length;
                        });
                        
                        this.sendMessage(currentChannel, `üßπ ${cleaned} eski mesaj temizlendi.`);
                        break;
                        
                    case 'alert':
                        if (args.length > 0) {
                            const alertMsg = args.join(' ');
                            Object.keys(channels).forEach(channelId => {
                                this.sendMessage(channelId, `üö® Sƒ∞STEM UYARISI: ${alertMsg}`);
                            });
                        }
                        break;
                }
            }
        };
        
        // ========== Gƒ∞Rƒ∞≈û Sƒ∞STEMƒ∞ ==========
        function login() {
            const nick = document.getElementById('loginNick').value.trim();
            const password = document.getElementById('loginPassword').value;
            const errorDiv = document.getElementById('loginError');
            
            errorDiv.style.display = 'none';
            errorDiv.textContent = '';
            
            if (!nick) {
                showError('Kullanƒ±cƒ± adƒ± gereklidir');
                return;
            }
            
            if (nick.length < 2 || nick.length > 20) {
                showError('Kullanƒ±cƒ± adƒ± 2-20 karakter arasƒ± olmalƒ±dƒ±r');
                return;
            }
            
            // Yetki kontrol√º
            let userRole = CONFIG.ROLES.USER;
            let isAuthorized = false;
            
            // Owner kontrol√º
            if (nick.toLowerCase() === 'mateky') {
                if (password === CONFIG.OWNER_PASSWORD) {
                    userRole = CONFIG.ROLES.OWNER;
                    isAuthorized = true;
                    BOT_MATE.owner = nick;
                } else {
                    showError('Ge√ßersiz owner ≈üifresi');
                    return;
                }
            }
            // Admin kontrol√º
            else if (nick.toLowerCase() === 'admin') {
                if (password === CONFIG.ADMIN_PASSWORD) {
                    userRole = CONFIG.ROLES.ADMIN;
                    isAuthorized = true;
                } else {
                    showError('Ge√ßersiz admin ≈üifresi');
                    return;
                }
            }
            // Co-Admin kontrol√º
            else if (nick.toLowerCase() === 'coadmin') {
                if (password === CONFIG.COADMIN_PASSWORD) {
                    userRole = CONFIG.ROLES.COADMIN;
                    isAuthorized = true;
                } else {
                    showError('Ge√ßersiz co-admin ≈üifresi');
                    return;
                }
            }
            // Operator kontrol√º
            else if (nick.toLowerCase() === 'operator') {
                if (password === CONFIG.OPERATOR_PASSWORD) {
                    userRole = CONFIG.ROLES.OPERATOR;
                    isAuthorized = true;
                } else {
                    showError('Ge√ßersiz operator ≈üifresi');
                    return;
                }
            }
            // Normal kullanƒ±cƒ±
            else {
                if (password) {
                    showError('Bu nick i√ßin ≈üifre gerekmez');
                    return;
                }
                isAuthorized = true;
            }
            
            // Nick kontrol√º
            if (users[nick] && users[nick].isOnline) {
                showError('Bu nick ≈üu anda √ßevrimi√ßi!');
                return;
            }
            
            // Kullanƒ±cƒ± olu≈ütur
            currentUser = {
                nick: nick,
                role: userRole,
                isOnline: true,
                status: 'online',
                avatar: generateAvatar(nick),
                color: generateColor(nick),
                joinedAt: new Date(),
                lastSeen: new Date(),
                following: new Set(),
                followers: new Set(),
                storyCount: 0,
                messageCount: 0,
                isBanned: false,
                isMuted: false,
                channels: new Set(['general'])
            };
            
            // Kullanƒ±cƒ±yƒ± kaydet
            users[nick] = currentUser;
            
            // Bot'u kaydet
            users[BOT_MATE.nick] = BOT_MATE;
            
            // Giri≈ü ba≈üarƒ±lƒ±
            document.getElementById('loginScreen').style.display = 'none';
            document.getElementById('appContainer').style.display = 'flex';
            
            // Sistemi ba≈ülat
            initializeSystem();
            
            // Bot'tan ho≈ü geldin mesajƒ±
            setTimeout(() => {
                BOT_MATE.sendMessage('general', 
                    `üëã Ho≈ü geldin ${currentUser.nick}!\n` +
                    `Ben ${BOT_MATE.nick}, sistem botuyum.\n` +
                    `IRC komutlarƒ± i√ßin /help yazabilirsin.\n` +
                    `Kullanƒ±cƒ± listesi i√ßin /list, √∂zel mesaj i√ßin /msg [nick] [mesaj]`
                );
            }, 500);
            
            function showError(msg) {
                errorDiv.textContent = msg;
                errorDiv.style.display = 'block';
            }
        }
        
        // ========== Sƒ∞STEM BA≈ûLATMA ==========
        function initializeSystem() {
            // Kanallarƒ± ba≈ülat
            initializeChannels();
            
            // √ñrnek veriler olu≈ütur
            createSampleData();
            
            // UI'yi g√ºncelle
            updateChannelsList();
            loadChannel(currentChannel);
            updateUsersList();
            updateStoryBar();
            updateVideoList();
            updatePermissionButtons();
            updateNotificationBadge();
            
            // E≈ü zamanlƒ± mesaj sim√ºlasyonu
            startMessageSimulation();
            
            // Online durumu g√ºncelle
            updateOnlineStatus();
        }
        
        function initializeChannels() {
            for (const [id, config] of Object.entries(CONFIG.CHANNELS)) {
                channels[id] = {
                    id: id,
                    name: config.name,
                    icon: config.icon,
                    topic: config.topic,
                    users: new Set([currentUser.nick, BOT_MATE.nick]),
                    messages: [],
                    settings: {
                        allowMedia: true,
                        slowMode: false,
                        readOnly: false
                    }
                };
            }
        }
        
        function createSampleData() {
            // √ñrnek kullanƒ±cƒ±lar
            const sampleUsers = [
                { nick: 'Ahmet', role: CONFIG.ROLES.USER, status: 'online' },
                { nick: 'Ay≈üe', role: CONFIG.ROLES.VIP, status: 'online' },
                { nick: 'Mehmet', role: CONFIG.ROLES.USER, status: 'away' },
                { nick: 'Zeynep', role: CONFIG.ROLES.ADMIN, status: 'online' },
                { nick: 'Can', role: CONFIG.ROLES.OPERATOR, status: 'online' },
                { nick: 'Elif', role: CONFIG.ROLES.USER, status: 'busy' },
                { nick: 'Kerem', role: CONFIG.ROLES.COADMIN, status: 'online' }
            ];
            
            sampleUsers.forEach(user => {
                if (!users[user.nick]) {
                    users[user.nick] = {
                        nick: user.nick,
                        role: user.role,
                        isOnline: true,
                        status: user.status,
                        avatar: generateAvatar(user.nick),
                        color: generateColor(user.nick),
                        joinedAt: new Date(Date.now() - Math.random() * 86400000),
                        lastSeen: new Date(),
                        following: new Set(),
                        followers: new Set(),
                        storyCount: Math.floor(Math.random() * 5),
                        messageCount: Math.floor(Math.random() * 100),
                        isBanned: false,
                        isMuted: false,
                        channels: new Set(['general', 'random'])
                    };
                    
                    // Kanallara ekle
                    channels.general.users.add(user.nick);
                    channels.random.users.add(user.nick);
                    
                    // Takiple≈üme √∂rnekleri
                    if (user.nick === 'Ahmet') {
                        users[user.nick].following.add('Ay≈üe');
                        users['Ay≈üe'].followers.add('Ahmet');
                    }
                }
            });
            
            // √ñrnek story'ler
            stories = [
                {
                    id: 'story1',
                    user: 'Ahmet',
                    type: 'image',
                    url: 'https://picsum.photos/400/600?random=1',
                    likes: 15,
                    views: 42,
                    timestamp: new Date(Date.now() - 3600000),
                    seenBy: new Set()
                },
                {
                    id: 'story2',
                    user: 'Ay≈üe',
                    type: 'image',
                    url: 'https://picsum.photos/400/600?random=2',
                    likes: 23,
                    views: 67,
                    timestamp: new Date(Date.now() - 7200000),
                    seenBy: new Set()
                },
                {
                    id: 'story3',
                    user: 'Zeynep',
                    type: 'image',
                    url: 'https://picsum.photos/400/600?random=3',
                    likes: 8,
                    views: 31,
                    timestamp: new Date(Date.now() - 10800000),
                    seenBy: new Set()
                }
            ];
            
            // √ñrnek videolar
            videos = [
                {
                    id: 'video1',
                    user: 'Ahmet',
                    title: 'Counter-Strike Canlƒ±',
                    thumbnail: 'https://picsum.photos/320/180?random=4',
                    viewers: 42,
                    isLive: true,
                    startedAt: new Date(Date.now() - 1800000)
                },
                {
                    id: 'video2',
                    user: 'Zeynep',
                    title: 'M√ºzik Prod√ºksiyon',
                    thumbnail: 'https://picsum.photos/320/180?random=5',
                    viewers: 128,
                    isLive: true,
                    startedAt: new Date(Date.now() - 3600000)
                },
                {
                    id: 'video3',
                    user: 'Can',
                    title: 'Programlama Dersi',
                    thumbnail: 'https://picsum.photos/320/180?random=6',
                    viewers: 56,
                    isLive: false,
                    startedAt: new Date(Date.now() - 86400000)
                }
            ];
            
            // √ñrnek bildirimler
            notifications = [
                { id: 'notif1', type: 'follow', user: 'Ahmet', message: 'seni takip etti', time: new Date(Date.now() - 1800000), read: false },
                { id: 'notif2', type: 'like', user: 'Ay≈üe', message: 'story\'ini beƒüendi', time: new Date(Date.now() - 3600000), read: false },
                { id: 'notif3', type: 'mention', user: 'Mehmet', message: 'senden bahsetti', time: new Date(Date.now() - 5400000), read: true }
            ];
            
            // √ñrnek raporlar
            reports = [
                { id: 'report1', type: 'message', user: 'Spammer', reporter: 'Ahmet', reason: 'Spam mesaj', status: 'pending', time: new Date() }
            ];
        }
        
        // ========== KANAL Sƒ∞STEMƒ∞ ==========
        function updateChannelsList() {
            const container = document.getElementById('channelList');
            container.innerHTML = '';
            
            Object.entries(channels).forEach(([id, channel]) => {
                const item = document.createElement('div');
                item.className = `channel-item ${currentChannel === id ? 'active' : ''}`;
                item.title = `${channel.name}\n${channel.topic}`;
                item.innerHTML = channel.icon;
                
                // Okunmamƒ±≈ü mesaj g√∂stergesi
                if (unreadMessages[id] > 0) {
                    const indicator = document.createElement('div');
                    indicator.className = 'unread-indicator';
                    indicator.title = `${unreadMessages[id]} yeni mesaj`;
                    item.appendChild(indicator);
                }
                
                item.onclick = () => switchChannel(id);
                container.appendChild(item);
            });
        }
        
        function switchChannel(channelId) {
            if (currentChannel === channelId) return;
            
            // Okunmamƒ±≈ü mesajlarƒ± sƒ±fƒ±rla
            unreadMessages[channelId] = 0;
            updateChannelBadges();
            
            // Kanal deƒüi≈ütir
            currentChannel = channelId;
            const channel = channels[channelId];
            
            // UI g√ºncelle
            document.getElementById('currentChannelIcon').textContent = channel.icon;
            document.getElementById('currentChannelName').textContent = channel.name;
            document.getElementById('currentChannelTopic').textContent = channel.topic;
            
            // Kanal listesini g√ºncelle
            updateChannelsList();
            
            // Mesajlarƒ± y√ºkle
            loadChannel(channelId);
            
            // Kullanƒ±cƒ± listesini g√ºncelle
            updateUsersList();
        }
        
        function loadChannel(channelId) {
            const container = document.getElementById('messagesContainer');
            container.innerHTML = '';
            
            // Tarih ayracƒ±
            addDateSeparator(new Date());
            
            // Mesajlarƒ± y√ºkle
            const messages = channels[channelId].messages;
            
            if (messages.length === 0) {
                // Ho≈ü geldin mesajƒ±
                const welcomeMsg = {
                    id: Date.now(),
                    type: 'system',
                    sender: 'Sistem',
                    text: `${channels[channelId].name} kanalƒ±na ho≈ü geldiniz!\nIRC komutlarƒ± i√ßin /help yazabilirsiniz.`,
                    time: new Date(),
                    color: CONFIG.BOT.COLOR
                };
                messages.push(welcomeMsg);
                addMessageToUI(welcomeMsg);
            } else {
                messages.forEach(msg => addMessageToUI(msg));
            }
            
            // En alta kaydƒ±r
            scrollToBottom();
        }
        
        function createChannel() {
            if (!hasPermission('manage_channels')) {
                addSystemMessage('Yeni kanal olu≈üturma yetkiniz yok!');
                return;
            }
            
            const name = prompt('Yeni kanal adƒ± (# ile ba≈ülamalƒ±):');
            if (!name || !name.startsWith('#')) {
                alert('Kanal adƒ± # ile ba≈ülamalƒ±dƒ±r!');
                return;
            }
            
            const channelId = name.substring(1).toLowerCase();
            if (channels[channelId]) {
                alert('Bu kanal zaten var!');
                return;
            }
            
            const topic = prompt('Kanal konusu:') || 'Yeni kanal';
            const icon = prompt('Kanal emojisi:', 'üí¨');
            
            channels[channelId] = {
                id: channelId,
                name: name,
                icon: icon || 'üí¨',
                topic: topic,
                users: new Set([currentUser.nick]),
                messages: [],
                settings: {
                    allowMedia: true,
                    slowMode: false,
                    readOnly: false
                }
            };
            
            currentUser.channels.add(channelId);
            switchChannel(channelId);
            
            BOT_MATE.sendMessage(channelId, `üì¢ Yeni kanal olu≈üturuldu: ${name}\n${topic}`);
        }
        
        // ========== MESAJ Sƒ∞STEMƒ∞ ==========
        function sendMessage() {
            if (!currentUser) return;
            
            const input = document.getElementById('messageInput');
            const text = input.value.trim();
            
            if (!text) return;
            
            // Bot moderasyonu
            if (!BOT_MATE.moderate({ text: text, sender: currentUser.nick, channel: currentChannel })) {
                input.value = '';
                autoResize(input);
                return;
            }
            
            if (text.startsWith('/')) {
                handleCommand(text);
            } else {
                // Normal mesaj
                const message = {
                    id: Date.now(),
                    type: 'message',
                    sender: currentUser.nick,
                    text: text,
                    time: new Date(),
                    role: currentUser.role,
                    avatar: currentUser.avatar,
                    color: currentUser.color,
                    channel: currentChannel
                };
                
                // Kanal mesajlarƒ±na ekle
                channels[currentChannel].messages.push(message);
                
                // UI'ya ekle
                addMessageToUI(message);
                
                // Mesaj sayƒ±sƒ±nƒ± g√ºncelle
                currentUser.messageCount = (currentUser.messageCount || 0) + 1;
                
                // E≈ü zamanlƒ± olarak diƒüer kullanƒ±cƒ±lara g√∂nder
                broadcastMessage(message);
                
                // @mention kontrol√º
                checkMentions(text);
            }
            
            input.value = '';
            autoResize(input);
            scrollToBottom();
        }
        
        function broadcastMessage(message) {
            // T√ºm online kullanƒ±cƒ±lara mesajƒ± ilet
            Object.values(users).forEach(user => {
                if (user.isOnline && user.nick !== currentUser.nick && user.nick !== BOT_MATE.nick) {
                    // Eƒüer kullanƒ±cƒ± bu kanaldaysa
                    if (user.channels && user.channels.has(currentChannel)) {
                        // Mesajƒ± kanalƒ±na ekle
                        if (!channels[currentChannel].users.has(user.nick)) {
                            channels[currentChannel].users.add(user.nick);
                        }
                        
                        // Okunmamƒ±≈ü mesaj sayƒ±sƒ±nƒ± artƒ±r
                        if (user.nick !== currentUser.nick) {
                            unreadMessages[currentChannel] = (unreadMessages[currentChannel] || 0) + 1;
                            updateChannelBadges();
                        }
                    }
                }
            });
        }
        
        function addMessageToUI(message) {
            const container = document.getElementById('messagesContainer');
            
            // Eƒüer son mesaj bug√ºn deƒüilse tarih ayracƒ± ekle
            const lastMessage = container.lastElementChild;
            if (!lastMessage || !lastMessage.classList.contains('message-date')) {
                const lastDate = lastMessage ? lastMessage.dataset.date : null;
                const messageDate = formatDate(message.time);
                if (lastDate !== messageDate) {
                    addDateSeparator(message.time);
                }
            }
            
            const messageDiv = document.createElement('div');
            messageDiv.className = 'message';
            if (message.text.includes(`@${currentUser.nick}`)) {
                messageDiv.classList.add('mentioned');
            }
            messageDiv.dataset.date = formatDate(message.time);
            
            // Avatar
            const avatar = document.createElement('div');
            avatar.className = 'message-avatar';
            avatar.style.background = message.color || generateColor(message.sender);
            avatar.textContent = message.avatar || message.sender.charAt(0).toUpperCase();
            avatar.title = message.sender;
            avatar.onclick = () => openProfile(message.sender);
            messageDiv.appendChild(avatar);
            
            // ƒ∞√ßerik
            const contentDiv = document.createElement('div');
            contentDiv.className = 'message-content';
            
            // Ba≈ülƒ±k
            const headerDiv = document.createElement('div');
            headerDiv.className = 'message-header';
            
            // G√∂nderen
            const senderSpan = document.createElement('span');
            senderSpan.className = 'message-sender';
            senderSpan.textContent = message.sender;
            senderSpan.onclick = () => openProfile(message.sender);
            headerDiv.appendChild(senderSpan);
            
            // Yetki rozeti
            if (message.role && message.role !== CONFIG.ROLES.USER) {
                const badge = document.createElement('span');
                badge.className = `message-badge badge-${message.role}`;
                badge.textContent = getRoleBadge(message.role);
                headerDiv.appendChild(badge);
            }
            
            // Zaman
            const timeSpan = document.createElement('span');
            timeSpan.className = 'message-time';
            timeSpan.textContent = formatTime(message.time);
            headerDiv.appendChild(timeSpan);
            
            contentDiv.appendChild(headerDiv);
            
            // Mesaj metni
            const textDiv = document.createElement('div');
            textDiv.className = 'message-text';
            textDiv.innerHTML = formatMessageText(message.text);
            contentDiv.appendChild(textDiv);
            
            // Mesaj aksiyonlarƒ±
            if (message.type === 'message') {
                const actionsDiv = document.createElement('div');
                actionsDiv.className = 'message-actions';
                
                const replyBtn = document.createElement('button');
                replyBtn.className = 'message-action-btn';
                replyBtn.innerHTML = '‚Ü©Ô∏è Yanƒ±tla';
                replyBtn.onclick = () => replyToMessage(message);
                actionsDiv.appendChild(replyBtn);
                
                const privateBtn = document.createElement('button');
                privateBtn.className = 'message-action-btn';
                privateBtn.innerHTML = 'üîí √ñzel';
                privateBtn.onclick = () => openPrivateChat(message.sender);
                actionsDiv.appendChild(privateBtn);
                
                if (hasPermission('view_reports')) {
                    const reportBtn = document.createElement('button');
                    reportBtn.className = 'message-action-btn';
                    reportBtn.innerHTML = '‚ö†Ô∏è ≈ûikayet';
                    reportBtn.onclick = () => reportMessage(message);
                    actionsDiv.appendChild(reportBtn);
                }
                
                contentDiv.appendChild(actionsDiv);
            }
            
            messageDiv.appendChild(contentDiv);
            container.appendChild(messageDiv);
        }
        
        function addSystemMessage(text) {
            const message = {
                id: Date.now(),
                type: 'system',
                sender: 'Sistem',
                text: text,
                time: new Date(),
                color: CONFIG.BOT.COLOR
            };
            
            channels[currentChannel].messages.push(message);
            addMessageToUI(message);
        }
        
        function addDateSeparator(date) {
            const container = document.getElementById('messagesContainer');
            const separator = document.createElement('div');
            separator.className = 'message-date';
            separator.innerHTML = `<span>${formatDate(date)}</span>`;
            container.appendChild(separator);
        }
        
        function autoResize(textarea) {
            textarea.style.height = 'auto';
            textarea.style.height = Math.min(textarea.scrollHeight, 120) + 'px';
        }
        
        function handleKeyDown(e) {
            if (e.key === 'Enter' && !e.shiftKey) {
                e.preventDefault();
                sendMessage();
            }
        }
        
        function scrollToBottom() {
            const container = document.getElementById('messagesContainer');
            container.scrollTop = container.scrollHeight;
        }
        
        // ========== E≈û ZAMANLI SOHBET Sƒ∞M√úLASYONU ==========
        function startMessageSimulation() {
            // Rastgele mesajlar g√∂nder
            setInterval(() => {
                if (Math.random() > 0.7) { // %30 ≈üans
                    const onlineUsers = Object.values(users).filter(u => 
                        u.isOnline && 
                        u.nick !== currentUser.nick && 
                        u.nick !== BOT_MATE.nick &&
                        channels[currentChannel].users.has(u.nick)
                    );
                    
                    if (onlineUsers.length > 0) {
                        const user = onlineUsers[Math.floor(Math.random() * onlineUsers.length)];
                        const messages = [
                            "Selam herkese!",
                            "Nasƒ±lsƒ±nƒ±z?",
                            "Bug√ºn hava √ßok g√ºzel",
                            "Yeni bir ≈üey √∂ƒürendim",
                            "Bu kanal √ßok aktif",
                            "IRC komutlarƒ±nƒ± biliyor musunuz?",
                            "Popbox Elite harika deƒüil mi?",
                            "Kimler online?"
                        ];
                        
                        const message = {
                            id: Date.now(),
                            type: 'message',
                            sender: user.nick,
                            text: messages[Math.floor(Math.random() * messages.length)],
                            time: new Date(),
                            role: user.role,
                            avatar: user.avatar,
                            color: user.color,
                            channel: currentChannel
                        };
                        
                        channels[currentChannel].messages.push(message);
                        
                        if (currentChannel === message.channel) {
                            addMessageToUI(message);
                            scrollToBottom();
                        }
                    }
                }
            }, 15000); // Her 15 saniyede bir
            
            // Online durumu g√ºncelle
            setInterval(() => {
                updateOnlineStatus();
            }, 30000);
        }
        
        // ========== ONLINE Lƒ∞STESƒ∞ ==========
        function updateUsersList() {
            const container = document.getElementById('usersList');
            const searchTerm = document.getElementById('userSearch').value.toLowerCase();
            
            container.innerHTML = '';
            
            const channelUsers = Array.from(channels[currentChannel].users);
            
            // Online ve offline kullanƒ±cƒ±larƒ± ayƒ±r
            const onlineUsers = [];
            const offlineUsers = [];
            
            channelUsers.forEach(nick => {
                const user = users[nick];
                if (!user) return;
                
                // Arama filtresi
                if (searchTerm && !user.nick.toLowerCase().includes(searchTerm)) {
                    return;
                }
                
                if (user.isOnline) {
                    onlineUsers.push(user);
                } else {
                    offlineUsers.push(user);
                }
            });
            
            // Online kullanƒ±cƒ±larƒ± g√∂ster
            if (onlineUsers.length > 0) {
                const header = document.createElement('div');
                header.style.padding = '8px 20px';
                header.style.fontSize = '12px';
                header.style.color = 'var(--text-light)';
                header.style.fontWeight = '600';
                header.textContent = `üü¢ √áevrimi√ßi (${onlineUsers.length})`;
                container.appendChild(header);
                
                onlineUsers.sort((a, b) => {
                    // √ñnce yetkililer
                    const roleOrder = { owner: 1, admin: 2, coadmin: 3, operator: 4, vip: 5, bot: 6, user: 7 };
                    return roleOrder[a.role] - roleOrder[b.role];
                }).forEach(user => {
                    container.appendChild(createUserItem(user));
                });
            }
            
            // Offline kullanƒ±cƒ±larƒ± g√∂ster
            if (offlineUsers.length > 0) {
                const header = document.createElement('div');
                header.style.padding = '8px 20px';
                header.style.fontSize = '12px';
                header.style.color = 'var(--text-light)';
                header.style.fontWeight = '600';
                header.textContent = `‚ö´ √áevrimdƒ±≈üƒ± (${offlineUsers.length})`;
                container.appendChild(header);
                
                offlineUsers.forEach(user => {
                    container.appendChild(createUserItem(user));
                });
            }
        }
        
        function createUserItem(user) {
            const div = document.createElement('div');
            div.className = 'user-item';
            div.onclick = () => openProfile(user.nick);
            div.oncontextmenu = (e) => {
                e.preventDefault();
                showUserContextMenu(e, user);
            };
            
            // Durum
            const status = document.createElement('div');
            status.className = `user-status ${user.status || (user.isOnline ? 'online' : 'offline')}`;
            div.appendChild(status);
            
            // Avatar
            const avatar = document.createElement('div');
            avatar.className = 'user-avatar';
            avatar.style.background = user.color;
            avatar.textContent = user.avatar || user.nick.charAt(0).toUpperCase();
            div.appendChild(avatar);
            
            // Bilgi
            const info = document.createElement('div');
            info.className = 'user-info';
            
            const name = document.createElement('div');
            name.className = 'user-name';
            name.textContent = user.nick;
            
            // Yetki rozeti
            if (user.role && user.role !== CONFIG.ROLES.USER) {
                const badge = document.createElement('span');
                badge.className = `badge-${user.role}`;
                badge.style.fontSize = '9px';
                badge.style.padding = '2px 6px';
                badge.style.borderRadius = '4px';
                badge.textContent = getRoleBadge(user.role);
                name.appendChild(badge);
            }
            
            info.appendChild(name);
            
            const role = document.createElement('div');
            role.className = 'user-role';
            role.textContent = user.isOnline ? '√áevrimi√ßi' : formatRelativeTime(user.lastSeen);
            info.appendChild(role);
            
            div.appendChild(info);
            return div;
        }
        
        function filterUsers() {
            updateUsersList();
        }
        
        function updateOnlineStatus() {
            // Rastgele online/offline durumu deƒüi≈ütir
            Object.values(users).forEach(user => {
                if (user.nick === currentUser.nick || user.nick === BOT_MATE.nick) return;
                
                if (Math.random() > 0.95) { // %5 ≈üans
                    user.isOnline = !user.isOnline;
                    user.lastSeen = new Date();
                    user.status = user.isOnline ? 'online' : 'offline';
                    
                    if (user.isOnline) {
                        addSystemMessage(`${user.nick} √ßevrimi√ßi oldu.`);
                    }
                }
            });
            
            updateUsersList();
        }
        
        // ========== PROFƒ∞L Sƒ∞STEMƒ∞ ==========
        function openProfile(nick) {
            const user = users[nick];
            if (!user) return;
            
            const modal = document.getElementById('profileModal');
            const modalContent = modal.querySelector('.modal') || document.createElement('div');
            modalContent.className = 'modal profile-modal';
            
            modalContent.innerHTML = `
                <div class="profile-header">
                    <button class="profile-close" onclick="closeModal('profileModal')">‚úï</button>
                    <div class="profile-avatar" style="background: ${user.color}">
                        ${user.avatar || user.nick.charAt(0).toUpperCase()}
                    </div>
                    <div class="profile-name">${user.nick}</div>
                    <div class="profile-role">${getRoleName(user.role)}</div>
                    
                    <div class="profile-stats">
                        <div class="profile-stat">
                            <div class="profile-stat-value">${user.following ? user.following.size : 0}</div>
                            <div class="profile-stat-label">TAKƒ∞P</div>
                        </div>
                        <div class="profile-stat">
                            <div class="profile-stat-value">${user.followers ? user.followers.size : 0}</div>
                            <div class="profile-stat-label">TAKƒ∞P√áƒ∞</div>
                        </div>
                        <div class="profile-stat">
                            <div class="profile-stat-value">${user.storyCount || 0}</div>
                            <div class="profile-stat-label">STORY</div>
                        </div>
                        <div class="profile-stat">
                            <div class="profile-stat-value">${user.messageCount || 0}</div>
                            <div class="profile-stat-label">MESAJ</div>
                        </div>
                    </div>
                </div>
                
                <div class="profile-body">
                    <div class="profile-section">
                        <div class="section-title">üìã Bilgiler</div>
                        <div class="profile-info">
                            <div>üìÖ Katƒ±lma: ${user.joinedAt.toLocaleDateString('tr-TR')}</div>
                            <div>üëÅÔ∏è Son g√∂r√ºlme: ${formatRelativeTime(user.lastSeen)}</div>
                            <div>üìä Durum: ${user.isOnline ? 'üü¢ √áevrimi√ßi' : '‚ö´ √áevrimdƒ±≈üƒ±'}</div>
                            <div>üé≠ Rol: ${getRoleName(user.role)}</div>
                        </div>
                    </div>
                    
                    <div class="profile-section">
                        <div class="section-title">‚ö° Hƒ±zlƒ± ƒ∞≈ülemler</div>
                        <div class="profile-actions" id="profileActions">
                            <!-- Dinamik olarak eklenecek -->
                        </div>
                    </div>
                </div>
            `;
            
            // Eƒüer modal zaten yoksa ekle
            if (!modal.querySelector('.modal')) {
                modal.appendChild(modalContent);
            }
            
            // Profil aksiyonlarƒ±nƒ± ekle
            const actionsContainer = modalContent.querySelector('#profileActions');
            const actions = getProfileActions(user);
            actions.forEach(action => {
                const actionDiv = document.createElement('div');
                actionDiv.className = 'profile-action';
                actionDiv.onclick = action.action;
                
                const icon = document.createElement('div');
                icon.className = 'action-icon';
                icon.textContent = action.icon;
                
                const text = document.createElement('div');
                text.className = 'action-text';
                text.textContent = action.text;
                
                actionDiv.appendChild(icon);
                actionDiv.appendChild(text);
                actionsContainer.appendChild(actionDiv);
            });
            
            modal.classList.add('active');
        }
        
        function getProfileActions(user) {
            const actions = [];
            
            if (currentUser.nick === user.nick) {
                // Kendi profili
                actions.push(
                    { icon: 'üé®', text: 'Tema', action: () => { toggleTheme(); closeModal('profileModal'); } },
                    { icon: 'üîî', text: 'Bildirimler', action: () => { showNotifications(); closeModal('profileModal'); } },
                    { icon: 'üì±', text: 'Durum', action: () => changeStatus() },
                    { icon: 'üë•', text: 'Takip√ßiler', action: () => showFollowers(user.nick) },
                    { icon: '‚öôÔ∏è', text: 'Ayarlar', action: () => openSettings() },
                    { icon: 'üìä', text: 'ƒ∞statistik', action: () => showUserStats(user.nick) }
                );
                
                if (hasPermission('view_reports')) {
                    actions.push({ icon: '‚ö°', text: 'Y√∂netim', action: () => { openAdminPanel(); closeModal('profileModal'); } });
                }
            } else {
                // Ba≈üka kullanƒ±cƒ±
                const isFollowing = currentUser.following.has(user.nick);
                const isBlocked = blocked[currentUser.nick]?.has(user.nick);
                
                actions.push(
                    { 
                        icon: isFollowing ? '‚ùå' : '‚ûï', 
                        text: isFollowing ? 'Takibi Bƒ±rak' : 'Takip Et', 
                        action: () => toggleFollow(user.nick) 
                    },
                    { icon: 'üîí', text: '√ñzel Mesaj', action: () => { openPrivateChat(user.nick); closeModal('profileModal'); } },
                    { icon: 'üìä', text: 'ƒ∞statistik', action: () => showUserStats(user.nick) },
                    { 
                        icon: isBlocked ? 'üîì' : 'üö´', 
                        text: isBlocked ? 'Engeli Kaldƒ±r' : 'Engelle', 
                        action: () => toggleBlock(user.nick) 
                    }
                );
                
                if (hasPermission('view_reports')) {
                    actions.push({ icon: '‚ö†Ô∏è', text: '≈ûikayet Et', action: () => reportUser(user.nick) });
                }
                
                if (hasPermission('kick')) {
                    actions.push({ icon: 'üë¢', text: 'Kanaldan At', action: () => kickUser(user.nick) });
                }
            }
            
            return actions;
        }
        
        function closeModal(modalId) {
            document.getElementById(modalId).classList.remove('active');
        }
        
        // ========== √ñZEL SOHBET ==========
        function openPrivateChat(nick) {
            if (nick === currentUser.nick) {
                addSystemMessage('Kendine √∂zel mesaj g√∂nderemezsin!');
                return;
            }
            
            if (blocked[currentUser.nick]?.has(nick)) {
                addSystemMessage(`${nick} kullanƒ±cƒ±sƒ±nƒ± engellediniz!`);
                return;
            }
            
            activePrivateChat = nick;
            const user = users[nick];
            
            const modal = document.getElementById('privateChatModal');
            const modalContent = document.createElement('div');
            modalContent.className = 'modal private-modal';
            
            modalContent.innerHTML = `
                <div class="private-header">
                    <div class="private-user">
                        <div class="private-avatar" style="background: ${user.color}">
                            ${user.avatar || user.nick.charAt(0).toUpperCase()}
                        </div>
                        <div>
                            <div style="font-weight: 700; font-size: 18px;">${user.nick}</div>
                            <div style="font-size: 13px; opacity: 0.9;">${user.isOnline ? 'üü¢ √áevrimi√ßi' : '‚ö´ √áevrimdƒ±≈üƒ±'}</div>
                        </div>
                    </div>
                    <div class="private-actions">
                        <button class="private-btn" onclick="toggleBlock('${nick}')">
                            ${blocked[currentUser.nick]?.has(nick) ? 'üîì Engeli Kaldƒ±r' : 'üö´ Engelle'}
                        </button>
                        <button class="private-btn" onclick="reportUser('${nick}')">
                            ‚ö†Ô∏è ≈ûikayet
                        </button>
                        <button class="profile-close" onclick="closeModal('privateChatModal')">‚úï</button>
                    </div>
                </div>
                
                <div class="private-messages" id="privateMessages">
                    <!-- Mesajlar buraya eklenecek -->
                </div>
                
                <div class="private-input-area">
                    <div style="display: flex; gap: 8px; margin-bottom: 12px;">
                        <button class="input-action-btn" onclick="attachMedia('private')">
                            üìé Dosya
                        </button>
                        <button class="input-action-btn" onclick="attachImage('private')">
                            üñºÔ∏è Resim
                        </button>
                        <button class="input-action-btn" onclick="attachVideo('private')">
                            üé¨ Video
                        </button>
                    </div>
                    <div class="input-container">
                        <textarea 
                            id="privateMessageInput" 
                            class="chat-input" 
                            placeholder="${user.nick}'a mesaj g√∂nder..."
                            rows="2"
                            oninput="autoResize(this)"
                            onkeydown="handlePrivateKeyDown(event, '${nick}')"
                        ></textarea>
                        <button class="send-btn" onclick="sendPrivateMessage('${nick}')">
                            ‚û§
                        </button>
                    </div>
                </div>
            `;
            
            modal.innerHTML = '';
            modal.appendChild(modalContent);
            
            // Mesajlarƒ± y√ºkle
            loadPrivateMessages(nick);
            
            modal.classList.add('active');
            
            // Input'a focus
            setTimeout(() => {
                const input = document.getElementById('privateMessageInput');
                if (input) input.focus();
            }, 100);
        }
        
        function loadPrivateMessages(nick) {
            const container = document.getElementById('privateMessages');
            if (!container) return;
            
            container.innerHTML = '';
            
            const chatId = [currentUser.nick, nick].sort().join('_');
            const chat = privateChats[chatId];
            
            if (!chat || chat.messages.length === 0) {
                const emptyMsg = document.createElement('div');
                emptyMsg.style.textAlign = 'center';
                emptyMsg.style.padding = '40px 20px';
                emptyMsg.style.color = 'var(--text-light)';
                emptyMsg.textContent = `${nick} ile hen√ºz mesajla≈ümadƒ±nƒ±z. ƒ∞lk mesajƒ± g√∂nderin!`;
                container.appendChild(emptyMsg);
                return;
            }
            
            chat.messages.forEach(msg => {
                const msgDiv = document.createElement('div');
                msgDiv.className = 'message';
                msgDiv.style.padding = '8px 12px';
                
                const avatar = document.createElement('div');
                avatar.className = 'message-avatar';
                avatar.style.width = '32px';
                avatar.style.height = '32px';
                avatar.style.fontSize = '14px';
                avatar.style.background = msg.color || generateColor(msg.sender);
                avatar.textContent = msg.sender.charAt(0).toUpperCase();
                msgDiv.appendChild(avatar);
                
                const content = document.createElement('div');
                content.className = 'message-content';
                
                const header = document.createElement('div');
                header.className = 'message-header';
                
                const sender = document.createElement('span');
                sender.className = 'message-sender';
                sender.style.fontSize = '13px';
                sender.textContent = msg.sender;
                header.appendChild(sender);
                
                const time = document.createElement('span');
                time.className = 'message-time';
                time.style.fontSize = '11px';
                time.textContent = formatTime(msg.time);
                header.appendChild(time);
                
                content.appendChild(header);
                
                const text = document.createElement('div');
                text.className = 'message-text';
                text.style.fontSize = '14px';
                text.innerHTML = formatMessageText(msg.text);
                content.appendChild(text);
                
                msgDiv.appendChild(content);
                container.appendChild(msgDiv);
            });
            
            // En alta kaydƒ±r
            container.scrollTop = container.scrollHeight;
        }
        
        function sendPrivateMessage(nick) {
            const input = document.getElementById('privateMessageInput');
            const text = input.value.trim();
            
            if (!text) return;
            
            const message = {
                id: Date.now(),
                type: 'private',
                sender: currentUser.nick,
                text: text,
                time: new Date(),
                role: currentUser.role,
                avatar: currentUser.avatar,
                color: currentUser.color
            };
            
            const chatId = [currentUser.nick, nick].sort().join('_');
            if (!privateChats[chatId]) {
                privateChats[chatId] = {
                    users: [currentUser.nick, nick],
                    messages: []
                };
            }
            
            privateChats[chatId].messages.push(message);
            
            // UI'ya ekle
            const container = document.getElementById('privateMessages');
            if (container.children.length === 1 && container.children[0].textContent.includes('hen√ºz mesajla≈ümadƒ±nƒ±z')) {
                container.innerHTML = '';
            }
            
            const msgDiv = document.createElement('div');
            msgDiv.className = 'message';
            msgDiv.style.padding = '8px 12px';
            
            const avatar = document.createElement('div');
            avatar.className = 'message-avatar';
            avatar.style.width = '32px';
            avatar.style.height = '32px';
            avatar.style.fontSize = '14px';
            avatar.style.background = currentUser.color;
            avatar.textContent = currentUser.nick.charAt(0).toUpperCase();
            msgDiv.appendChild(avatar);
            
            const content = document.createElement('div');
            content.className = 'message-content';
            
            const header = document.createElement('div');
            header.className = 'message-header';
            
            const sender = document.createElement('span');
            sender.className = 'message-sender';
            sender.style.fontSize = '13px';
            sender.textContent = currentUser.nick;
            header.appendChild(sender);
            
            const time = document.createElement('span');
            time.className = 'message-time';
            time.style.fontSize = '11px';
            time.textContent = formatTime(new Date());
            header.appendChild(time);
            
            content.appendChild(header);
            
            const textDiv = document.createElement('div');
            textDiv.className = 'message-text';
            textDiv.style.fontSize = '14px';
            textDiv.innerHTML = formatMessageText(text);
            content.appendChild(textDiv);
            
            msgDiv.appendChild(content);
            container.appendChild(msgDiv);
            
            input.value = '';
            autoResize(input);
            container.scrollTop = container.scrollHeight;
            
            // Hedef kullanƒ±cƒ±ya bildirim
            if (users[nick]) {
                addNotification('private', `${currentUser.nick}: ${text.substring(0, 50)}...`);
            }
        }
        
        function handlePrivateKeyDown(e, nick) {
            if (e.key === 'Enter' && !e.shiftKey) {
                e.preventDefault();
                sendPrivateMessage(nick);
            }
        }
        
        // ========== IRC KOMUT Sƒ∞STEMƒ∞ ==========
        function handleCommand(cmd) {
            const parts = cmd.substring(1).split(' ');
            const command = parts[0].toLowerCase();
            const args = parts.slice(1);
            
            switch(command) {
                case 'help':
                case 'yardƒ±m':
                    showHelp();
                    break;
                    
                case 'nick':
                    if (args[0]) changeNick(args[0]);
                    else addSystemMessage('Kullanƒ±m: /nick [yeni_nick]');
                    break;
                    
                case 'me':
                    if (args.length > 0) addActionMessage(args.join(' '));
                    else addSystemMessage('Kullanƒ±m: /me [eylem]');
                    break;
                    
                case 'msg':
                case 'pm':
                case 'whisper':
                    if (args.length >= 2) {
                        const target = args[0];
                        const message = args.slice(1).join(' ');
                        openPrivateChat(target);
                        setTimeout(() => {
                            const input = document.getElementById('privateMessageInput');
                            if (input) {
                                input.value = message;
                                autoResize(input);
                            }
                        }, 300);
                    } else {
                        addSystemMessage('Kullanƒ±m: /msg [nick] [mesaj]');
                    }
                    break;
                    
                case 'list':
                    showChannelUsers();
                    break;
                    
                case 'whois':
                    if (args[0]) showUserInfo(args[0]);
                    else addSystemMessage('Kullanƒ±m: /whois [nick]');
                    break;
                    
                case 'join':
                    if (args[0]) joinChannel(args[0]);
                    else addSystemMessage('Kullanƒ±m: /join [#kanal]');
                    break;
                    
                case 'part':
                case 'leave':
                    leaveChannel();
                    break;
                    
                case 'topic':
                    if (args.length > 0) changeTopic(args.join(' '));
                    else addSystemMessage(`Kanal konusu: ${channels[currentChannel].topic}`);
                    break;
                    
                case 'kick':
                    if (hasPermission('kick') && args.length >= 2) {
                        kickUser(args[0], args.slice(1).join(' '));
                    } else if (!hasPermission('kick')) {
                        addSystemMessage('Bu komut i√ßin yetkiniz yok!');
                    } else {
                        addSystemMessage('Kullanƒ±m: /kick [nick] [sebep]');
                    }
                    break;
                    
                case 'ban':
                    if (hasPermission('ban') && args.length >= 2) {
                        banUser(args[0], args.slice(1).join(' '));
                    } else if (!hasPermission('ban')) {
                        addSystemMessage('Bu komut i√ßin yetkiniz yok!');
                    } else {
                        addSystemMessage('Kullanƒ±m: /ban [nick] [sebep]');
                    }
                    break;
                    
                case 'mute':
                    if (hasPermission('mute') && args.length >= 2) {
                        muteUser(args[0], args.slice(1).join(' '));
                    } else if (!hasPermission('mute')) {
                        addSystemMessage('Bu komut i√ßin yetkiniz yok!');
                    } else {
                        addSystemMessage('Kullanƒ±m: /mute [nick] [sebep]');
                    }
                    break;
                    
                case 'op':
                    if (hasPermission('op') && args[0]) {
                        giveOp(args[0]);
                    } else if (!hasPermission('op')) {
                        addSystemMessage('Bu komut i√ßin yetkiniz yok!');
                    } else {
                        addSystemMessage('Kullanƒ±m: /op [nick]');
                    }
                    break;
                    
                case 'admin':
                    if (currentUser.role === CONFIG.ROLES.OWNER && args[0]) {
                        giveAdmin(args[0]);
                    } else if (currentUser.role !== CONFIG.ROLES.OWNER) {
                        addSystemMessage('Bu komut sadece Owner tarafƒ±ndan kullanƒ±labilir!');
                    } else {
                        addSystemMessage('Kullanƒ±m: /admin [nick]');
                    }
                    break;
                    
                case 'deop':
                    if (hasPermission('op') && args[0]) {
                        deopUser(args[0]);
                    } else if (!hasPermission('op')) {
                        addSystemMessage('Bu komut i√ßin yetkiniz yok!');
                    } else {
                        addSystemMessage('Kullanƒ±m: /deop [nick]');
                    }
                    break;
                    
                case 'clear':
                    if (hasPermission('clear')) {
                        clearChat();
                    } else {
                        addSystemMessage('Bu komut i√ßin yetkiniz yok!');
                    }
                    break;
                    
                case 'ignore':
                    if (args[0]) ignoreUser(args[0]);
                    else addSystemMessage('Kullanƒ±m: /ignore [nick]');
                    break;
                    
                case 'unignore':
                    if (args[0]) unignoreUser(args[0]);
                    else addSystemMessage('Kullanƒ±m: /unignore [nick]');
                    break;
                    
                case 'stats':
                    if (currentUser.role === CONFIG.ROLES.OWNER || currentUser.role === CONFIG.ROLES.ADMIN) {
                        BOT_MATE.executeCommand('stats', []);
                    } else {
                        addSystemMessage('Bu komut i√ßin yetkiniz yok!');
                    }
                    break;
                    
                case 'bot':
                    if (currentUser.role === CONFIG.ROLES.OWNER && args.length > 0) {
                        BOT_MATE.executeCommand(args[0], args.slice(1));
                    } else if (currentUser.role !== CONFIG.ROLES.OWNER) {
                        addSystemMessage('Bu komut sadece Owner tarafƒ±ndan kullanƒ±labilir!');
                    } else {
                        addSystemMessage('Kullanƒ±m: /bot [komut]');
                    }
                    break;
                    
                case 'follow':
                    if (args[0]) toggleFollow(args[0]);
                    else addSystemMessage('Kullanƒ±m: /follow [nick]');
                    break;
                    
                case 'unfollow':
                    if (args[0]) unfollowUser(args[0]);
                    else addSystemMessage('Kullanƒ±m: /unfollow [nick]');
                    break;
                    
                case 'story':
                    createStory();
                    break;
                    
                case 'status':
                    if (args[0]) changeUserStatus(args[0]);
                    else addSystemMessage('Kullanƒ±m: /status [online/away/busy/offline]');
                    break;
                    
                case 'theme':
                    toggleTheme();
                    break;
                    
                case 'quote':
                    if (args.length > 0) sendQuote(args.join(' '));
                    break;
                    
                case 'slap':
                    if (args[0]) slapUser(args[0]);
                    break;
                    
                case 'roll':
                    rollDice(args[0]);
                    break;
                    
                default:
                    addSystemMessage(`‚ùå Bilinmeyen komut: ${command}. /help yazarak komut listesini g√∂rebilirsiniz.`);
            }
        }
        
        function showHelp() {
            let help = `
                <strong>üìñ IRC KOMUT Lƒ∞STESƒ∞:</strong><br><br>
                
                <strong>üì¢ Genel Komutlar:</strong><br>
                ‚Ä¢ /help - Bu yardƒ±m mesajƒ±nƒ± g√∂sterir<br>
                ‚Ä¢ /nick [yeni] - Nick deƒüi≈ütir<br>
                ‚Ä¢ /me [eylem] - Eylem mesajƒ± g√∂nder<br>
                ‚Ä¢ /msg [nick] [mesaj] - √ñzel mesaj g√∂nder<br>
                ‚Ä¢ /list - Kanal kullanƒ±cƒ±larƒ±nƒ± listele<br>
                ‚Ä¢ /whois [nick] - Kullanƒ±cƒ± bilgisi g√∂ster<br>
                ‚Ä¢ /follow [nick] - Kullanƒ±cƒ±yƒ± takip et<br>
                ‚Ä¢ /story - Story payla≈ü<br>
                ‚Ä¢ /status [durum] - Durum deƒüi≈ütir<br>
                ‚Ä¢ /theme - Tema deƒüi≈ütir<br>
                <br>
                
                <strong>üí¨ Kanal Komutlarƒ±:</strong><br>
                ‚Ä¢ /join [#kanal] - Kanal'a katƒ±l<br>
                ‚Ä¢ /part - Kanal'dan ayrƒ±l<br>
                ‚Ä¢ /topic [konu] - Kanal konusunu deƒüi≈ütir<br>
                <br>
            `;
            
            if (hasPermission('clear')) {
                help += `
                    <strong>‚ö° Y√∂netim Komutlarƒ±:</strong><br>
                    ‚Ä¢ /clear - Sohbeti temizle<br>
                    ‚Ä¢ /kick [nick] [sebep] - Kullanƒ±cƒ±yƒ± at<br>
                    ‚Ä¢ /mute [nick] [sebep] - Kullanƒ±cƒ±yƒ± sustur<br>
                    ‚Ä¢ /ban [nick] [sebep] - Kullanƒ±cƒ±yƒ± yasakla<br>
                    ‚Ä¢ /op [nick] - Operat√∂r yetkisi ver<br>
                    ‚Ä¢ /deop [nick] - Operat√∂r yetkisini al<br>
                    <br>
                `;
            }
            
            if (currentUser.role === CONFIG.ROLES.ADMIN) {
                help += `‚Ä¢ /admin [nick] - Admin yetkisi ver<br>`;
            }
            
            if (currentUser.role === CONFIG.ROLES.OWNER) {
                help += `
                    <strong>üëë Owner Komutlarƒ±:</strong><br>
                    ‚Ä¢ /bot [komut] - Bot'u y√∂net<br>
                    ‚Ä¢ /stats - Sistem istatistikleri<br>
                    <br>
                `;
            }
            
            help += `
                <strong>üéÆ Eƒülence Komutlarƒ±:</strong><br>
                ‚Ä¢ /quote [mesaj] - Alƒ±ntƒ± yap<br>
                ‚Ä¢ /slap [nick] - Kullanƒ±cƒ±ya vur<br>
                ‚Ä¢ /roll [zar] - Zar at (√∂rn: /roll 1d6)<br>
                <br>
                
                <strong>üîß Diƒüer Komutlar:</strong><br>
                ‚Ä¢ /ignore [nick] - Kullanƒ±cƒ±yƒ± engelle<br>
                ‚Ä¢ /unignore [nick] - Engeli kaldƒ±r<br>
            `;
            
            addSystemMessage(help);
        }
        
        function showChannelUsers() {
            const channelUsers = Array.from(channels[currentChannel].users);
            const onlineUsers = channelUsers.filter(nick => users[nick]?.isOnline);
            const offlineUsers = channelUsers.filter(nick => users[nick] && !users[nick].isOnline);
            
            addSystemMessage(
                `üë• ${channels[currentChannel].name} - Kullanƒ±cƒ± Listesi (${channelUsers.length}):<br><br>` +
                `üü¢ √áevrimi√ßi (${onlineUsers.length}):<br>${onlineUsers.map(nick => `  ‚Ä¢ ${nick} ${users[nick]?.role !== CONFIG.ROLES.USER ? `(${getRoleBadge(users[nick].role)})` : ''}`).join('<br>')}<br><br>` +
                `‚ö´ √áevrimdƒ±≈üƒ± (${offlineUsers.length}):<br>${offlineUsers.map(nick => `  ‚Ä¢ ${nick}`).join('<br>')}`
            );
        }
        
        // ========== YARDIMCI FONKSƒ∞YONLAR ==========
        function generateAvatar(nick) {
            return nick.charAt(0).toUpperCase();
        }
        
        function generateColor(nick) {
            const colors = [
                '#1890ff', '#52c41a', '#fa8c16', '#f5222d',
                '#722ed1', '#13c2c2', '#eb2f96', '#faad14',
                '#2f54eb', '#73d13d', '#ff7a45', '#cf1322'
            ];
            
            let hash = 0;
            for (let i = 0; i < nick.length; i++) {
                hash = nick.charCodeAt(i) + ((hash << 5) - hash);
            }
            
            return colors[Math.abs(hash) % colors.length];
        }
        
        function getRoleBadge(role) {
            switch(role) {
                case CONFIG.ROLES.OWNER: return 'OWNER';
                case CONFIG.ROLES.ADMIN: return 'ADMIN';
                case CONFIG.ROLES.COADMIN: return 'CO-ADMIN';
                case CONFIG.ROLES.OPERATOR: return 'OP';
                case CONFIG.ROLES.VIP: return 'VIP';
                case CONFIG.ROLES.BOT: return 'BOT';
                default: return 'USER';
            }
        }
        
        function getRoleName(role) {
            switch(role) {
                case CONFIG.ROLES.OWNER: return 'Sistem Sahibi';
                case CONFIG.ROLES.ADMIN: return 'Y√∂netici';
                case CONFIG.ROLES.COADMIN: return 'Co-Y√∂netici';
                case CONFIG.ROLES.OPERATOR: return 'Operat√∂r';
                case CONFIG.ROLES.VIP: return 'VIP Kullanƒ±cƒ±';
                case CONFIG.ROLES.BOT: return 'Sistem Botu';
                default: return 'Kullanƒ±cƒ±';
            }
        }
        
        function formatMessageText(text) {
            // URL'leri link'e √ßevir
            let formatted = text.replace(
                /(https?:\/\/[^\s]+)/g,
                '<a href="$1" target="_blank" style="color: var(--primary); font-weight: 500;">$1</a>'
            );
            
            // @mention'larƒ± vurgula
            formatted = formatted.replace(
                /@(\w+)/g,
                (match, nick) => {
                    if (users[nick]) {
                        return `<span style="color: var(--primary); font-weight: 700; background: rgba(24, 144, 255, 0.1); padding: 2px 4px; border-radius: 3px;">@${nick}</span>`;
                    }
                    return match;
                }
            );
            
            // IRC renk kodlarƒ± (basit destek)
            formatted = formatted.replace(/\x03(\d{1,2})/g, '<span style="color: var(--primary);">');
            formatted = formatted.replace(/\x02(.+?)\x02/g, '<strong>$1</strong>');
            formatted = formatted.replace(/\x1D(.+?)\x1D/g, '<em>$1</em>');
            
            // Satƒ±r sonlarƒ±nƒ± <br> ile deƒüi≈ütir
            formatted = formatted.replace(/\n/g, '<br>');
            
            return formatted;
        }
        
        function formatDate(date) {
            const now = new Date();
            const diff = now - date;
            
            if (diff < 24 * 60 * 60 * 1000) {
                return 'Bug√ºn';
            } else if (diff < 48 * 60 * 60 * 1000) {
                return 'D√ºn';
            } else {
                return date.toLocaleDateString('tr-TR');
            }
        }
        
        function formatTime(date) {
            return date.toLocaleTimeString('tr-TR', { 
                hour: '2-digit', 
                minute: '2-digit' 
            });
        }
        
        function formatRelativeTime(date) {
            const now = new Date();
            const diff = now - date;
            
            const minute = 60 * 1000;
            const hour = 60 * minute;
            const day = 24 * hour;
            const week = 7 * day;
            
            if (diff < minute) {
                return 'az √∂nce';
            } else if (diff < hour) {
                return `${Math.floor(diff / minute)} dakika √∂nce`;
            } else if (diff < day) {
                return `${Math.floor(diff / hour)} saat √∂nce`;
            } else if (diff < week) {
                return `${Math.floor(diff / day)} g√ºn √∂nce`;
            } else {
                return date.toLocaleDateString('tr-TR');
            }
        }
        
        function hasPermission(action) {
            if (currentUser.role === CONFIG.ROLES.OWNER) return true;
            
            const permissions = CONFIG.PERMISSIONS[currentUser.role] || [];
            return permissions.includes('all') || permissions.includes(action);
        }
        
        // ========== BA≈ûLANGI√á ==========
        window.addEventListener('load', function() {
            // Tema y√ºkle
            if (localStorage.getItem('theme') === 'dark') {
                document.body.classList.add('dark-mode');
            }
            
            // Enter tu≈üu ile giri≈ü
            document.getElementById('loginNick').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') login();
            });
            
            document.getElementById('loginPassword').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') login();
            });
            
            // Sayfa kapatƒ±lƒ±rken
            window.addEventListener('beforeunload', function() {
                if (currentUser) {
                    currentUser.isOnline = false;
                    currentUser.lastSeen = new Date();
                }
            });
        });
        
        // ========== TAMAMLANMAMI≈û FONKSƒ∞YONLAR ==========
        // Bu fonksiyonlar daha sonra tamamlanacak
        function showUserContextMenu(e, user) {
            e.preventDefault();
            // Saƒü tƒ±k men√ºs√º
        }
        
        function toggleFollow(nick) {
            const user = users[nick];
            if (!user) return;
            
            if (currentUser.following.has(nick)) {
                currentUser.following.delete(nick);
                user.followers.delete(currentUser.nick);
                addSystemMessage(`‚ùå ${nick} takibi bƒ±rakƒ±ldƒ±.`);
            } else {
                currentUser.following.add(nick);
                user.followers.add(currentUser.nick);
                addSystemMessage(`‚úÖ ${nick} takip edilmeye ba≈ülandƒ±.`);
                addNotification('follow', `${currentUser.nick} seni takip etti.`);
            }
            
            closeModal('profileModal');
            openProfile(nick);
        }
        
        function toggleBlock(nick) {
            if (!blocked[currentUser.nick]) {
                blocked[currentUser.nick] = new Set();
            }
            
            if (blocked[currentUser.nick].has(nick)) {
                blocked[currentUser.nick].delete(nick);
                addSystemMessage(`üîì ${nick} engeli kaldƒ±rƒ±ldƒ±.`);
            } else {
                blocked[currentUser.nick].add(nick);
                addSystemMessage(`üö´ ${nick} engellendi.`);
                
                if (activePrivateChat === nick) {
                    closeModal('privateChatModal');
                }
            }
            
            if (document.getElementById('profileModal').classList.contains('active')) {
                closeModal('profileModal');
                openProfile(nick);
            }
        }
        
        function reportUser(nick) {
            const reason = prompt(`${nick} kullanƒ±cƒ±sƒ±nƒ± ≈üikayet sebebiniz:`);
            if (reason) {
                reports.push({
                    id: Date.now(),
                    type: 'user',
                    user: nick,
                    reporter: currentUser.nick,
                    reason: reason,
                    status: 'pending',
                    time: new Date()
                });
                
                updateNotificationBadge();
                addSystemMessage(`‚ö†Ô∏è ≈ûikayetiniz alƒ±ndƒ±: ${reason}`);
                
                closeModal('profileModal');
            }
        }
        
        function updatePermissionButtons() {
            const clearBtn = document.getElementById('clearBtn');
            const adminBtn = document.getElementById('adminBtn');
            
            if (hasPermission('clear')) {
                clearBtn.style.display = 'flex';
            }
            
            if (hasPermission('view_reports')) {
                adminBtn.style.display = 'flex';
                updateAdminBadge();
            }
        }
        
        function updateNotificationBadge() {
            const unread = notifications.filter(n => !n.read).length;
            const badge = document.getElementById('notificationBadge');
            badge.textContent = unread > 0 ? unread : '';
        }
        
        function updateAdminBadge() {
            const pending = reports.filter(r => r.status === 'pending').length;
            const badge = document.getElementById('adminBadge');
            badge.textContent = pending > 0 ? pending : '';
        }
        
        function updateChannelBadges() {
            // Kanal listesini g√ºncelle
            updateChannelsList();
        }
        
        // Diƒüer fonksiyonlar daha sonra tamamlanacak...
    </script>
</body>
</html>
